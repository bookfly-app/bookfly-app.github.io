import{m as Vs,n as qs,o as Es,u as T,f as ks}from"../chunks/DV3XZOMr.js";import"../chunks/Bg9kRutz.js";import{p as Hs,a as Js,g as r,v as gs,f as B,s,t as P,ab as hs,c as e,r as t,k as R}from"../chunks/C62SPajG.js";import{i as A,b as Ks,s as o}from"../chunks/BbJ7nyNa.js";import{P as Qs,s as O,a as bs}from"../chunks/D9igWbRp.js";import{e as ws,i as Ws}from"../chunks/EPkomH51.js";import{a as u,t as b,c as J,e as Xs}from"../chunks/Bqi7JOxH.js";import{d as Ys}from"../chunks/Bu0Zqk6q.js";import{p as xs}from"../chunks/B65nbPqP.js";import{B as Zs}from"../chunks/CuzRAada.js";import{B as sa,S as aa,A as ta}from"../chunks/LVj815OY.js";import{a as ea}from"../chunks/DKhumj_K.js";const ra=async({params:C})=>({book:await Vs(C.isbn)}),Ra=Object.freeze(Object.defineProperty({__proto__:null,load:ra},Symbol.toStringTag,{value:"Module"}));async function na(C,w){var _;const a=T().readingList;ks({readingList:[...a,w.isbn]}),(_=T())==null||_.readingList.push(w.isbn)}async function oa(C,w){const a=T().readingList.filter(_=>_!==w.isbn);ks({readingList:a}),T().readingList=a}var ia=b('<h2 class="svelte-s7mw92"> </h2>'),la=b('<button class="rating svelte-s7mw92"><!> <span class="count svelte-s7mw92"> </span></button>'),va=b('<button id="add-to-reading-list" class="remove-from-reading-list svelte-s7mw92">Remove from Reading List</button>'),ca=b('<button id="add-to-reading-list" class="svelte-s7mw92">Add to Reading List</button>'),pa=b('<a href="/author" class="svelte-s7mw92"> </a><!>',1),ua=b('<span class="svelte-s7mw92"><span class="svelte-s7mw92">Characters:</span> </span>'),_a=b('<div class="book-info svelte-s7mw92"><div class="title svelte-s7mw92"><h1 class="svelte-s7mw92"> </h1> <!></div> <!> <!> <p class="description svelte-s7mw92"> </p></div> <!> <div class="product-info svelte-s7mw92"><h2 class="svelte-s7mw92">Product Information</h2> <span class="svelte-s7mw92"><span class="svelte-s7mw92">Title:</span> </span> <span class="svelte-s7mw92"><span class="svelte-s7mw92"> </span> <span class="svelte-s7mw92"></span></span> <span class="svelte-s7mw92"><span class="svelte-s7mw92">ISBN-13:</span> </span> <span class="svelte-s7mw92"><span class="svelte-s7mw92">Page Count:</span> </span> <span class="svelte-s7mw92"><span class="svelte-s7mw92">Publish Date:</span> </span> <span class="svelte-s7mw92"><span class="svelte-s7mw92"> </span> </span> <!> <span class="svelte-s7mw92"><span class="svelte-s7mw92">Tags:</span> </span></div>',1),ma=b('<!> <nav class="svelte-s7mw92"><div class="book-name svelte-s7mw92"><h1 class="svelte-s7mw92"> </h1> <h2 class="svelte-s7mw92"> </h2></div> <div class="views svelte-s7mw92"><button class="svelte-s7mw92">Info</button> <button class="svelte-s7mw92">Discussion</button></div></nav> <section class="svelte-s7mw92"><!></section>',1);function Aa(C,w){Hs(w,!0);let a=w.data.book,_=hs("info");function K(l){return function(){gs(_,xs(l)),Q.scrollTop=0}}let ys=qs(a.isbn),vs=hs(null),Ls=R(()=>{var l;return((l=T())==null?void 0:l.readingList.includes(a.isbn))??!1});function Bs(l,cs=3){l=l.replaceAll("--","â€”"),l=l.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`);let x=l.split(/([.!?])\s*/);const $=[];for(let v=0;v<x.length;v+=2){const f=v<x.length-1?x[v+1]:"";$.push(x[v]+f)}let k=$.map((v,f)=>(f+1)%cs===0&&f!==$.length-1?v+`

`:v).join("");return k=k.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`),k}let Q;Qs(C,{type:"search",get sidebar(){return r(vs)},set sidebar(l){gs(vs,xs(l))},children:(l,cs)=>{var x=ma(),$=B(x);Zs($,{style:"position: fixed; top: 1rem; left: 1rem;"});var z=s($,2),k=e(z),v=e(k),f=e(v,!0);t(v);var ps=s(v,2),Ps=e(ps,!0);t(ps),t(k);var us=s(k,2),G=e(us),Rs=R(()=>K("info"));G.__click=function(...c){var d;(d=r(Rs))==null||d.apply(this,c)};var W=s(G,2),As=R(()=>K("discussion"));W.__click=function(...c){var d;(d=r(As))==null||d.apply(this,c)},t(us),t(z);var X=s(z,2),$s=e(X);{var js=c=>{var d=_a(),D=B(d),I=e(D),y=e(I),M=e(y,!0);t(y);var Y=s(y,2);{var Z=n=>{var i=ia(),m=e(i,!0);t(i),P(()=>o(m,a.authors[0])),u(n,i)};A(Y,n=>{a.authors.length>0&&n(Z)})}t(I);var U=s(I,2);sa(U,{book:a,style:"width: 10rem"});var F=s(U,2);bs(F,()=>Es(a.isbn),null,(n,i)=>{var m=R(()=>{var{rating:N,count:H}=r(i);return{rating:N,count:H}}),h=R(()=>r(m).rating),L=R(()=>r(m).count),p=la(),g=R(()=>K("discussion"));p.__click=function(...N){var H;(H=r(g))==null||H.apply(this,N)};var j=e(p);aa(j,{get rating(){return r(h)}});var S=s(j),E=s(S),Us=e(E);t(E),t(p),P(N=>{o(S,` ${N??""} `),o(Us,`(${r(L)??""})`)},[()=>r(h).toFixed(1)]),u(n,p)});var V=s(F,2),ss=e(V,!0);t(V),t(D);var q=s(D,2);{var Ts=n=>{var i=J(),m=B(i);{var h=p=>{var g=va();g.__click=[oa,a],u(p,g)},L=p=>{var g=ca();g.__click=[na,a],P(j=>O(g,"background",j),[ea]),u(p,g)};A(m,p=>{r(Ls)?p(h):p(L,!1)})}u(n,i)};A(q,n=>{T()&&n(Ts)})}var _s=s(q,2),as=s(e(_s),2),Cs=s(e(as),1,!0);t(as);var ts=s(as,2),es=e(ts),Ds=e(es);t(es);var ms=s(es,2);ws(ms,22,()=>a.authors,n=>n,(n,i,m)=>{var h=pa(),L=B(h),p=e(L,!0);t(L);var g=s(L);{var j=S=>{var E=Xs(",");u(S,E)};A(g,S=>{r(m)!==a.authors.length-1&&S(j)})}P(()=>o(p,i)),u(n,h)}),t(ms),t(ts);var rs=s(ts,2),Is=s(e(rs),1,!0);t(rs);var ns=s(rs,2),Fs=s(e(ns),1,!0);t(ns);var os=s(ns,2),Ns=s(e(os),1,!0);t(os);var is=s(os,2),ls=e(is),Os=e(ls);t(ls);var zs=s(ls,1,!0);t(is);var ds=s(is,2);{var Gs=n=>{var i=ua(),m=s(e(i),1,!0);t(i),P(h=>o(m,h),[()=>a.characters.join(", ")]),u(n,i)};A(ds,n=>{a.characters.length>0&&n(Gs)})}var fs=s(ds,2),Ms=s(e(fs),1,!0);t(fs),t(_s),P((n,i,m)=>{o(M,a.title),o(ss,n),o(Cs,a.title),o(Ds,`Author${(a.authors.length===1?"":"s")??""}:`),o(Is,a.isbn),o(Fs,a.pageCount),o(Ns,a.publishDate),o(Os,`Publisher${(a.publishers.length===1?"":"s")??""}:`),o(zs,i),o(Ms,m)},[()=>Bs(a.description),()=>a.publishers.join(", "),()=>a.genres.join(", ")]),u(c,d)},Ss=c=>{var d=J(),D=B(d);{var I=y=>{var M=J(),Y=B(M);bs(Y,()=>ys,null,(Z,U)=>{var F=J(),V=B(F);ws(V,17,()=>r(U),Ws,(ss,q)=>{ta(ss,{get post(){return r(q)}})}),u(Z,F)}),u(y,M)};A(D,y=>{r(_)==="discussion"&&y(I)},!0)}u(c,d)};A($s,c=>{r(_)==="info"?c(js):c(Ss,!1)})}t(X),Ks(X,c=>Q=c,()=>Q),P(c=>{o(f,a.title),o(Ps,c),O(G,"color",r(_)==="info"?"var(--text)":"var(--overlay-1)"),O(G,"border-bottom-color",r(_)==="info"?"var(--lavender)":"transparent"),O(W,"color",r(_)==="discussion"?"var(--text)":"var(--overlay-1)"),O(W,"border-bottom-color",r(_)==="discussion"?"var(--lavender)":"transparent")},[()=>a.authors.join(", ")]),u(l,x)},$$slots:{default:!0}}),Js()}Ys(["click"]);export{Aa as component,Ra as universal};
