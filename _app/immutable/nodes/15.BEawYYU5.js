import"../chunks/Bg9kRutz.js";import{p as Se,a5 as f,u as xe,a as Re,j as t,g,f as v,s as p,t as te,c,r as m,a6 as P}from"../chunks/DpL-zfgl.js";import{d as Ie}from"../chunks/DHveY-33.js";import{a as l,t as re,c as d}from"../chunks/DitkTsWA.js";import{P as Le,S as Ue,a as ae,g as Ae,b as Fe}from"../chunks/4xhgHt_c.js";import{i as I}from"../chunks/BdjlEak8.js";import{e as B,i as C}from"../chunks/BzvN9xHF.js";import{s as Ve,c as S}from"../chunks/Bh5g2vjz.js";import{s as x}from"../chunks/CHL61BMj.js";import{p as o}from"../chunks/D9Rqb9Mt.js";import{g as We}from"../chunks/Q4kBbe0I.js";import{u as _,b as D,c as je}from"../chunks/CNXCd5Iu.js";import{W as Oe}from"../chunks/Cl5hjvZI.js";import{A as E}from"../chunks/C_zcqE6L.js";var Ye=(G,L)=>t(L).show(),qe=re('<img alt="Your profile" class="profile-link svelte-hoggop">'),ze=re('<nav class="svelte-hoggop"><div class="banner svelte-hoggop"><button aria-label="Open sidebar" class="svelte-hoggop"><!></button> <button class="svelte-hoggop"><!></button> <a class="search svelte-hoggop" href="/search"><!></a></div></nav> <section class="svelte-hoggop"><div class="views svelte-hoggop"><button>Viewed</button> <button>Liked</button> <button>Replies</button> <button>Saved</button> <button>Shared</button></div></section> <!>',1);function $e(G,L){Se(L,!0);let U=f(null),s=f(o(new URLSearchParams(window.location.search).get("view")??"likes")),H=f(o([])),J=f(o([])),se=f(o([])),K=f(o(Promise.resolve([])));xe(()=>{_()&&M()});async function M(){t(s)==="likes"&&g(J,o((await Promise.all(_().likes.map(e=>D(e)))).map(e=>e).filter(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp))),t(s)==="viewed"&&g(H,o((await Promise.all(_().views.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp))),t(s)==="replies"&&g(K,o(je(_()))),t(s)==="shared"&&g(se,o((await Promise.all(_().shares.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp)))}function u(e){return async function(){const n=new URLSearchParams({view:e});We(`/interactions?${n}`),g(s,o(e)),await M()}}Le(G,{type:"search",get sidebar(){return t(U)},set sidebar(e){g(U,o(e))},children:(e,n)=>{var Q=ze(),A=v(Q),T=c(A),R=c(T);R.__click=[Ye,U];var oe=c(R);{var ie=a=>{var r=d(),h=v(r);ae(h,()=>Ae(_().picture),null,(b,w)=>{var i=qe();te(()=>Ve(i,"src",t(w))),l(b,i)}),l(a,r)},le=a=>{Fe(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};I(oe,a=>{_()?a(ie):a(le,!1)})}m(R);var F=p(R,2),ne=c(F);Oe(ne,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),m(F);var X=p(F,2),ve=c(X);Ue(ve,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),m(X),m(T),m(A);var V=p(A,2),Z=c(V),W=c(Z),pe=P(()=>u("viewed"));W.__click=function(...a){var r;(r=t(pe))==null||r.apply(this,a)};var j=p(W,2),ce=P(()=>u("likes"));j.__click=function(...a){var r;(r=t(ce))==null||r.apply(this,a)};var O=p(j,2),me=P(()=>u("replies"));O.__click=function(...a){var r;(r=t(me))==null||r.apply(this,a)};var Y=p(O,2),de=P(()=>u("saved"));Y.__click=function(...a){var r;(r=t(de))==null||r.apply(this,a)};var N=p(Y,2),_e=P(()=>u("shared"));N.__click=function(...a){var r;(r=t(_e))==null||r.apply(this,a)},m(Z),m(V);var fe=p(V,2);{var ge=a=>{var r=d(),h=v(r);B(h,17,()=>t(H),C,(b,w)=>{E(b,{get post(){return t(w)}})}),l(a,r)},ue=a=>{var r=d(),h=v(r);{var b=i=>{var k=d(),q=v(k);B(q,17,()=>t(J),C,(z,y)=>{E(z,{get post(){return t(y)}})}),l(i,k)},w=i=>{var k=d(),q=v(k);{var z=y=>{var $=d(),he=v($);ae(he,()=>t(K),null,(be,we)=>{var ee=d(),ke=v(ee);B(ke,17,()=>t(we),C,(ye,Pe)=>{E(ye,{get post(){return t(Pe)}})}),l(be,ee)}),l(y,$)};I(q,y=>{t(s)==="replies"&&y(z)},!0)}l(i,k)};I(h,i=>{t(s)==="likes"?i(b):i(w,!1)},!0)}l(a,r)};I(fe,a=>{t(s)==="viewed"?a(ge):a(ue,!1)})}te(()=>{x(W,S(t(s)==="viewed"?"selected":""),"svelte-hoggop"),x(j,S(t(s)==="likes"?"selected":""),"svelte-hoggop"),x(O,S(t(s)==="replies"?"selected":""),"svelte-hoggop"),x(Y,S(t(s)==="saved"?"selected":""),"svelte-hoggop"),x(N,S(t(s)==="shared"?"selected":""),"svelte-hoggop")}),l(e,Q)},$$slots:{default:!0}}),Re()}Ie(["click"]);export{$e as component};
