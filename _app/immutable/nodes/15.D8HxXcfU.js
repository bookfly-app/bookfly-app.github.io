import"../chunks/Bg9kRutz.js";import{p as Se,ab as f,u as xe,a as Re,g as t,v as u,f as v,s as c,t as te,c as m,r as p,k as P}from"../chunks/C62SPajG.js";import{d as Ie}from"../chunks/Bu0Zqk6q.js";import{a as o,t as re,c as d}from"../chunks/Bqi7JOxH.js";import{P as Le,S as Ue,a as ae,g as Ae,b as Fe}from"../chunks/D9igWbRp.js";import{i as I}from"../chunks/BbJ7nyNa.js";import{e as B,i as C}from"../chunks/EPkomH51.js";import{s as Ve,c as S}from"../chunks/BqKKz4p4.js";import{s as x}from"../chunks/CrE22pqL.js";import{p as i}from"../chunks/B65nbPqP.js";import{g as We}from"../chunks/BA5qhnwX.js";import{u as _,b as D,c as Oe}from"../chunks/DV3XZOMr.js";import{W as Ye}from"../chunks/ymhjn565.js";import{A as E}from"../chunks/LVj815OY.js";var je=(G,L)=>t(L).show(),qe=re('<img alt="Your profile" class="profile-link svelte-1pc16ml">'),ze=re('<nav class="svelte-1pc16ml"><div class="banner svelte-1pc16ml"><button aria-label="Open sidebar" class="svelte-1pc16ml"><!></button> <button class="svelte-1pc16ml"><!></button> <a class="search svelte-1pc16ml" href="/search"><!></a></div></nav> <section class="svelte-1pc16ml"><div class="views svelte-1pc16ml"><button>Viewed</button> <button>Liked</button> <button>Replies</button> <button>Saved</button> <button>Shared</button></div></section> <!>',1);function $e(G,L){Se(L,!0);let U=f(null),s=f(i(new URLSearchParams(window.location.search).get("view")??"likes")),H=f(i([])),J=f(i([])),se=f(i([])),K=f(i(Promise.resolve([])));xe(()=>{_()&&M()});async function M(){t(s)==="likes"&&u(J,i((await Promise.all(_().likes.map(e=>D(e)))).map(e=>e).filter(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp))),t(s)==="viewed"&&u(H,i((await Promise.all(_().views.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp))),t(s)==="replies"&&u(K,i(Oe(_()))),t(s)==="shared"&&u(se,i((await Promise.all(_().shares.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp)))}function h(e){return async function(){const n=new URLSearchParams({view:e});We(`/interactions?${n}`),u(s,i(e)),await M()}}Le(G,{type:"search",get sidebar(){return t(U)},set sidebar(e){u(U,i(e))},children:(e,n)=>{var Q=ze(),A=v(Q),T=m(A),R=m(T);R.__click=[je,U];var ie=m(R);{var le=a=>{var r=d(),b=v(r);ae(b,()=>Ae(_().picture),null,(g,w)=>{var l=qe();te(()=>Ve(l,"src",t(w))),o(g,l)}),o(a,r)},oe=a=>{Fe(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};I(ie,a=>{_()?a(le):a(oe,!1)})}p(R);var F=c(R,2),ne=m(F);Ye(ne,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),p(F);var X=c(F,2),ve=m(X);Ue(ve,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),p(X),p(T),p(A);var V=c(A,2),Z=m(V),W=m(Z),ce=P(()=>h("viewed"));W.__click=function(...a){var r;(r=t(ce))==null||r.apply(this,a)};var O=c(W,2),me=P(()=>h("likes"));O.__click=function(...a){var r;(r=t(me))==null||r.apply(this,a)};var Y=c(O,2),pe=P(()=>h("replies"));Y.__click=function(...a){var r;(r=t(pe))==null||r.apply(this,a)};var j=c(Y,2),de=P(()=>h("saved"));j.__click=function(...a){var r;(r=t(de))==null||r.apply(this,a)};var N=c(j,2),_e=P(()=>h("shared"));N.__click=function(...a){var r;(r=t(_e))==null||r.apply(this,a)},p(Z),p(V);var fe=c(V,2);{var ue=a=>{var r=d(),b=v(r);B(b,17,()=>t(H),C,(g,w)=>{E(g,{get post(){return t(w)}})}),o(a,r)},he=a=>{var r=d(),b=v(r);{var g=l=>{var k=d(),q=v(k);B(q,17,()=>t(J),C,(z,y)=>{E(z,{get post(){return t(y)}})}),o(l,k)},w=l=>{var k=d(),q=v(k);{var z=y=>{var $=d(),be=v($);ae(be,()=>t(K),null,(ge,we)=>{var ee=d(),ke=v(ee);B(ke,17,()=>t(we),C,(ye,Pe)=>{E(ye,{get post(){return t(Pe)}})}),o(ge,ee)}),o(y,$)};I(q,y=>{t(s)==="replies"&&y(z)},!0)}o(l,k)};I(b,l=>{t(s)==="likes"?l(g):l(w,!1)},!0)}o(a,r)};I(fe,a=>{t(s)==="viewed"?a(ue):a(he,!1)})}te(()=>{x(W,S(t(s)==="viewed"?"selected":""),"svelte-1pc16ml"),x(O,S(t(s)==="likes"?"selected":""),"svelte-1pc16ml"),x(Y,S(t(s)==="replies"?"selected":""),"svelte-1pc16ml"),x(j,S(t(s)==="saved"?"selected":""),"svelte-1pc16ml"),x(N,S(t(s)==="shared"?"selected":""),"svelte-1pc16ml")}),o(e,Q)},$$slots:{default:!0}}),Re()}Ie(["click"]);export{$e as component};
