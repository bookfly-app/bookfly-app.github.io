import"../chunks/Bg9kRutz.js";import{p as Pe,a7 as _,u as Se,a as xe,y as t,w as u,f as v,s as d,t as te,c as m,r as c,a8 as j}from"../chunks/BaZyK-JQ.js";import{d as Re}from"../chunks/BuFl6vNe.js";import{a as o,t as re,c as p}from"../chunks/Dd2BwSaU.js";import{P as Ie,S as Le,a as ae,g as Ue,b as Ae}from"../chunks/D61NNt0m.js";import{i as R}from"../chunks/DBYv9uc3.js";import{e as B,i as C}from"../chunks/CN4MRzID.js";import{s as Fe,c as P}from"../chunks/D230ZY73.js";import{s as S}from"../chunks/B3s4N60E.js";import{p as i}from"../chunks/COAggT6D.js";import{g as Ve}from"../chunks/DM5Thq4q.js";import{u as f,e as D,f as We}from"../chunks/CgDT1lHw.js";import{W as Oe}from"../chunks/CExDkfQy.js";import{A as E}from"../chunks/TtIkNWu6.js";var Ye=(G,I)=>t(I).show(),qe=re('<img alt="Your profile" class="profile-link svelte-1ldrjek">'),ze=re('<nav class="svelte-1ldrjek"><div class="banner svelte-1ldrjek"><button aria-label="Open sidebar" class="svelte-1ldrjek"><!></button> <button class="svelte-1ldrjek"><!></button> <a class="search svelte-1ldrjek" href="/search"><!></a></div></nav> <section class="svelte-1ldrjek"><div class="views svelte-1ldrjek"><button>Viewed</button> <button>Liked</button> <button>Replies</button> <button>Saved</button> <button>Shared</button></div></section> <!>',1);function $e(G,I){Pe(I,!0);let L=_(null),s=_(i(new URLSearchParams(window.location.search).get("view")??"likes")),H=_(i([])),J=_(i([])),se=_(i([])),K=_(i(Promise.resolve([])));Se(()=>{f()&&M()});async function M(){t(s)==="likes"&&u(J,i((await Promise.all(f().likes.map(e=>D(e)))).map(e=>e).filter(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp))),t(s)==="viewed"&&u(H,i((await Promise.all(f().views.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp))),t(s)==="replies"&&u(K,i(We(f()))),t(s)==="shared"&&u(se,i((await Promise.all(f().shares.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,n)=>n.timestamp-e.timestamp)))}function h(e){return async function(){const n=new URLSearchParams({view:e});Ve(`/interactions?${n}`),u(s,i(e)),await M()}}Ie(G,{type:"profile",get sidebar(){return t(L)},set sidebar(e){u(L,i(e))},children:(e,n)=>{var Q=ze(),U=v(Q),T=m(U),x=m(T);x.__click=[Ye,L];var ie=m(x);{var le=a=>{var r=p(),k=v(r);ae(k,()=>Ue(f().picture),null,(b,g)=>{var l=qe();te(()=>Fe(l,"src",t(g))),o(b,l)}),o(a,r)},oe=a=>{Ae(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};R(ie,a=>{f()?a(le):a(oe,!1)})}c(x);var A=d(x,2),ne=m(A);Oe(ne,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),c(A);var X=d(A,2),ve=m(X);Le(ve,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),c(X),c(T),c(U);var F=d(U,2),Z=m(F),V=m(Z),de=j(()=>h("viewed"));V.__click=function(...a){var r;(r=t(de))==null||r.apply(this,a)};var W=d(V,2),me=j(()=>h("likes"));W.__click=function(...a){var r;(r=t(me))==null||r.apply(this,a)};var O=d(W,2),ce=j(()=>h("replies"));O.__click=function(...a){var r;(r=t(ce))==null||r.apply(this,a)};var Y=d(O,2),pe=j(()=>h("saved"));Y.__click=function(...a){var r;(r=t(pe))==null||r.apply(this,a)};var N=d(Y,2),fe=j(()=>h("shared"));N.__click=function(...a){var r;(r=t(fe))==null||r.apply(this,a)},c(Z),c(F);var _e=d(F,2);{var ue=a=>{var r=p(),k=v(r);B(k,17,()=>t(H),C,(b,g)=>{E(b,{get post(){return t(g)}})}),o(a,r)},he=a=>{var r=p(),k=v(r);{var b=l=>{var w=p(),q=v(w);B(q,17,()=>t(J),C,(z,y)=>{E(z,{get post(){return t(y)}})}),o(l,w)},g=l=>{var w=p(),q=v(w);{var z=y=>{var $=p(),ke=v($);ae(ke,()=>t(K),null,(be,ge)=>{var ee=p(),we=v(ee);B(we,17,()=>t(ge),C,(ye,je)=>{E(ye,{get post(){return t(je)}})}),o(be,ee)}),o(y,$)};R(q,y=>{t(s)==="replies"&&y(z)},!0)}o(l,w)};R(k,l=>{t(s)==="likes"?l(b):l(g,!1)},!0)}o(a,r)};R(_e,a=>{t(s)==="viewed"?a(ue):a(he,!1)})}te(()=>{S(V,P(t(s)==="viewed"?"selected":""),"svelte-1ldrjek"),S(W,P(t(s)==="likes"?"selected":""),"svelte-1ldrjek"),S(O,P(t(s)==="replies"?"selected":""),"svelte-1ldrjek"),S(Y,P(t(s)==="saved"?"selected":""),"svelte-1ldrjek"),S(N,P(t(s)==="shared"?"selected":""),"svelte-1ldrjek")}),o(e,Q)},$$slots:{default:!0}}),xe()}Re(["click"]);export{$e as component};
