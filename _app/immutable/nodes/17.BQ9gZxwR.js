import"../chunks/Bg9kRutz.js";import{s as o,c as l,r,t as D,p as yt,q as m,g as t,a as wt,ab as L,f as $,k as ht,Y as Et,aE as Pt}from"../chunks/RV0lYC__.js";import{r as Rt,p as St,s as F,b as Tt,i as Y}from"../chunks/Xy_1ng5V.js";import{s as e,P as Lt,a as bt}from"../chunks/Vuwk6Dbz.js";import{e as mt,i as Dt}from"../chunks/Dyzu_CEI.js";import{E as Ot,h as At}from"../chunks/bd5DCr_W.js";import{a as _,n as Vt,t as b,c as kt}from"../chunks/DPalutH2.js";import{a as Gt,s as lt,r as xt}from"../chunks/DuaAZeCU.js";import{d as Bt,r as It}from"../chunks/B8Jl9l9K.js";import{b as pt}from"../chunks/BP-4qrMh.js";import{p as nt}from"../chunks/DyOO7CRH.js";import{g as Mt}from"../chunks/VzV6Nu7c.js";import{v as Nt,z as qt,x as zt}from"../chunks/Dni00B-4.js";import{t as a}from"../chunks/w5pHyre2.js";import{o as Ut}from"../chunks/9pAqFiF3.js";import{B as Yt}from"../chunks/Diae3uGo.js";import{T as Ft}from"../chunks/Db5bQL8M.js";const Ht=({params:C})=>C,Te=Object.freeze(Object.defineProperty({__proto__:null,load:Ht},Symbol.toStringTag,{value:"Module"}));var Jt=Vt('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M10 7L15 12L10 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Kt(C,d){let O=Rt(d,["$$slots","$$events","$$legacy","stroke"]);var g=Jt();let v;var N=o(l(g),2),k=l(N);r(N),r(g),D(()=>{v=Gt(g,v,{...O,width:"256px",height:"256px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0),lt(k,"stroke",d.stroke)}),_(C,g)}var Qt=(C,d)=>m(d,!t(d)),Wt=(C,d,O,g)=>{d(t(O)),m(g,!1)},Xt=b('<button class="option svelte-1o9drnu"> </button>'),Zt=b('<div class="select svelte-1o9drnu"><button class="value svelte-1o9drnu"> <!></button> <div class="options svelte-1o9drnu"></div></div>');function $t(C,d){yt(d,!0);let O=St(d,"value",15),g=L(!1),v;Ut(()=>{document.addEventListener("click",A=>{A.composedPath().includes(v)||m(g,!1)})});var N=Zt(),k=l(N);k.__click=[Qt,g];var q=l(k),rt=o(q);Kt(rt,{get stroke(){return a().text},style:"width: 1rem; height: 1rem;"}),r(k);var x=o(k,2);mt(x,21,()=>d.options,Dt,(A,H)=>{var R=Xt();R.__click=[Wt,O,H,g];var ot=l(R,!0);r(R),D((vt,it,dt)=>{e(R,"--gray",vt),e(R,"--base-color",it),e(R,"color",dt),F(ot,t(H))},[()=>a().textDark,()=>a().backgroundDark,()=>a().text]),_(A,R)}),r(x),r(N),Tt(N,A=>v=A,()=>v),D((A,H,R)=>{e(k,"color",A),e(k,"background",H),F(q,`${O()??""} `),e(x,"border-color",R),e(x,"display",t(g)?"flex":"none")},[()=>a().text,()=>a().backgroundDark,()=>a().textDark]),_(C,N),wt()}Bt(["click"]);function te(C,d){C.key==="Enter"&&d()}var ee=b('<span class="error svelte-vdn7lm"> </span>'),ae=b('<div class="book search-book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div></div>'),re=b('<div class="book search-book svelte-vdn7lm"><img alt="Book cover" src="" class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title">Loading Title...</span> <span class="authors svelte-vdn7lm">Loading authors...</span></div></div>'),oe=b('<h2 class="body-name svelte-vdn7lm"> </h2> <div class="book-search svelte-vdn7lm"><input id="search" type="text" class="svelte-vdn7lm"> <!></div> <div class="search-results svelte-vdn7lm"></div>',1),se=b('<div class="book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div> <button class="close svelte-vdn7lm"><!></button></div>'),ne=b('<div class="books"></div>'),le=b('<span class="error svelte-vdn7lm"> </span>'),ve=b('<!> <h2 class="body-name svelte-vdn7lm">Rating</h2> <div class="stars svelte-vdn7lm"><input id="rating" class="svelte-vdn7lm"> <!></div>',1),ie=b('<h2 class="body-name svelte-vdn7lm">Update Type</h2> <!> <!>',1),de=(C,d)=>m(d,!t(d)),ce=b('<div class="preview svelte-vdn7lm"><!></div>'),ue=b('<textarea id="body" class="svelte-vdn7lm"></textarea>'),_e=b("<!> <!>",1),pe=b('<span class="svelte-vdn7lm"><!> <h1 class="svelte-vdn7lm"></h1></span> <!> <!> <div class="body-header svelte-vdn7lm"><h2 class="body-name preview-body svelte-vdn7lm"></h2> <button><!></button></div> <!> <!> <button class="post-button svelte-vdn7lm">Post</button>',1);function Le(C,d){yt(d,!0);const O=(h,E)=>{let J=Et(()=>Pt(E==null?void 0:E(),"Add a book"));var P=oe(),S=$(P),K=l(S,!0);r(S);var V=o(S,2),y=l(V);xt(y),y.__keyup=[te,R];var et=o(y,2);{var Z=p=>{var B=ee(),G=l(B,!0);r(B),D(()=>F(G,t(tt))),_(p,B)};Y(et,p=>{t(tt)&&p(Z)})}r(V);var Q=o(V,2);mt(Q,21,()=>t(A),Dt,(p,B)=>{var G=kt(),W=$(G);bt(W,()=>t(B),I=>{var j=re(),M=o(l(j),2),at=l(M),z=o(at,2);r(M),r(j),D((n,s)=>{e(at,"color",n),e(z,"color",s)},[()=>a().text,()=>a().textDull]),_(I,j)},(I,j)=>{var M=ae(),at=ht(()=>dt(t(j)));M.__click=function(...u){var T;(T=t(at))==null||T.apply(this,u)};var z=l(M),n=o(z,2),s=l(n),c=l(s,!0);r(s);var f=o(s,2),U=l(f,!0);r(f),r(n),r(M),D((u,T,i)=>{lt(z,"alt",`${t(j).title??""} cover`),lt(z,"src",t(j).cover),e(s,"color",u),F(c,t(j).title),e(f,"color",T),F(U,i)},[()=>a().text,()=>a().textDull,()=>t(j).authors.join(",")]),_(I,M)}),_(p,G)}),r(Q),D((p,B,G)=>{e(S,"color",p),F(K,t(J)),e(y,"background",B),e(y,"color",G),e(y,"outline",t(tt)?"2px solid #f38ba8":"none")},[()=>a().textDull,()=>a().backgroundDark,()=>a().text]),pt(y,()=>t(H),p=>m(H,p)),_(h,P)},g=h=>{var E=ne();mt(E,21,()=>t(x),J=>J.isbn,(J,P)=>{var S=se(),K=l(S),V=o(K,2),y=l(V),et=l(y,!0);r(y);var Z=o(y,2),Q=l(Z,!0);r(Z),r(V);var p=o(V,2),B=ht(()=>jt(t(P)));p.__click=function(...W){var I;(I=t(B))==null||I.apply(this,W)};var G=l(p);Ft(G,{stroke:"#f38ba8",style:"width: 1.25rem; height: 1.25rem;"}),r(p),r(S),D((W,I,j)=>{lt(K,"alt",`${t(P).title??""} cover`),lt(K,"src",t(P).cover),e(y,"color",W),F(et,t(P).title),e(Z,"color",I),F(Q,j)},[()=>a().text,()=>a().textDull,()=>t(P).authors.join(",")]),_(J,S)}),r(E),_(h,E)};let{type:v}=d.data,N={general:"Post Body",rating:"Review (Optional)",update:"Comments (Optional)",reply:null}[v],k=L(""),q=L(null),rt=L("start"),x=L(nt([])),A=L(nt([])),H=L("");async function R(){m(A,nt(await zt(t(H))))}let ot=L("");function vt(){v==="general"&&t(k).trim().length===0?m(ot,"Body cannot be empty"):m(ot,"")}function it(){if(v==="rating"&&ft(),(v==="rating"||v==="update")&&ct(),v==="general"&&vt(),t(X)||t(tt)||t(ot))return;let h={type:v,body:t(k),books:t(x).map(E=>E.isbn)};t(q)!==null&&(h=Object.assign(h,{rating:Number(t(q))})),v==="update"&&(h=Object.assign(h,{updateType:t(rt)})),Nt(h),Mt("/profile")}function dt(h){return function(){t(x).push(h),ct()}}function jt(h){return function(){m(x,nt(t(x).filter(E=>E.isbn!==h.isbn))),ct()}}let X=L(""),tt=L("");function ft(){if(v==="rating"){if(t(q)===null){m(X,"Add a rating value.");return}if(!/^\d(\.\d)?$/.test(t(q))){m(X,"Value must be between 0 and 10, to at most one decimal place.");return}}m(X,"")}function ct(){v==="rating"&&t(x).length===0?m(tt,"Choose a book to rate."):m(tt,"")}let gt=L(!1);Lt(C,{class:"new-post-page",children:(h,E)=>{var J=pe(),P=$(J),S=l(P);Yt(S,{});var K=o(S,2);K.textContent=`New ${v??""} Post`,r(P);var V=o(P,2);{var y=n=>{var s=ve(),c=$(s);{var f=w=>{O(w,()=>"Choose a book")},U=w=>{g(w)};Y(c,w=>{t(x).length===0?w(f):w(U,!1)})}var u=o(c,2),T=o(u,2),i=l(T);xt(i),i.__input=ft;var ut=o(i,2);{var Ct=w=>{var st=le(),_t=l(st,!0);r(st),D(()=>F(_t,t(X))),_(w,st)};Y(ut,w=>{t(X)&&w(Ct)})}r(T),D((w,st,_t)=>{e(u,"color",w),e(i,"background",st),e(i,"color",_t),e(i,"outline",t(X)?"2px solid #f38ba8":"none")},[()=>a().textDull,()=>a().backgroundDark,()=>a().text]),pt(i,()=>t(q),w=>m(q,w)),_(n,s)};Y(V,n=>{v==="rating"&&n(y)})}var et=o(V,2);{var Z=n=>{var s=ie(),c=$(s),f=o(c,2);$t(f,{options:["start","finish","abandon"],get value(){return t(rt)},set value(i){m(rt,nt(i))}});var U=o(f,2);{var u=i=>{O(i,()=>"Choose a book")},T=i=>{g(i)};Y(U,i=>{t(x).length===0?i(u):i(T,!1)})}D(i=>e(c,"color",i),[()=>a().textDull]),_(n,s)};Y(et,n=>{v==="update"&&n(Z)})}var Q=o(et,2),p=l(Q);p.textContent=N;var B=o(p,2);B.__click=[de,gt];var G=l(B);Ot(G,{get stroke(){return a().textDull},style:"width: 1rem; height: 1rem;"}),r(B),r(Q);var W=o(Q,2);{var I=n=>{var s=kt(),c=$(s);bt(c,()=>qt(t(k)),null,(f,U)=>{var u=ce(),T=l(u);At(T,()=>t(U),!1,!1),r(u),D((i,ut)=>{e(u,"color",i),e(u,"background",ut)},[()=>a().text,()=>a().backgroundDark]),_(f,u)}),_(n,s)},j=n=>{var s=ue();It(s),D((c,f)=>{e(s,"color",c),e(s,"background",f)},[()=>a().text,()=>a().backgroundDark]),pt(s,()=>t(k),c=>m(k,c)),_(n,s)};Y(W,n=>{t(gt)?n(I):n(j,!1)})}var M=o(W,2);{var at=n=>{var s=_e(),c=$(s);{var f=u=>{g(u)};Y(c,u=>{t(x).length!==0&&u(f)})}var U=o(c,2);O(U,()=>"Add a book"),_(n,s)};Y(M,n=>{v!=="rating"&&v!=="update"&&n(at)})}var z=o(M,2);z.__click=it,D((n,s,c,f)=>{e(K,"color",n),e(p,"color",s),e(z,"color",c),e(z,"background-image",f)},[()=>a().text,()=>a().textDull,()=>a().background,()=>`linear-gradient(${a().accent}, ${a().accent2})`]),_(h,J)},$$slots:{default:!0}}),wt()}Bt(["keyup","click","input"]);export{Le as component,Te as universal};
