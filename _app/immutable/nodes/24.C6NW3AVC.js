import"../chunks/Bg9kRutz.js";import{p as ba,g as o,a5 as g,a as fa,f as ea,s,j as e,a6 as ga,c as l,r as n,t as $}from"../chunks/DpL-zfgl.js";import{b as ya,s as qa,i as B}from"../chunks/BdjlEak8.js";import{P as ha,a as T,g as sa,s as j}from"../chunks/4xhgHt_c.js";import{e as ka,i as xa}from"../chunks/BzvN9xHF.js";import{a as p,t as v}from"../chunks/DitkTsWA.js";import{r as L,b as wa}from"../chunks/Bh5g2vjz.js";import{d as Ia,r as Ca}from"../chunks/DHveY-33.js";import{b as F}from"../chunks/r0Q9cRdY.js";import{p as _}from"../chunks/D9Rqb9Mt.js";import{g as za}from"../chunks/Q4kBbe0I.js";import{d as U,e as $a,f as Ba,h as Fa}from"../chunks/CNXCd5Iu.js";import{E as ta}from"../chunks/BBsxQJkH.js";import{B as Pa}from"../chunks/DyFv1nTa.js";import{I as ra}from"../chunks/kG8_CVj1.js";import{R as x}from"../chunks/BTBztaWc.js";function Sa(P,q){o(q,!1)}async function oa(P,q,i,m,d,b,f,u,y){if(!(e(q).length>0)){if(e(i)!==(await U).username&&await $a(e(i))){o(m,!0);return}await Ba({displayName:e(d),bio:e(b),username:e(i),pronouns:e(f),picture:e(u),banner:e(y)}),await za("/profile"),location.reload()}}var Ea=v('<label for="set-banner" class="banner svelte-2ma0sq"><div class="overlay svelte-2ma0sq"></div> <!></label>'),Na=v('<label for="set-profile-picture" class="profile-picture svelte-2ma0sq"><div class="overlay svelte-2ma0sq"></div> <!></label>'),Ra=v('<span class="error svelte-2ma0sq"> </span>'),Da=v('<span class="error svelte-2ma0sq">Username already taken</span>'),Ta=v('<span class="badge-line svelte-2ma0sq">Show developer badge <!></span>'),ja=v('<span class="badge-line svelte-2ma0sq">Show moderator badge <!></span>'),La=v('<span class="badge-line svelte-2ma0sq">Show moderator badge <!></span>'),Ua=v('<!> <!> <div class="profile svelte-2ma0sq"><div><!> <!> <button class="save svelte-2ma0sq">Save</button></div> <label for="display-name" class="svelte-2ma0sq">Display Name</label> <input enterkeyhint="done" type="text" id="display-name" class="svelte-2ma0sq"> <label for="username" class="svelte-2ma0sq">Username</label> <div class="username svelte-2ma0sq"><span class="at svelte-2ma0sq">@</span> <input type="text" id="username" enterkeyhint="done" class="svelte-2ma0sq"></div> <!> <!> <hr class="svelte-2ma0sq"> <label for="pronouns" class="svelte-2ma0sq">Pronouns</label> <input enterkeyhint="done" type="text" id="pronouns" class="svelte-2ma0sq"> <span class="radio-input svelte-2ma0sq"><label for="display-pronouns" class="svelte-2ma0sq">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-2ma0sq"><label for="display-post-pronouns" class="svelte-2ma0sq">Display pronouns on your posts</label> <!></span> <hr class="svelte-2ma0sq"> <label for="bio" class="svelte-2ma0sq">Bio</label> <textarea enterkeyhint="done" class="bio svelte-2ma0sq" id="bio"></textarea> <hr class="svelte-2ma0sq"> <h2 class="svelte-2ma0sq">Badges</h2> <!> <!> <!></div>',1),Aa=v('<!> <!> <button class="save-bottom svelte-2ma0sq">Save</button>',1);function oe(P,q){ba(q,!0),U.then(c=>{o(i,_(c.displayName)),o(d,_(c.username)),o(b,_(c.bio)),o(f,_(c.pronouns)),o(u,_(c.picture)),o(m,_(c.banner))});let i=g(""),m=g(""),d=g(""),b=g(""),f=g(""),u=g(""),y=ga(()=>Fa(e(d))),A,h=g(!1);ha(P,{type:"profile",children:(c,Ga)=>{var G=Aa(),H=ea(G);Pa(H,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var J=s(H,2);T(J,()=>U,null,(na,w)=>{var K=Ua(),M=ea(K);T(M,()=>sa(e(m)),null,(a,t)=>{var r=Ea(),k=s(l(r),2);ta(k,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),n(r),$(()=>j(r,"background-image",`url('${e(t)??""}')`)),p(a,r)});var O=s(M,2);ra(O,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return e(m)},set imageId(a){o(m,_(a))}});var Q=s(O,2),S=l(Q),V=l(S);T(V,()=>sa(e(u)),null,(a,t)=>{var r=Na(),k=s(l(r),2);ta(k,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),n(r),$(()=>j(r,"background-image",`url('${e(t)??""}')`)),p(a,r)});var W=s(V,2);ra(W,{id:"set-profile-picture",aspectRatio:1/1,get imageId(){return e(u)},set imageId(a){o(u,_(a))}});var ia=s(W,2);ia.__click=[oa,y,d,h,i,b,f,u,m],n(S);var E=s(S,4);L(E);var I=s(E,4),C=s(l(I),2);L(C),C.__input=[Sa,h],ya(C,a=>A=a,()=>A),n(I);var X=s(I,2);ka(X,17,()=>e(y),xa,(a,t)=>{var r=Ra(),k=l(r,!0);n(r),$(()=>qa(k,e(t))),p(a,r)});var Y=s(X,2);{var pa=a=>{var t=Da();p(a,t)};B(Y,a=>{e(h)&&a(pa)})}var N=s(Y,6);L(N);var R=s(N,2),va=s(l(R),2);x(va,{id:"display-pronouns",size:.7}),n(R);var D=s(R,2),ma=s(l(D),2);x(ma,{id:"display-post-pronouns",size:.7}),n(D);var z=s(D,6);Ca(z);var Z=s(z,6);{var da=a=>{var t=Ta(),r=s(l(t));x(r,{size:.6}),n(t),p(a,t)};B(Z,a=>{e(w).tags.includes("dev")&&a(da)})}var aa=s(Z,2);{var ua=a=>{var t=ja(),r=s(l(t));x(r,{size:.6}),n(t),p(a,t)};B(aa,a=>{e(w).tags.includes("mod")&&a(ua)})}var ca=s(aa,2);{var _a=a=>{var t=La(),r=s(l(t));x(r,{size:.6}),n(t),p(a,t)};B(ca,a=>{e(w).tags.includes("developer")&&a(_a)})}n(Q),$(()=>{j(I,"outline",e(h)||e(y).length>0?"2px solid indianred":"none"),wa(z,`				${e(w).bio??""}
			`)}),F(E,()=>e(i),a=>o(i,a)),F(C,()=>e(d),a=>o(d,a)),F(N,()=>e(f),a=>o(f,a)),F(z,()=>e(b),a=>o(b,a)),p(na,K)});var la=s(J,2);la.__click=[oa,y,d,h,i,b,f,u,m],p(c,G)},$$slots:{default:!0}}),fa()}Ia(["click","input"]);export{oe as component};
