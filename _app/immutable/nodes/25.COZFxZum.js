import"../chunks/Bg9kRutz.js";import{p as We,w as l,a7 as I,a as je,f as ce,s as t,t as C,y as a,a8 as Q,c as o,r as n}from"../chunks/BaZyK-JQ.js";import{s as be,i as $}from"../chunks/DBYv9uc3.js";import{P as qe,a as V,g as we,s as R,W as Ge}from"../chunks/CRH4nDS7.js";import{e as he,i as fe}from"../chunks/CN4MRzID.js";import{a as m,t as _}from"../chunks/Dd2BwSaU.js";import{r as X,b as He}from"../chunks/D230ZY73.js";import{d as Je,r as Ke}from"../chunks/BuFl6vNe.js";import{b as L}from"../chunks/2_PfXxFa.js";import{p}from"../chunks/COAggT6D.js";import{g as Qe}from"../chunks/eNrUhY2c.js";import{h as Y,i as Ve,j as B,k as Xe}from"../chunks/C5TKFuMC.js";import{A as Ye}from"../chunks/CwCQTCoW.js";import{D as Ze}from"../chunks/qs5IFBRV.js";import{E as ye,S as Ue}from"../chunks/BLPohxHd.js";import{B as ea}from"../chunks/BtFlXRWC.js";import{C as M}from"../chunks/olQrVPkr.js";import{I as xe}from"../chunks/BwPHfDOX.js";import{R as D}from"../chunks/BB0KvO40.js";function aa(T,S){l(S,!1)}async function ke(T,S,v,w,g,c,b,h,z){if(!(a(S).length>0)){if(a(v)!==(await Y).username&&await Ve(a(v))){l(w,!0);return}await B({displayName:a(g),bio:a(c),username:a(v),pronouns:a(b),picture:a(h),banner:a(z)}),await Qe("/profile"),location.reload()}}var ra=_('<label for="set-banner" class="banner svelte-rwgd5e"><div class="overlay svelte-rwgd5e"></div> <!></label>'),ta=_('<label for="set-profile-picture" class="profile-picture svelte-rwgd5e"><div class="overlay svelte-rwgd5e"></div> <!></label>'),sa=_('<span class="error svelte-rwgd5e"> </span>'),oa=_('<span class="error svelte-rwgd5e"> </span>'),na=_('<span class="error svelte-rwgd5e">Username already taken</span>'),la=_('<span class="badge-line svelte-rwgd5e"><div class="developer badge svelte-rwgd5e"><!></div> Show developer badge <!></span>'),ia=_('<span class="badge-line svelte-rwgd5e"><div class="moderator badge svelte-rwgd5e"><!></div> Show moderator badge <!></span>'),da=_('<span class="badge-line svelte-rwgd5e"><div class="author badge svelte-rwgd5e"><!></div> Show author badge <!></span>'),va=_('<span class="badge-line svelte-rwgd5e"><div class="newbie badge svelte-rwgd5e"><!></div> Show newbie badge <!></span>'),pa=_('<!> <!> <div class="profile svelte-rwgd5e"><div><!> <!> <button class="save svelte-rwgd5e">Save</button></div> <label for="display-name" class="svelte-rwgd5e">Display Name</label> <div class="text-container svelte-rwgd5e"><input maxlength="20" enterkeyhint="done" type="text" id="display-name" class="svelte-rwgd5e"> <!></div> <!> <label for="username" class="svelte-rwgd5e">Username</label> <div class="username svelte-rwgd5e"><span class="at svelte-rwgd5e">@</span> <input maxlength="20" type="text" id="username" enterkeyhint="done" class="svelte-rwgd5e"> <!></div> <!> <!> <hr class="svelte-rwgd5e"> <label for="pronouns" class="svelte-rwgd5e">Pronouns</label> <div class="text-container svelte-rwgd5e"><input maxlength="20" enterkeyhint="done" type="text" id="pronouns" class="svelte-rwgd5e"> <!></div> <span class="radio-input svelte-rwgd5e"><label for="display-pronouns" class="svelte-rwgd5e">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-rwgd5e"><label for="display-post-pronouns" class="svelte-rwgd5e">Display pronouns on your posts</label> <!></span> <hr class="svelte-rwgd5e"> <label for="bio" class="svelte-rwgd5e">Bio</label> <div class="svelte-rwgd5e"><textarea maxlength="144" enterkeyhint="done" class="bio svelte-rwgd5e" id="bio"></textarea> <!></div> <hr class="svelte-rwgd5e"> <span class="badge-title svelte-rwgd5e">Badges</span> <!> <!> <!> <!></div>',1),ga=_('<!> <!> <button class="save bottom svelte-rwgd5e">Save</button>',1);function Ea(T,S){We(S,!0),Y.then(f=>{l(v,p(f.displayName)),l(g,p(f.username)),l(c,p(f.bio)),l(b,p(f.pronouns)),l(h,p(f.picture)),l(w,p(f.banner))});let v=I(""),w=I(""),g=I(""),c=I(""),b=I(""),h=I(""),z=Q(()=>[...a(v)?[]:["Display name can't be empty"]]),N=Q(()=>[...Xe(a(g)),...a(g)?[]:["Username can't be empty"]]),P=I(!1),Z=Q(()=>a(z).length===0&&a(N).length===0&&!a(P));qe(T,{type:"profile",children:(f,ua)=>{var U=ga(),ee=ce(U);ea(ee,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var ae=t(ee,2);V(ae,()=>Y,null,(Ie,u)=>{var te=pa(),se=ce(te);V(se,()=>we(a(w)),null,(e,s)=>{var r=ra(),i=t(o(r),2);ye(i,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),n(r),C(()=>R(r,"background-image",`url('${a(s)??""}')`)),m(e,r)});var oe=t(se,2);xe(oe,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return a(w)},set imageId(e){l(w,p(e))}});var ne=t(oe,2),W=o(ne),le=o(W);V(le,()=>we(a(h)),null,(e,s)=>{var r=ta(),i=t(o(r),2);ye(i,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),n(r),C(()=>R(r,"background-image",`url('${a(s)??""}')`)),m(e,r)});var ie=t(le,2);xe(ie,{id:"set-profile-picture",aspectRatio:1/1,circular:!0,get imageId(){return a(h)},set imageId(e){l(h,p(e))}});var de=t(ie,2);de.__click=[ke,N,g,P,v,c,b,h,w],n(W);var j=t(W,4),E=o(j);X(E);var Be=t(E,2);M(Be,{padding:"0.31rem",limit:20,get text(){return a(v)},set text(e){l(v,p(e))}}),n(j);var ve=t(j,2);he(ve,17,()=>a(z),fe,(e,s)=>{var r=sa(),i=o(r,!0);n(r),C(()=>be(i,a(s))),m(e,r)});var F=t(ve,4),A=t(o(F),2);X(A),A.__input=[aa,P];var Pe=t(A,2);M(Pe,{padding:"0.31rem",limit:20,get text(){return a(g)},set text(e){l(g,p(e))}}),n(F);var pe=t(F,2);he(pe,17,()=>a(N),fe,(e,s)=>{var r=oa(),i=o(r,!0);n(r),C(()=>be(i,a(s))),m(e,r)});var ge=t(pe,2);{var Ce=e=>{var s=na();m(e,s)};$(ge,e=>{a(P)&&e(Ce)})}var q=t(ge,6),G=o(q);X(G);var De=t(G,2);M(De,{padding:"0.31rem",limit:20,get text(){return a(b)},set text(e){l(b,p(e))}}),n(q);var H=t(q,2),Se=t(o(H),2),ze=()=>a(u).showPronounsOnProfile,Ne=e=>B({showPronounsOnProfile:e});D(Se,{id:"display-pronouns",size:.6,get value(){return ze()},set value(e){Ne(e)}}),n(H);var J=t(H,2),$e=t(o(J),2),Ee=()=>a(u).showPronounsOnPosts,Fe=e=>B({showPronounsOnPosts:e});D($e,{id:"display-post-pronouns",size:.6,get value(){return Ee()},set value(e){Fe(e)}}),n(J);var K=t(J,6),O=o(K);Ke(O);var Ae=t(O,2);M(Ae,{limit:144,get text(){return a(c)},set text(e){l(c,p(e))}}),n(K);var ue=t(K,6);{var Oe=e=>{var s=la(),r=o(s),i=o(r);Ze(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(r);var y=t(r,2),x=()=>a(u).showDeveloperBadge,k=d=>B({showDeveloperBadge:d});D(y,{size:.6,get value(){return x()},set value(d){k(d)}}),n(s),m(e,s)};$(ue,e=>{a(u).tags.includes("dev")&&e(Oe)})}var me=t(ue,2);{var Re=e=>{var s=ia(),r=o(s),i=o(r);Ge(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(r);var y=t(r,2),x=()=>a(u).showModeratorBadge,k=d=>B({showModeratorBadge:d});D(y,{size:.6,get value(){return x()},set value(d){k(d)}}),n(s),m(e,s)};$(me,e=>{a(u).tags.includes("mod")&&e(Re)})}var _e=t(me,2);{var Le=e=>{var s=da(),r=o(s),i=o(r);Ye(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(r);var y=t(r,2),x=()=>a(u).showAuthorBadge,k=d=>B({showAuthorBadge:d});D(y,{size:.6,get value(){return x()},set value(d){k(d)}}),n(s),m(e,s)};$(_e,e=>{a(u).tags.includes("author")&&e(Le)})}var Me=t(_e,2);{var Te=e=>{var s=va(),r=o(s),i=o(r);Ue(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(r);var y=t(r,2),x=()=>a(u).showNewbieBadge,k=d=>B({showNewbieBadge:d});D(y,{size:.6,get value(){return x()},set value(d){k(d)}}),n(s),m(e,s)};$(Me,e=>{Date.now()-a(u).birthmoment<1e3*60*60*24*7&&e(Te)})}n(ne),C(()=>{de.disabled=!a(Z),R(E,"outline",a(z).length>0?"2px solid var(--red)":"none"),R(F,"outline",a(P)||a(N).length>0?"2px solid var(--red)":"none"),He(O,`					${a(u).bio??""}
				`)}),L(E,()=>a(v),e=>l(v,e)),L(A,()=>a(g),e=>l(g,e)),L(G,()=>a(b),e=>l(b,e)),L(O,()=>a(c),e=>l(c,e)),m(Ie,te)});var re=t(ae,2);re.__click=[ke,N,g,P,v,c,b,h,w],C(()=>re.disabled=!a(Z)),m(f,U)},$$slots:{default:!0}}),je()}Je(["click","input"]);export{Ea as component};
