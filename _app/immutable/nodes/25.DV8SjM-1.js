import"../chunks/Bg9kRutz.js";import{c as _,r as c,p as Ve,ab as T,a as Ye,g as e,v as S,f as d,s as i,t as ve,k as K}from"../chunks/C62SPajG.js";import{i as k,s as ye}from"../chunks/BbJ7nyNa.js";import{P as qe,S as ze,a as z,g as De,b as Ge}from"../chunks/D9igWbRp.js";import{e as le,i as ce}from"../chunks/EPkomH51.js";import{a as s,t,c as w}from"../chunks/Bqi7JOxH.js";import{r as He,s as ie,c as Q}from"../chunks/BqKKz4p4.js";import{s as X}from"../chunks/CrE22pqL.js";import{d as Je,e as Ke}from"../chunks/Bu0Zqk6q.js";import{b as Qe}from"../chunks/Bhk5afer.js";import{p as y}from"../chunks/B65nbPqP.js";import{o as Xe}from"../chunks/Dxq3VFhd.js";import{g as ge}from"../chunks/BA5qhnwX.js";import{u as be,v as Ze,w as $e,x as es}from"../chunks/DV3XZOMr.js";import"../chunks/69_IOA4Y.js";import{W as Pe}from"../chunks/ymhjn565.js";import{A as ss,B as as}from"../chunks/LVj815OY.js";import{U as rs}from"../chunks/C96O5gBB.js";var ts=t('<div class="svelte-162e39x"><!></div>');function we(j){var g=ts(),P=_(g);Pe(P,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),c(g),s(j,g)}function os(j,g,P){j.key==="Enter"?g():(e(P)&&clearTimeout(e(P)),S(P,y(setTimeout(g,3e3))))}var vs=(j,g)=>e(g).show(),ls=t('<img alt="Your profile" class="profile-link svelte-ykecch">'),cs=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Search for a post</h1> <p class="svelte-ykecch">Enter your search term to find relevant posts.</p></div>'),is=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">No posts found</h1> <p class="svelte-ykecch">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),ns=t("<!> <!>",1),hs=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Loading posts...</h1> <p class="svelte-ykecch">We promise Wallflower will be faster soon.</p> <!></div>'),ds=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Search for a book</h1> <p class="svelte-ykecch">Enter your search term to find relevant books.</p></div>'),_s=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">No books found</h1> <p class="svelte-ykecch">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),ps=t('<div class="loading-cover svelte-ykecch"></div>'),fs=t('<a class="book svelte-ykecch"><div class="book-info svelte-ykecch"><h1 class="svelte-ykecch"> </h1> <h2 class="svelte-ykecch"> </h2></div> <!></a>'),us=t('<div class="book svelte-ykecch"><div class="book-info svelte-ykecch"><div class="loading-title svelte-ykecch"></div> <div class="loading-authors svelte-ykecch"></div></div> <div class="loading-cover svelte-ykecch"></div></div>'),ms=t('<!> <div class="books svelte-ykecch"></div>',1),ks=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Loading books...</h1> <p class="svelte-ykecch">We promise Wallflower will be faster soon.</p> <!></div>'),ys=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Search for a user</h1> <p class="svelte-ykecch">Enter your search term to find relevant users.</p></div>'),gs=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">No users found</h1> <p class="svelte-ykecch">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),bs=t('<!> <div class="people"></div>',1),ws=t('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Loading accounts...</h1> <p class="svelte-ykecch">We promise Wallflower will be faster soon.</p></div>'),Ps=t('<nav class="svelte-ykecch"><div class="banner svelte-ykecch"><button aria-label="Open sidebar" class="svelte-ykecch"><!></button> <button class="svelte-ykecch"><!></button> <a class="search svelte-ykecch" href="/search"><!></a></div></nav> <section class="svelte-ykecch"><input type="text" class="svelte-ykecch"> <div class="views svelte-ykecch"><button>Posts</button> <button>Books</button> <button>Authors</button> <button>Users</button></div></section> <!>',1);function Ys(j,g){Ve(g,!0);let P=T(null),p=T(y(new URLSearchParams(window.location.search).get("view")??"posts")),n=T("");async function D(){e(G)&&clearTimeout(e(G)),S(G,null),S(n,y(e(n).trim()));const E=new URLSearchParams({term:e(n),view:e(p)});ge(`/search?${E}`),e(p)==="posts"?S(ne,y(Ze(e(n)))):e(p)==="books"?S(he,y($e(e(n)))):e(p)==="people"&&S(de,y(es(e(n))))}Xe(()=>{e(n)&&D()});let G=T(null),ne=T(y(Promise.resolve([]))),he=T(y(Promise.resolve([]))),de=T(y(Promise.resolve([])));function H(E){return function(){const Z=new URLSearchParams({view:E});e(n)&&Z.set("term",e(n)),ge(`/search?${Z}`),S(p,y(E)),D()}}qe(j,{type:"search",get sidebar(){return e(P)},set sidebar(E){S(P,y(E))},children:(E,Z)=>{var _e=Ps(),$=d(_e),pe=_($),J=_(pe);J.__click=[vs,P];var xe=_(J);{var Se=a=>{var r=w(),Y=d(r);z(Y,()=>De(be().picture),null,(B,b)=>{var h=ls();ve(()=>ie(h,"src",e(b))),s(B,h)}),s(a,r)},Ee=a=>{Ge(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};k(xe,a=>{be()?a(Se):a(Ee,!1)})}c(J);var ee=i(J,2),Le=_(ee);Pe(Le,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),c(ee);var fe=i(ee,2),We=_(fe);ze(We,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),c(fe),c(pe),c($);var se=i($,2),C=_(se);He(C),C.__keyup=[os,D,G];var ue=i(C,2),ae=_(ue),Ue=K(()=>H("posts"));ae.__click=function(...a){var r;(r=e(Ue))==null||r.apply(this,a)};var re=i(ae,2),Ne=K(()=>H("books"));re.__click=function(...a){var r;(r=e(Ne))==null||r.apply(this,a)};var te=i(re,2),Be=K(()=>H("authors"));te.__click=function(...a){var r;(r=e(Be))==null||r.apply(this,a)};var me=i(te,2),Me=K(()=>H("people"));me.__click=function(...a){var r;(r=e(Me))==null||r.apply(this,a)},c(ue),c(se);var Ae=i(se,2);{var Ie=a=>{var r=w(),Y=d(r);z(Y,()=>e(ne),B=>{var b=hs(),h=i(_(b),4);we(h,{}),c(b),s(B,b)},(B,b)=>{var h=ns(),L=d(h);{var q=o=>{var m=cs();s(o,m)},M=o=>{var m=w(),A=d(m);{var W=x=>{var f=is();s(x,f)};k(A,x=>{e(b).length===0&&x(W)},!0)}s(o,m)};k(L,o=>{e(n)==""?o(q):o(M,!1)})}var u=i(L,2);le(u,17,()=>e(b),ce,(o,m)=>{ss(o,{get post(){return e(m)}})}),s(B,h)}),s(a,r)},Re=a=>{var r=w(),Y=d(r);{var B=h=>{var L=w(),q=d(L);z(q,()=>e(he),M=>{var u=ks(),o=i(_(u),4);we(o,{}),c(u),s(M,u)},(M,u)=>{var o=ms(),m=d(o);{var A=f=>{var U=ds();s(f,U)},W=f=>{var U=w(),F=d(U);{var O=v=>{var l=_s();s(v,l)};k(F,v=>{e(u).length===0&&v(O)},!0)}s(f,U)};k(m,f=>{e(n)==""?f(A):f(W,!1)})}var x=i(m,2);le(x,21,()=>e(u),ce,(f,U)=>{var F=w(),O=d(F);z(O,()=>e(U),v=>{var l=us();s(v,l)},(v,l)=>{var I=fs(),V=_(I),R=_(V),oe=_(R,!0);c(R);var ke=i(R,2),Te=_(ke,!0);c(ke),c(V);var je=i(V,2);{var Ce=N=>{as(N,{get book(){return e(l)},style:"width: 3.5rem; margin-left: auto;"})},Fe=N=>{var Oe=ps();s(N,Oe)};k(je,N=>{e(l).cover?N(Ce):N(Fe,!1)})}c(I),ve(N=>{ie(I,"href",`/book/${e(l).isbn}`),ye(oe,e(l).title),ye(Te,N)},[()=>e(l).authors.join(", ")]),s(v,I)}),s(f,F)}),c(x),s(M,o)}),s(h,L)},b=h=>{var L=w(),q=d(L);{var M=u=>{var o=w(),m=d(o);z(m,()=>e(de),A=>{var W=ws();s(A,W)},(A,W)=>{var x=bs(),f=d(x);{var U=v=>{var l=ys();s(v,l)},F=v=>{var l=w(),I=d(l);{var V=R=>{var oe=gs();s(R,oe)};k(I,R=>{e(W).length===0&&R(V)},!0)}s(v,l)};k(f,v=>{e(n)==""?v(U):v(F,!1)})}var O=i(f,2);le(O,21,()=>e(W),ce,(v,l,I,V)=>{rs(v,{get user(){return e(l)}})}),c(O),s(A,x)}),s(u,o)};k(q,u=>{e(p)==="people"&&u(M)},!0)}s(h,L)};k(Y,h=>{e(p)==="books"?h(B):h(b,!1)},!0)}s(a,r)};k(Ae,a=>{e(p)==="posts"?a(Ie):a(Re,!1)})}ve(()=>{ie(C,"placeholder",{books:"Enter a title or ISBN",posts:"Enter some keywords",authors:"Enter an author's name",people:"Enter a username"}[e(p)]),X(ae,Q(e(p)==="posts"?"selected":""),"svelte-ykecch"),X(re,Q(e(p)==="books"?"selected":""),"svelte-ykecch"),X(te,Q(e(p)==="authors"?"selected":""),"svelte-ykecch"),X(me,Q(e(p)==="people"?"selected":""),"svelte-ykecch")}),Ke("blur",C,D),Qe(C,()=>e(n),a=>S(n,a)),s(E,_e)},$$slots:{default:!0}}),Ye()}Je(["click","keyup"]);export{Ys as component};
