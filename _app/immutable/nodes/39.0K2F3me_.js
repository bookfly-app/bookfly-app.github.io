import"../chunks/Bzak7iHL.js";import{o as Ce,s as ae}from"../chunks/DGkc4AeD.js";import{a6 as r,e as g,r as f,a as s,p as Ie,a9 as T,aa as $,g as Ve,f as l,d as _,j as e,ab as oe,t as ve,ac as S,c as m}from"../chunks/DhKu0NfF.js";import{P as De,a as G}from"../chunks/C3fmunYh.js";import{i as p}from"../chunks/DZzuPxtn.js";import{e as le,i as ie}from"../chunks/B8n4LtgD.js";import{r as Fe,s as ne,c as de,d as ce}from"../chunks/COSmXfxt.js";import{d as Ge,e as Je}from"../chunks/DGKU-49f.js";import{b as Ke}from"../chunks/CmLPpUp4.js";import{g as Ee}from"../chunks/DYRjaXfz.js";import{z as Oe,v as Qe,A as Xe}from"../chunks/D8MsmRYf.js";import"../chunks/69_IOA4Y.js";import{W as Ye}from"../chunks/BA256Ejd.js";import{A as Ze}from"../chunks/DM3YIN9t.js";import{U as $e}from"../chunks/D7JxuAG-.js";import{B as es}from"../chunks/DIYIZufq.js";import{H as ss}from"../chunks/D4sAquPP.js";import{s as rs}from"../chunks/ng_d8kR5.js";var ts=r('<div class="svelte-162e39x"><!></div>');function Le(J){var E=ts(),L=g(E);Ye(L,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),f(E),s(J,E)}function as(J,E,L){J.key==="Enter"?E():(e(L)&&clearTimeout(e(L)),S(L,setTimeout(E,3e3),!0))}var os=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Search for a post</h1> <p class="svelte-rqts38">Enter your search term to find relevant posts.</p></div>'),vs=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">No posts found</h1> <p class="svelte-rqts38">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),ls=r("<!> <!>",1),is=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Loading posts...</h1> <p class="svelte-rqts38">We promise Wallflower will be faster soon.</p> <!></div>'),ns=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Search for a book</h1> <p class="svelte-rqts38">Enter your search term to find relevant books.</p></div>'),ds=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">No books found</h1> <p class="svelte-rqts38">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),cs=r('<div class="loading-cover svelte-rqts38"></div>'),_s=r('<a class="book svelte-rqts38"><div class="book-info svelte-rqts38"><h1 class="svelte-rqts38"> </h1> <h2 class="svelte-rqts38"> </h2></div> <!></a>'),fs=r('<div class="book svelte-rqts38"><div class="book-info svelte-rqts38"><div class="loading-title svelte-rqts38"></div> <div class="loading-authors svelte-rqts38"></div></div> <div class="loading-cover svelte-rqts38"></div></div>'),us=r('<!> <div class="books svelte-rqts38"></div>',1),hs=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Loading books...</h1> <p class="svelte-rqts38">We promise Wallflower will be faster soon.</p> <!></div>'),ps=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Search for an author</h1> <p class="svelte-rqts38">Enter your search term to find relevant authors.</p></div>'),ms=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">No users found</h1> <p class="svelte-rqts38">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),gs=r('<img class="author-image svelte-rqts38"/>'),qs=r('<div class="loading-cover svelte-rqts38"></div>'),bs=r('<a class="book svelte-rqts38"><div class="author-info svelte-rqts38"><h1 class="svelte-rqts38"> </h1> <h2 class="svelte-rqts38"> </h2></div> <!></a>'),ks=r('<!> <div class="authors"></div>',1),ys=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Loading authors...</h1> <p class="svelte-rqts38">We promise Wallflower will be faster soon.</p></div>'),ws=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Search for a user</h1> <p class="svelte-rqts38">Enter your search term to find relevant users.</p></div>'),Ps=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">No users found</h1> <p class="svelte-rqts38">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),xs=r('<!> <div class="people"></div>',1),Ss=r('<div class="loading svelte-rqts38"><h1 class="svelte-rqts38">Loading accounts...</h1> <p class="svelte-rqts38">We promise Wallflower will be faster soon.</p></div>'),Ws=r('<!> <section class="svelte-rqts38"><input type="text" enterkeyhint="search" class="svelte-rqts38"/> <div class="views svelte-rqts38"><button>Posts</button> <button>Books</button> <button>Authors</button> <button>Users</button></div></section> <!>',1);function Js(J,E){Ie(E,!0);let L=T(null),u=T($(new URLSearchParams(window.location.search).get("view")??"posts")),d=T("");async function ee(){e(se)&&clearTimeout(e(se)),S(se,null),S(d,e(d).trim(),!0);const N=new URLSearchParams({term:e(d),view:e(u)});Ee(`/search?${N}`),e(u)==="posts"?S(be,Oe(e(d)),!0):e(u)==="books"?S(ke,Qe(e(d)),!0):e(u)==="authors"?S(ye,rs(e(d)),!0):e(u)==="people"&&S(we,Xe(e(d)),!0)}Ce(()=>{e(d)&&ee()});let se=T(null),be=T($(Promise.resolve([]))),ke=T($(Promise.resolve([]))),ye=T($(Promise.resolve([]))),we=T($(Promise.resolve([])));function re(N){return function(){const _e=new URLSearchParams({view:N});e(d)&&_e.set("term",e(d)),Ee(`/search?${_e}`),S(u,N,!0),ee()}}De(J,{type:"search",get sidebar(){return e(L)},set sidebar(N){S(L,N,!0)},children:(N,_e)=>{var Pe=Ws(),xe=l(Pe);ss(xe,{title:"Search"});var fe=_(xe,2),V=g(fe);Fe(V),V.__keyup=[as,ee,se];var Se=_(V,2),ue=g(Se),Ne=oe(()=>re("posts"));ue.__click=function(...c){var i;(i=e(Ne))==null||i.apply(this,c)};var he=_(ue,2),Ue=oe(()=>re("books"));he.__click=function(...c){var i;(i=e(Ue))==null||i.apply(this,c)};var pe=_(he,2),Be=oe(()=>re("authors"));pe.__click=function(...c){var i;(i=e(Be))==null||i.apply(this,c)};var We=_(pe,2),Ae=oe(()=>re("people"));We.__click=function(...c){var i;(i=e(Ae))==null||i.apply(this,c)},f(Se),f(fe);var Me=_(fe,2);{var Re=c=>{var i=m(),me=l(i);G(me,()=>e(be),K=>{var U=is(),b=_(g(U),4);Le(b),f(U),s(K,U)},(K,U)=>{var b=ls(),B=l(b);{var O=t=>{var n=os();s(t,n)},Q=t=>{var n=m(),j=l(n);{var k=v=>{var q=vs();s(v,q)};p(j,v=>{e(U).length===0&&v(k)},!0)}s(t,n)};p(B,t=>{e(d)==""?t(O):t(Q,!1)})}var X=_(B,2);le(X,17,()=>e(U),ie,(t,n)=>{Ze(t,{get post(){return e(n)}})}),s(K,b)}),s(c,i)},Te=c=>{var i=m(),me=l(i);{var K=b=>{var B=m(),O=l(B);{var Q=t=>{var n=ns();s(t,n)},X=t=>{var n=m(),j=l(n);G(j,()=>e(ke),k=>{var v=hs(),q=_(g(v),4);Le(q),f(v),s(k,v)},(k,v)=>{var q=us(),H=l(q);{var z=y=>{var h=ds();s(y,h)};p(H,y=>{e(v).length===0&&y(z)})}var W=_(H,2);le(W,21,()=>e(v),ie,(y,h)=>{var w=m(),A=l(w);G(A,()=>e(h),x=>{var a=fs();s(x,a)},(x,a)=>{var o=_s(),M=g(o),C=g(M),I=g(C,!0);f(C);var R=_(C,2),D=g(R,!0);f(R),f(M);var Y=_(M,2);{var Z=P=>{es(P,{get book(){return e(a)},style:"width: 3.5rem; margin-left: auto;"})},ge=P=>{var qe=cs();s(P,qe)};p(Y,P=>{e(a).cover?P(Z):P(ge,!1)})}f(o),ve(P=>{ne(o,"href",`/book/${e(a).isbn}`),ae(I,e(a).title),ae(D,P)},[()=>e(a).authors.join(", ")]),s(x,o)}),s(y,w)}),f(W),s(k,q)}),s(t,n)};p(O,t=>{e(d)==""?t(Q):t(X,!1)})}s(b,B)},U=b=>{var B=m(),O=l(B);{var Q=t=>{var n=m(),j=l(n);G(j,()=>e(ye),k=>{var v=ys();s(k,v)},(k,v)=>{var q=ks(),H=l(q);{var z=h=>{var w=ps();s(h,w)},W=h=>{var w=m(),A=l(w);{var x=a=>{var o=ms();s(a,o)};p(A,a=>{e(v).length===0&&a(x)},!0)}s(h,w)};p(H,h=>{e(d)==""?h(z):h(W,!1)})}var y=_(H,2);le(y,21,()=>e(v),ie,(h,w)=>{var A=m(),x=l(A);G(x,()=>e(w),null,(a,o)=>{var M=m(),C=l(M);{var I=R=>{var D=bs(),Y=g(D),Z=g(Y),ge=g(Z,!0);f(Z);var P=_(Z,2),qe=g(P);f(P),f(Y);var je=_(Y,2);{var He=F=>{var te=gs();ve(()=>ne(te,"src",e(o).picture)),s(F,te)},ze=F=>{var te=qs();s(F,te)};p(je,F=>{e(o).picture?F(He):F(ze,!1)})}f(D),ve(()=>{ne(D,"href",`/author/${e(o).id}`),ae(ge,e(o).name),ae(qe,`Born ${e(o).birthday??""}`)}),s(R,D)};p(C,R=>{e(o).picture&&R(I)})}s(a,M)}),s(h,A)}),f(y),s(k,q)}),s(t,n)},X=t=>{var n=m(),j=l(n);{var k=v=>{var q=m(),H=l(q);G(H,()=>e(we),z=>{var W=Ss();s(z,W)},(z,W)=>{var y=xs(),h=l(y);{var w=a=>{var o=ws();s(a,o)},A=a=>{var o=m(),M=l(o);{var C=I=>{var R=Ps();s(I,R)};p(M,I=>{e(W).length===0&&I(C)},!0)}s(a,o)};p(h,a=>{e(d)==""?a(w):a(A,!1)})}var x=_(h,2);le(x,21,()=>e(W),ie,(a,o)=>{$e(a,{get user(){return e(o)}})}),f(x),s(z,y)}),s(v,q)};p(j,v=>{e(u)==="people"&&v(k)},!0)}s(t,n)};p(O,t=>{e(u)==="authors"?t(Q):t(X,!1)},!0)}s(b,B)};p(me,b=>{e(u)==="books"?b(K):b(U,!1)},!0)}s(c,i)};p(Me,c=>{e(u)==="posts"?c(Re):c(Te,!1)})}ve(()=>{ne(V,"placeholder",{books:"Enter a title or ISBN",posts:"Enter some keywords",authors:"Enter an author's name",people:"Enter a username"}[e(u)]),de(ue,1,ce(e(u)==="posts"?"selected":""),"svelte-rqts38"),de(he,1,ce(e(u)==="books"?"selected":""),"svelte-rqts38"),de(pe,1,ce(e(u)==="authors"?"selected":""),"svelte-rqts38"),de(We,1,ce(e(u)==="people"?"selected":""),"svelte-rqts38")}),Je("blur",V,ee),Ke(V,()=>e(d),c=>S(d,c)),s(N,Pe)},$$slots:{default:!0}}),Ve()}Ge(["keyup","click"]);export{Js as component};
