import{a as u,n as se,t as G,c as F}from"./cC66xYTD.js";import{v as Z,y as l,z as t,A as r,w as y,x as z,ab as Q,I as a,am as He,ak as Ue,f as A,az as et}from"./BiqahF3i.js";import{s as M}from"./6JthwsWi.js";import{a as xe}from"./Hw8DSSVs.js";import{i as D}from"./DljaikDs.js";import{e as we,i as be}from"./BkIRavrO.js";import{h as tt,S as rt,A as je}from"./B-lBaKya.js";import{s as x,a as ae,t as n,b as c}from"./Da1zoI-q.js";import{d as Oe}from"./DjtZKWoL.js";import{g as Ce}from"./DSBnn1LC.js";import{g as Ee,v as st,w as at,u as K,x as ot,f as Ze,y as ze}from"./C5yAt3nP.js";import{r as oe}from"./BoMl8dWA.js";import{L as lt}from"./D61BllKM.js";import{p as it}from"./C8_CuNPF.js";var nt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function vt(h,s){Z(s,!0);let e=oe(s,["$$slots","$$events","$$legacy"]),d=s.stroke;e={...e},e.stroke=void 0;var v=nt();let p;var f=l(t(v),2),m=t(f);x(m,"stroke",d);var L=l(m);x(L,"stroke",d),r(f),r(v),y(()=>p=ae(v,p,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,v),z()}var dt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ct(h,s){Z(s,!0);let e=oe(s,["$$slots","$$events","$$legacy"]),d=s.stroke;e={...e},e.stroke=void 0;var v=dt();let p;var f=l(t(v),2),m=t(f);x(m,"stroke",d),r(f),r(v),y(()=>p=ae(v,p,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,v),z()}var ut=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function gt(h,s){Z(s,!0);let e=oe(s,["$$slots","$$events","$$legacy"]),d=s.stroke;e={...e},e.stroke=void 0;var v=ut();let p;var f=l(t(v),2),m=t(f);x(m,"stroke",d);var L=l(m);x(L,"stroke",d),r(f),r(v),y(()=>p=ae(v,p,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,v),z()}var pt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function _t(h,s){Z(s,!0);let e=oe(s,["$$slots","$$events","$$legacy"]),d=s.stroke;e={...e},e.stroke=void 0;var v=pt();let p;var f=l(t(v),2),m=t(f);x(m,"stroke",d),r(f),r(v),y(()=>p=ae(v,p,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,v),z()}var ft=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function kt(h,s){Z(s,!0);let e=oe(s,["$$slots","$$events","$$legacy"]),d=s.stroke;e={...e},e.stroke=void 0;var v=ft();let p;var f=l(t(v),2),m=t(f);x(m,"stroke",d),r(f),r(v),y(()=>p=ae(v,p,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,v),z()}var ht=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function mt(h,s){Z(s,!0);let e=oe(s,["$$slots","$$events","$$legacy"]),d=s.stroke;e={...e},e.stroke=void 0;var v=ht();let p;var f=l(t(v),2),m=t(f);x(m,"stroke",d),r(f),r(v),y(()=>p=ae(v,p,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,v),z()}var xt=(h,s)=>Ce(`/profile/${s.user.username}`),wt=G('<span class="svelte-1x69ua7"> </span>'),bt=(h,s)=>{var e;return Ce(`/book/${(e=a(s))==null?void 0:e.isbn}`)},Ct=G('<section class="svelte-1x69ua7"><div class="profile svelte-1x69ua7"><button class="svelte-1x69ua7"></button></div> <div class="wrapper svelte-1x69ua7"><span class="user svelte-1x69ua7"><h2 class="svelte-1x69ua7"> </h2> <h3 class="svelte-1x69ua7"> </h3></span> <div class="outer"><div class="listing svelte-1x69ua7"><div class="book-info svelte-1x69ua7"><h1 class="svelte-1x69ua7"> </h1> <h2 class="svelte-1x69ua7"> </h2> <!> <span class="svelte-1x69ua7"> </span></div> <img class="cover svelte-1x69ua7"></div> <p class="description svelte-1x69ua7"> </p></div></div></section>');function yt(h,s){Z(s,!0);let e=He(null);(async function(){Q(e,it(await Ee(s.isbn)))})();var d=Ct(),v=t(d),p=t(v);p.__click=[xt,s],r(v);var f=l(v,2),m=t(f),L=t(m),T=t(L,!0);r(L);var le=l(L,2),ye=t(le,!0);r(le),r(m);var ce=l(m,2),O=t(ce),W=t(O),j=t(W),Ve=t(j,!0);r(j);var H=l(j,2),X=t(H,!0);r(H);var Y=l(H,2);{var ie=S=>{var R=wt(),q=t(R);r(R),y(ve=>{var ee;c(R,"color",ve),M(q,`${((ee=a(e))==null?void 0:ee.pageCount)??""} pages`)},[()=>n().text]),u(S,R)};D(Y,S=>{var R;(R=a(e))!=null&&R.pageCount&&S(ie)})}var N=l(Y,2),Me=t(N,!0);r(N),r(W);var E=l(W,2);E.__click=[bt,e],r(O);var ne=l(O,2),ue=t(ne,!0);r(ne),r(ce),r(f),r(d),y((S,R,q,ve,ee)=>{var ge,pe,_e;c(p,"background-image",`url("${s.user.picture}")`),c(L,"color",S),M(T,s.user.displayName),c(le,"color",R),M(ye,`@${s.user.username}`),c(j,"color",q),M(Ve,(ge=a(e))==null?void 0:ge.title),c(H,"color",R),M(X,ve),c(N,"color",q),M(Me,ee),x(E,"src",(pe=a(e))==null?void 0:pe.cover),c(ne,"color",q),M(ue,(_e=a(e))==null?void 0:_e.description)},[()=>n().textBright,()=>n().textDim,()=>n().text,()=>{var S;return(S=a(e))==null?void 0:S.authors.join(", ")},()=>{var S;return[...((S=a(e))==null?void 0:S.genres)??[]].splice(0,2).join(", ")}]),u(h,d),z()}Oe(["click"]);var Vt=()=>Ce("/"),Mt=G('<span class="dev svelte-dsdrl">Dev</span>'),St=G('<span class="author svelte-dsdrl">Author</span>'),Rt=G('<span class="mod svelte-dsdrl">Moderator</span>'),$t=()=>Ce("/profile/edit"),Dt=G('<button class="edit-profile svelte-dsdrl">Edit Profile</button>'),Gt=G('<div class="profile-actions svelte-dsdrl"><button class="profile-action-follow svelte-dsdrl"><!></button> <button class="profile-action svelte-dsdrl"><!></button></div>'),Bt=G('<a><!> <span class="truncate svelte-dsdrl"> </span></a>'),Lt=G('<a><!> <span class="truncate svelte-dsdrl"> </span></a>'),jt=G('<span class="svelte-dsdrl"><!> <span> </span></span>'),Ht=(h,s)=>Q(s,"all"),It=(h,s)=>Q(s,"discussion"),Ft=(h,s)=>Q(s,"ratings"),At=(h,s)=>Q(s,"list"),Nt=G('<div class="ratings svelte-dsdrl"><span class="rating-sort svelte-dsdrl"><!> Best</span> <!></div>'),Pt=G('<section class="svelte-dsdrl"><div class="banner svelte-dsdrl"></div> <button class="back-arrow svelte-dsdrl"><!></button> <div class="profile svelte-dsdrl"><img class="profile-picture svelte-dsdrl"> <div class="profile-line-1 svelte-dsdrl"><span class="name svelte-dsdrl"><h1 class="svelte-dsdrl"> </h1> <h2 class="svelte-dsdrl"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-dsdrl"><!></p> <div class="profile-line-2 svelte-dsdrl"><!> <!> <!></div> <a class="follows svelte-dsdrl"><span> </span> <span> </span></a> <div class="views svelte-dsdrl"><button class="svelte-dsdrl">All</button> <button class="svelte-dsdrl">Discussion</button> <button class="svelte-dsdrl">Reviews</button> <button class="svelte-dsdrl">Reading List</button></div></div> <!></section>');function tr(h,s){Z(s,!0);let e=s.user,d=He("all"),v=st(e),p=at(e),f=Ue(()=>{var o;return((o=K())==null?void 0:o.id)===e.id}),m=e.currentBook?Ee(e.currentBook):Promise.resolve(null),L=p.then(o=>o.filter(i=>i.type==="rating").length),T=He(null),le=Ue(()=>{var o;return a(T)||(((o=K())==null?void 0:o.following.some(i=>i===e.id))??!1)&&a(T)===null});function ye(){Q(T,!0),Ze({following:[...new Set([...K().following,e.id])]}),ze(e,{followers:[...new Set([...e.followers,K().id])]})}function ce(){Q(T,!1),Ze({following:K().following.filter(o=>o!==e.id)}),ze(e,{followers:e.followers.filter(o=>o!==K().id)})}var O=Pt(),W=t(O),j=l(W,2);j.__click=[Vt];var Ve=t(j);lt(Ve,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),r(j);var H=l(j,2),X=t(H),Y=l(X,2),ie=t(Y),N=t(ie),Me=t(N,!0);r(N);var E=l(N,2),ne=t(E);r(E);var ue=l(E,2);{var S=o=>{var i=Mt();u(o,i)};D(ue,o=>{e.tags.includes("dev")&&o(S)})}var R=l(ue,2);{var q=o=>{var i=St();u(o,i)};D(R,o=>{e.tags.includes("author")&&o(q)})}var ve=l(R,2);{var ee=o=>{var i=Rt();u(o,i)};D(ve,o=>{e.tags.includes("mod")&&o(ee)})}r(ie);var ge=l(ie,2);{var pe=o=>{var i=Dt();i.__click=[$t],y((k,V,w)=>{c(i,"color",k),c(i,"background",`linear-gradient(${V??""}, ${w??""})`)},[()=>n().background,()=>n().accent,()=>n().accent2]),u(o,i)},_e=o=>{var i=Gt(),k=t(i),V=t(k);{var w=_=>{gt(_,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:ce})},b=_=>{vt(_,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:ye})};D(V,_=>{a(le)?_(w):_(b,!1)})}r(k);var g=l(k,2),C=t(g);kt(C,{get stroke(){return n().textDull},style:"width: 1rem;"}),r(g),r(i),y(_=>{c(k,"border-color",_),c(g,"border-color",_)},[()=>n().textDull]),u(o,i)};D(ge,o=>{a(f)?o(pe):o(_e,!1)})}r(Y);var fe=l(Y,2),qe=t(fe);tt(qe,()=>ot(e.bio)),r(fe);var Se=l(fe,2),Ie=t(Se);xe(Ie,()=>v,null,(o,i)=>{var k=F(),V=A(k);{var w=b=>{var g=Bt(),C=t(g);rt(C,{get stroke(){return n().textDull},style:"width: 1rem; height: 1rem;"});var _=l(C,2),B=t(_,!0);r(_),r(g),y(I=>{x(g,"href",`/book/${a(i).isbn}`),x(g,"title",`${e.displayName}'s highest rated book is ${a(i).title}`),c(_,"color",I),M(B,a(i).title)},[()=>n().textDull]),u(b,g)};D(V,b=>{a(i)&&b(w)})}u(o,k)});var Fe=l(Ie,2);xe(Fe,()=>m,null,(o,i)=>{var k=F(),V=A(k);{var w=b=>{var g=Lt(),C=t(g);_t(C,{get stroke(){return n().textDull},style:"width: 1rem; height: 1rem;"});var _=l(C,2),B=t(_,!0);r(_),r(g),y(I=>{x(g,"href",`/book/${a(i).isbn??""}`),x(g,"title",`${e.displayName} is currently reading ${a(i)}`),c(_,"color",I),M(B,a(i).title)},[()=>n().textDull]),u(b,g)};D(V,b=>{a(i)&&b(w)})}u(o,k)});var Je=l(Fe,2);xe(Je,()=>L,null,(o,i)=>{var k=jt(),V=t(k);ct(V,{get stroke(){return n().textDull},style:"width: 1.25rem; height: 1.25rem;"});var w=l(V,2),b=t(w,!0);r(w),r(k),y(g=>{x(k,"title",`${e.displayName??""} has read $${a(i)??""} book${(a(i)===1?"":"s")??""}`),c(w,"color",g),M(b,a(i))},[()=>n().textDull]),u(o,k)}),r(Se);var te=l(Se,2),Re=t(te),Ke=t(Re);r(Re);var Ae=l(Re,2),Qe=t(Ae);r(Ae),r(te);var Ne=l(te,2),ke=t(Ne);ke.__click=[Ht,d];var he=l(ke,2);he.__click=[It,d];var me=l(he,2);me.__click=[Ft,d];var $e=l(me,2);$e.__click=[At,d],r(Ne),r(H);var Te=l(H,2);xe(Te,()=>p,null,(o,i)=>{var k=F(),V=A(k);{var w=g=>{var C=F(),_=A(C);we(_,17,()=>a(i).filter(B=>B.type==="general"),be,(B,I)=>{je(B,{get post(){return a(I)}})}),u(g,C)},b=g=>{var C=F(),_=A(C);{var B=P=>{var U=Nt(),re=t(U),De=t(re);mt(De,{get stroke(){return n().text},style:"width: 1.75rem; height: 1.75rem;"}),et(),r(re);var Ge=l(re,2);we(Ge,17,()=>a(i).filter($=>$.type==="rating"),be,($,J)=>{je($,{get post(){return a(J)}})}),r(U),y($=>c(re,"color",$),[()=>n().text]),u(P,U)},I=P=>{var U=F(),re=A(U);{var De=$=>{var J=F(),Be=A(J);we(Be,17,()=>e.readingList,be,(Le,de)=>{yt(Le,{get isbn(){return a(de)},user:K})}),u($,J)},Ge=$=>{var J=F(),Be=A(J);{var Le=de=>{var Pe=F(),We=A(Pe);we(We,17,()=>a(i),be,(Xe,Ye)=>{je(Xe,{get post(){return a(Ye)}})}),u(de,Pe)};D(Be,de=>{a(d)==="all"&&de(Le)},!0)}u($,J)};D(re,$=>{a(d)==="list"?$(De):$(Ge,!1)},!0)}u(P,U)};D(_,P=>{a(d)==="ratings"?P(B):P(I,!1)},!0)}u(g,C)};D(V,g=>{a(d)==="discussion"?g(w):g(b,!1)})}u(o,k)}),r(O),y((o,i,k,V,w,b,g,C,_,B,I,P,U)=>{c(W,"background-image",`url("${e.banner}")`),c(H,"background",o),x(X,"src",e.picture),x(X,"alt",`${e.displayName} profile picture`),c(X,"border-color",o),c(N,"color",i),M(Me,e.displayName),c(E,"color",k),M(ne,`@${e.username??""}`),c(fe,"color",V),x(te,"href",`/profile/${e.username}/follows`),c(te,"border-color",w),c(te,"color",w),M(Ke,`${e.followers.length??""} Followers`),M(Qe,`${e.following.length??""} Following`),c(ke,"color",b),c(ke,"border-bottom",g),c(he,"color",C),c(he,"border-bottom",_),c(me,"color",B),c(me,"border-bottom",I),c($e,"color",P),c($e,"border-bottom",U)},[()=>n().backgroundDark,()=>n().textBright,()=>n().textDim,()=>n().text,()=>n().textDull,()=>a(d)==="all"?n().text:n().textDim,()=>a(d)==="all"?`3px solid ${n().accent}`:"3px solid transparent",()=>a(d)==="discussion"?n().text:n().textDim,()=>a(d)==="discussion"?`3px solid ${n().accent}`:"3px solid transparent",()=>a(d)==="ratings"?n().text:n().textDim,()=>a(d)==="ratings"?`3px solid ${n().accent}`:"3px solid transparent",()=>a(d)==="list"?n().text:n().textDim,()=>a(d)==="list"?`3px solid ${n().accent}`:"3px solid transparent"]),u(h,O),z()}Oe(["click"]);export{tr as P};
