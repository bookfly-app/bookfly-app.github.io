import{a as u,n as z,t as D,c as G}from"./cC66xYTD.js";import{v as I,y as n,z as o,A as s,w as V,x as A,I as a,ab as Z,am as $e,ak as Me,f as B,az as Xe}from"./BiqahF3i.js";import{s as F}from"./6JthwsWi.js";import{a as ae}from"./Hw8DSSVs.js";import{i as S}from"./DljaikDs.js";import{e as le,i as ie}from"./BkIRavrO.js";import{h as Ye,S as et,A as ne}from"./wzhGFa3G.js";import{s as w,a as O,t as i,b as g}from"./Da1zoI-q.js";import{d as tt}from"./DjtZKWoL.js";import{g as Re}from"./DZo7HddR.js";import{v as rt,w as ot,g as st,u as U,x as at,f as Se,y as De}from"./C5yAt3nP.js";import{r as E}from"./BoMl8dWA.js";import{L as lt}from"./D61BllKM.js";var it=z('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function nt(m,l){I(l,!0);let e=E(l,["$$slots","$$events","$$legacy"]),v=l.stroke;e={...e},e.stroke=void 0;var d=it();let f;var k=n(o(d),2),b=o(k);w(b,"stroke",v);var q=n(b);w(q,"stroke",v),s(k),s(d),V(()=>f=O(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(m,d),A()}var dt=z('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function vt(m,l){I(l,!0);let e=E(l,["$$slots","$$events","$$legacy"]),v=l.stroke;e={...e},e.stroke=void 0;var d=dt();let f;var k=n(o(d),2),b=o(k);w(b,"stroke",v),s(k),s(d),V(()=>f=O(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(m,d),A()}var ct=z('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ut(m,l){I(l,!0);let e=E(l,["$$slots","$$events","$$legacy"]),v=l.stroke;e={...e},e.stroke=void 0;var d=ct();let f;var k=n(o(d),2),b=o(k);w(b,"stroke",v);var q=n(b);w(q,"stroke",v),s(k),s(d),V(()=>f=O(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(m,d),A()}var gt=z('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function pt(m,l){I(l,!0);let e=E(l,["$$slots","$$events","$$legacy"]),v=l.stroke;e={...e},e.stroke=void 0;var d=gt();let f;var k=n(o(d),2),b=o(k);w(b,"stroke",v),s(k),s(d),V(()=>f=O(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(m,d),A()}var _t=z('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ft(m,l){I(l,!0);let e=E(l,["$$slots","$$events","$$legacy"]),v=l.stroke;e={...e},e.stroke=void 0;var d=_t();let f;var k=n(o(d),2),b=o(k);w(b,"stroke",v),s(k),s(d),V(()=>f=O(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(m,d),A()}var kt=z('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function mt(m,l){I(l,!0);let e=E(l,["$$slots","$$events","$$legacy"]),v=l.stroke;e={...e},e.stroke=void 0;var d=kt();let f;var k=n(o(d),2),b=o(k);w(b,"stroke",v),s(k),s(d),V(()=>f=O(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(m,d),A()}var ht=()=>Re("/"),wt=D('<span class="dev svelte-dsdrl">Dev</span>'),bt=D('<span class="author svelte-dsdrl">Author</span>'),xt=D('<span class="mod svelte-dsdrl">Moderator</span>'),Ct=()=>Re("/profile/edit"),yt=D('<button class="edit-profile svelte-dsdrl">Edit Profile</button>'),Vt=D('<div class="profile-actions svelte-dsdrl"><button class="profile-action-follow svelte-dsdrl"><!></button> <button class="profile-action svelte-dsdrl"><!></button></div>'),$t=D('<a><!> <span class="truncate svelte-dsdrl"> </span></a>'),Mt=D('<a><!> <span class="truncate svelte-dsdrl"> </span></a>'),St=D('<span class="svelte-dsdrl"><!> <span> </span></span>'),Dt=(m,l)=>Z(l,"all"),Rt=(m,l)=>Z(l,"discussion"),Gt=(m,l)=>Z(l,"ratings"),Bt=(m,l)=>Z(l,"activity"),Ht=D('<div class="ratings svelte-dsdrl"><span class="rating-sort svelte-dsdrl"><!> Best</span> <!></div>'),Lt=D('<section class="svelte-dsdrl"><div class="banner svelte-dsdrl"></div> <button class="back-arrow svelte-dsdrl"><!></button> <div class="profile svelte-dsdrl"><img class="profile-picture svelte-dsdrl"> <div class="profile-line-1 svelte-dsdrl"><span class="name svelte-dsdrl"><h1 class="svelte-dsdrl"> </h1> <h2 class="svelte-dsdrl"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-dsdrl"><!></p> <div class="profile-line-2 svelte-dsdrl"><!> <!> <!></div> <a class="follows svelte-dsdrl"><span> </span> <span> </span></a> <div class="views svelte-dsdrl"><button class="svelte-dsdrl">All</button> <button class="svelte-dsdrl">Discussion</button> <button class="svelte-dsdrl">Reviews</button> <button class="svelte-dsdrl">Activity</button></div></div> <!></section>');function Kt(m,l){I(l,!0);let e=l.user,v=$e("all"),d=rt(e),f=ot(e),k=Me(()=>{var t;return((t=U())==null?void 0:t.id)===e.id}),b=e.currentBook?st(e.currentBook):Promise.resolve(null),q=f.then(t=>t.filter(r=>r.type==="rating").length),Q=$e(null),Ge=Me(()=>{var t;return a(Q)||(((t=U())==null?void 0:t.following.some(r=>r===e.id))??!1)&&a(Q)===null});function Be(){Z(Q,!0),Se({following:[...new Set([...U().following,e.id])]}),De(e,{followers:[...new Set([...e.followers,U().id])]})}function He(){Z(Q,!1),Se({following:U().following.filter(t=>t!==e.id)}),De(e,{followers:e.followers.filter(t=>t!==U().id)})}var de=Lt(),me=o(de),T=n(me,2);T.__click=[ht];var Le=o(T);lt(Le,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),s(T);var W=n(T,2),X=o(W),ve=n(X,2),ce=o(ve),Y=o(ce),je=o(Y,!0);s(Y);var ee=n(Y,2),Fe=o(ee);s(ee);var he=n(ee,2);{var Ie=t=>{var r=wt();u(t,r)};S(he,t=>{e.tags.includes("dev")&&t(Ie)})}var we=n(he,2);{var Ae=t=>{var r=bt();u(t,r)};S(we,t=>{e.tags.includes("author")&&t(Ae)})}var Pe=n(we,2);{var Ne=t=>{var r=xt();u(t,r)};S(Pe,t=>{e.tags.includes("mod")&&t(Ne)})}s(ce);var Ue=n(ce,2);{var Ze=t=>{var r=yt();r.__click=[Ct],V((_,y,h)=>{g(r,"color",_),g(r,"background",`linear-gradient(${y??""}, ${h??""})`)},[()=>i().background,()=>i().accent,()=>i().accent2]),u(t,r)},ze=t=>{var r=Vt(),_=o(r),y=o(_);{var h=p=>{ut(p,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:He})},x=p=>{nt(p,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:Be})};S(y,p=>{a(Ge)?p(h):p(x,!1)})}s(_);var c=n(_,2),C=o(c);ft(C,{get stroke(){return i().textDull},style:"width: 1rem;"}),s(c),s(r),V(p=>{g(_,"border-color",p),g(c,"border-color",p)},[()=>i().textDull]),u(t,r)};S(Ue,t=>{a(k)?t(Ze):t(ze,!1)})}s(ve);var te=n(ve,2),Oe=o(te);Ye(Oe,()=>at(e.bio)),s(te);var ue=n(te,2),be=o(ue);ae(be,()=>d,null,(t,r)=>{var _=G(),y=B(_);{var h=x=>{var c=$t(),C=o(c);et(C,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var p=n(C,2),M=o(p,!0);s(p),s(c),V(R=>{w(c,"href",`/book/${a(r).isbn}`),w(c,"title",`${e.displayName}'s highest rated book is ${a(r).title}`),g(p,"color",R),F(M,a(r).title)},[()=>i().textDull]),u(x,c)};S(y,x=>{a(r)&&x(h)})}u(t,_)});var xe=n(be,2);ae(xe,()=>b,null,(t,r)=>{var _=G(),y=B(_);{var h=x=>{var c=Mt(),C=o(c);pt(C,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var p=n(C,2),M=o(p,!0);s(p),s(c),V(R=>{w(c,"href",`/book/${a(r).isbn??""}`),w(c,"title",`${e.displayName} is currently reading ${a(r).title}`),g(p,"color",R),F(M,a(r).title)},[()=>i().textDull]),u(x,c)};S(y,x=>{a(r)&&x(h)})}u(t,_)});var Ee=n(xe,2);ae(Ee,()=>q,null,(t,r)=>{var _=St(),y=o(_);vt(y,{get stroke(){return i().textDull},style:"width: 1.25rem; height: 1.25rem;"});var h=n(y,2),x=o(h,!0);s(h),s(_),V(c=>{w(_,"title",`${e.displayName??""} has read ${a(r)??""} book${(a(r)===1?"":"s")??""}`),g(h,"color",c),F(x,a(r))},[()=>i().textDull]),u(t,_)}),s(ue);var P=n(ue,2),ge=o(P),qe=o(ge);s(ge);var Ce=n(ge,2),Je=o(Ce);s(Ce),s(P);var ye=n(P,2),re=o(ye);re.__click=[Dt,v];var oe=n(re,2);oe.__click=[Rt,v];var se=n(oe,2);se.__click=[Gt,v];var pe=n(se,2);pe.__click=[Bt,v],s(ye),s(W);var Ke=n(W,2);ae(Ke,()=>f,null,(t,r)=>{var _=G(),y=B(_);{var h=c=>{var C=G(),p=B(C);le(p,17,()=>a(r).filter(M=>M.type==="general"),ie,(M,R)=>{ne(M,{get post(){return a(R)}})}),u(c,C)},x=c=>{var C=G(),p=B(C);{var M=H=>{var L=Ht(),N=o(L),_e=o(N);mt(_e,{get stroke(){return i().text},style:"width: 1.75rem; height: 1.75rem;"}),Xe(),s(N);var fe=n(N,2);le(fe,17,()=>a(r).filter($=>$.type==="rating"),ie,($,j)=>{ne($,{get post(){return a(j)}})}),s(L),V($=>g(N,"color",$),[()=>i().text]),u(H,L)},R=H=>{var L=G(),N=B(L);{var _e=$=>{var j=G(),ke=B(j);le(ke,17,()=>a(r).filter(J=>J.type==="update"),ie,(J,K)=>{ne(J,{get post(){return a(K)}})}),u($,j)},fe=$=>{var j=G(),ke=B(j);{var J=K=>{var Ve=G(),Qe=B(Ve);le(Qe,17,()=>a(r),ie,(Te,We)=>{ne(Te,{get post(){return a(We)}})}),u(K,Ve)};S(ke,K=>{a(v)==="all"&&K(J)},!0)}u($,j)};S(N,$=>{a(v)==="activity"?$(_e):$(fe,!1)},!0)}u(H,L)};S(p,H=>{a(v)==="ratings"?H(M):H(R,!1)},!0)}u(c,C)};S(y,c=>{a(v)==="discussion"?c(h):c(x,!1)})}u(t,_)}),s(de),V((t,r,_,y,h,x,c,C,p,M,R,H,L)=>{g(me,"background-image",`url("${e.banner}")`),g(W,"background",t),w(X,"src",e.picture),w(X,"alt",`${e.displayName} profile picture`),g(X,"border-color",t),g(Y,"color",r),F(je,e.displayName),g(ee,"color",_),F(Fe,`@${e.username??""}`),g(te,"color",y),w(P,"href",`/profile/${e.username}/follows`),g(P,"border-color",h),g(P,"color",h),F(qe,`${e.followers.length??""} Followers`),F(Je,`${e.following.length??""} Following`),g(re,"color",x),g(re,"border-bottom",c),g(oe,"color",C),g(oe,"border-bottom",p),g(se,"color",M),g(se,"border-bottom",R),g(pe,"color",H),g(pe,"border-bottom",L)},[()=>i().backgroundDark,()=>i().textBright,()=>i().textDim,()=>i().text,()=>i().textDull,()=>a(v)==="all"?i().text:i().textDim,()=>a(v)==="all"?`3px solid ${i().accent}`:"3px solid transparent",()=>a(v)==="discussion"?i().text:i().textDim,()=>a(v)==="discussion"?`3px solid ${i().accent}`:"3px solid transparent",()=>a(v)==="ratings"?i().text:i().textDim,()=>a(v)==="ratings"?`3px solid ${i().accent}`:"3px solid transparent",()=>a(v)==="activity"?i().text:i().textDim,()=>a(v)==="activity"?`3px solid ${i().accent}`:"3px solid transparent"]),u(m,de),A()}tt(["click"]);export{Kt as P};
