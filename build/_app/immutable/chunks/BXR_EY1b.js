import"./Bg9kRutz.js";import{p as O,s,e as o,r as a,t as w,g as E,I as t,ab as N,al as he,ak as X,f as V}from"./ZzbjMaxL.js";import{s as j}from"./DfWBJXpw.js";import{a as Y}from"./CaN9eekN.js";import{i as I}from"./DPZ8gRHv.js";import{e as xe,i as be}from"./SjV7uEaf.js";import{B as dt,h as pt,A as we,C as ut}from"./B30FY6xl.js";import{a as u,n as te,t as $,c as B}from"./DNWF8ubz.js";import{s as C,a as re,t as n,b as c,f as gt}from"./B0emLdTm.js";import{d as _t}from"./DNSqyUr2.js";import{p as Oe}from"./zrPdNk7G.js";import{b as ft}from"./B8S2MUok.js";import{g as qe}from"./BH4cheHN.js";import{w as kt,x as mt,g as ht,y as xt,u as ee,c as Ee,z as We}from"./C2RLqV5n.js";import{r as oe}from"./C6uVQmyT.js";import{L as bt}from"./Cl3BSLxH.js";import{a as wt}from"./BPmrZtv9.js";import{B as Ct}from"./DJXBSyL2.js";import{R as yt}from"./DKHdZpo4.js";var St=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function Rt(h,v){O(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),p=v.stroke;e={...e},e.stroke=void 0;var d=St();let f;var k=s(o(d),2),y=o(k);C(y,"stroke",p);var ae=s(y);C(ae,"stroke",p),a(k),a(d),w(()=>f=re(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,d),E()}var Vt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Mt(h,v){O(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),p=v.stroke;e={...e},e.stroke=void 0;var d=Vt();let f;var k=s(o(d),2),y=o(k);C(y,"stroke",p),a(k),a(d),w(()=>f=re(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,d),E()}var Dt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Bt(h,v){O(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),p=v.stroke;e={...e},e.stroke=void 0;var d=Dt();let f;var k=s(o(d),2),y=o(k);C(y,"stroke",p);var ae=s(y);C(ae,"stroke",p),a(k),a(d),w(()=>f=re(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,d),E()}var Gt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function $t(h,v){O(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),p=v.stroke;e={...e},e.stroke=void 0;var d=Gt();let f;var k=s(o(d),2),y=o(k);C(y,"stroke",p),a(k),a(d),w(()=>f=re(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,d),E()}var Ht=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Lt(h,v){O(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),p=v.stroke;e={...e},e.stroke=void 0;var d=Ht();let f;var k=s(o(d),2),y=o(k);C(y,"stroke",p),a(k),a(d),w(()=>f=re(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,d),E()}var Ft=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function jt(h,v){O(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),p=v.stroke;e={...e},e.stroke=void 0;var d=Ft();let f;var k=s(o(d),2),y=o(k);C(y,"stroke",p),a(k),a(d),w(()=>f=re(d,f,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(h,d),E()}var It=()=>qe("/"),Pt=()=>qe("/profile/edit"),At=$('<button class="edit-profile svelte-lxpin9">Edit Profile</button>'),Nt=$('<div class="profile-actions svelte-lxpin9"><button class="profile-action-follow svelte-lxpin9"><!></button> <button class="profile-action svelte-lxpin9"><!></button></div>'),Ut=$('<p class="bio svelte-lxpin9"><!></p>'),zt=$('<a class="svelte-lxpin9"><!> <span class="truncate svelte-lxpin9"> </span></a>'),Zt=$('<a class="svelte-lxpin9"><!> <span class="truncate svelte-lxpin9"> </span></a>'),Ot=$('<span class="svelte-lxpin9"><!> <span> </span></span>'),Et=(h,v)=>N(v,"all"),Wt=(h,v)=>N(v,"discussion"),qt=(h,v)=>N(v,"ratings"),Jt=(h,v)=>N(v,"activity"),Kt=$('<button class="svelte-lxpin9">Highest Rated</button> <button class="svelte-lxpin9">Recently Finished</button>',1),Qt=$('<div class="ratings svelte-lxpin9"><div class="rating-options svelte-lxpin9"><span class="svelte-lxpin9"><label for="show-full-reviews">Show full reviews</label> <!></span> <span class="svelte-lxpin9"><label for="change-rating-sort"> </label> <button id="change-rating-sort"><!></button></span> <!></div> <!></div>'),Tt=$('<div class="loading svelte-lxpin9"><h1 class="svelte-lxpin9">Loading posts...</h1> <p class="svelte-lxpin9">We promise Bookfly will be faster soon.</p></div>'),Xt=$('<section class="svelte-lxpin9"><div class="banner svelte-lxpin9"></div> <button class="back-arrow svelte-lxpin9"><!></button> <div class="profile svelte-lxpin9"><img class="profile-picture svelte-lxpin9"> <div class="profile-line-1 svelte-lxpin9"><span class="name svelte-lxpin9"><h1 class="svelte-lxpin9"> </h1> <h2 class="svelte-lxpin9"> </h2> <!> <div class="dot svelte-lxpin9"></div> <h2 class="pronouns svelte-lxpin9"> </h2></span> <!></div> <!> <div class="profile-line-2 svelte-lxpin9"><!> <!> <!></div> <a class="follows svelte-lxpin9"><span> </span> <span> </span></a> <div class="views svelte-lxpin9"><button class="svelte-lxpin9">All</button> <button class="svelte-lxpin9">Discussion</button> <button class="svelte-lxpin9">Books</button> <button class="svelte-lxpin9">Activity</button></div></div> <!></section>');function mr(h,v){O(v,!0);let e=v.user,p=he("all"),d=kt(e),f=mt(e),k=X(()=>{var l;return((l=ee())==null?void 0:l.id)===e.id}),y=e.currentBook?ht(e.currentBook):Promise.resolve(null),ae=f.then(l=>l.filter(r=>r.type==="rating").length),Ce=he(!1),ie,ye=he("best"),Je=X(()=>({best:"Highest Rated",recent:"Recently Finished"})[t(ye)]),Ke=X(()=>f.then(l=>l.filter(r=>r.type==="rating").toSorted({best:(r,i)=>i.rating-r.rating,recent:(r,i)=>r.timestamp-i.timestamp}[t(ye)])));function Fe(l){return()=>{N(ye,Oe(l)),ie.close()}}let ne=he(null),Qe=X(()=>{var l;return t(ne)||(((l=ee())==null?void 0:l.following.some(r=>r===e.id))??!1)&&t(ne)===null});function Te(){N(ne,!0),Ee({following:[...new Set([...ee().following,e.id])]}),We(e,{followers:[...new Set([...e.followers,ee().id])]})}function Xe(){N(ne,!1),Ee({following:ee().following.filter(l=>l!==e.id)}),We(e,{followers:e.followers.filter(l=>l!==ee().id)})}var Se=Xt(),je=o(Se),ve=s(je,2);ve.__click=[It];var Ye=o(ve);bt(Ye,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),a(ve);var ce=s(ve,2),de=o(ce),Re=s(de,2),Ve=o(Re),pe=o(Ve),et=o(pe,!0);a(pe);var ue=s(pe,2),tt=o(ue);a(ue);var Ie=s(ue,2);dt(Ie,{forUser:e,size:1});var Pe=s(Ie,2),Me=s(Pe,2),rt=o(Me,!0);a(Me),a(Ve);var ot=s(Ve,2);{var at=l=>{var r=At();r.__click=[Pt],w((i,m)=>{c(r,"color",i),c(r,"background",m)},[()=>n().background,gt]),u(l,r)},st=l=>{var r=Nt(),i=o(r),m=o(i);{var x=_=>{Bt(_,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:Xe})},b=_=>{Rt(_,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:Te})};I(m,_=>{t(Qe)?_(x):_(b,!1)})}a(i);var g=s(i,2),S=o(g);Lt(S,{get stroke(){return n().textDull},style:"width: 1rem;"}),a(g),a(r),w(_=>{c(i,"border-color",_),c(g,"border-color",_)},[()=>n().textDull]),u(l,r)};I(ot,l=>{t(k)?l(at):l(st,!1)})}a(Re);var Ae=s(Re,2);Y(Ae,()=>xt(e.bio),null,(l,r)=>{var i=Ut(),m=o(i);pt(m,()=>t(r),!1,!1),a(i),w(x=>c(i,"color",x),[()=>n().text]),u(l,i)});var De=s(Ae,2),Ne=o(De);Y(Ne,()=>d,null,(l,r)=>{var i=B(),m=V(i);{var x=b=>{var g=zt(),S=o(g);wt(S,{get stroke(){return n().textDull},style:"width: 1rem; height: 1rem;"});var _=s(S,2),M=o(_,!0);a(_),a(g),w(H=>{C(g,"href",`/book/${t(r).isbn}`),C(g,"title",`${e.displayName}'s highest rated book is ${t(r).title}`),c(_,"color",H),j(M,t(r).title)},[()=>n().textDull]),u(b,g)};I(m,b=>{t(r)&&b(x)})}u(l,i)});var Ue=s(Ne,2);Y(Ue,()=>y,null,(l,r)=>{var i=B(),m=V(i);{var x=b=>{var g=Zt(),S=o(g);$t(S,{get stroke(){return n().textDull},style:"width: 1rem; height: 1rem;"});var _=s(S,2),M=o(_,!0);a(_),a(g),w(H=>{C(g,"href",`/book/${t(r).isbn??""}`),C(g,"title",`${e.displayName} is currently reading ${t(r).title}`),c(_,"color",H),j(M,t(r).title)},[()=>n().textDull]),u(b,g)};I(m,b=>{t(r)&&b(x)})}u(l,i)});var lt=s(Ue,2);Y(lt,()=>ae,null,(l,r)=>{var i=Ot(),m=o(i);Mt(m,{get stroke(){return n().textDull},style:"width: 1.25rem; height: 1.25rem;"});var x=s(m,2),b=o(x,!0);a(x),a(i),w(g=>{C(i,"title",`${e.displayName??""} has read ${t(r)??""} book${(t(r)===1?"":"s")??""}`),c(x,"color",g),j(b,t(r))},[()=>n().textDull]),u(l,i)}),a(De);var W=s(De,2),Be=o(W),it=o(Be);a(Be);var ze=s(Be,2),nt=o(ze);a(ze),a(W);var Ze=s(W,2),ge=o(Ze);ge.__click=[Et,p];var _e=s(ge,2);_e.__click=[Wt,p];var fe=s(_e,2);fe.__click=[qt,p];var Ge=s(fe,2);Ge.__click=[Jt,p],a(Ze),a(ce);var vt=s(ce,2);Y(vt,()=>f,l=>{var r=Tt(),i=o(r),m=s(i,2);a(r),w((x,b)=>{c(i,"color",x),c(m,"color",b)},[()=>n().text,()=>n().textDull]),u(l,r)},(l,r)=>{var i=B(),m=V(i);{var x=g=>{var S=B(),_=V(S);xe(_,17,()=>t(r).filter(M=>M.type==="general"),be,(M,H)=>{we(M,{get post(){return t(H)}})}),u(g,S)},b=g=>{var S=B(),_=V(S);{var M=P=>{var q=Qt(),J=o(q),K=o(J),$e=s(o(K),2);yt($e,{id:"show-full-reviews",size:.5,get on(){return t(Ce)},set on(R){N(Ce,Oe(R))}}),a(K);var D=s(K,2),L=o(D),se=o(L,!0);a(L);var F=s(L,2);F.__click=R=>ie.open(R);var U=o(F);jt(U,{get stroke(){return n().textDull},style:"width: 1.5rem;"}),a(F),a(D);var ke=s(D,2);ft(ut(ke,{children:(R,z)=>{var le=Kt(),Q=V(le),Le=X(()=>Fe("best"));Q.__click=function(...A){var G;(G=t(Le))==null||G.apply(this,A)};var Z=s(Q,2),me=X(()=>Fe("recent"));Z.__click=function(...A){var G;(G=t(me))==null||G.apply(this,A)},w((A,G)=>{c(Q,"color",A),c(Q,"background",G),c(Z,"color",A),c(Z,"background",G)},[()=>n().text,()=>n().backgroundDim]),u(R,le)},$$slots:{default:!0}}),R=>ie=R,()=>ie),a(J);var He=s(J,2);Y(He,()=>t(Ke),null,(R,z)=>{var le=B(),Q=V(le);xe(Q,17,()=>t(z),be,(Le,Z)=>{var me=B(),A=V(me);{var G=T=>{we(T,{get post(){return t(Z)}})},ct=T=>{Ct(T,{get book(){return t(Z).books[0]},get rating(){return t(Z).rating},user:e})};I(A,T=>{t(Ce)?T(G):T(ct,!1)})}u(Le,me)}),u(R,le)}),a(q),w((R,z)=>{c(J,"border-color",R),c(K,"color",z),c(D,"color",z),j(se,t(Je))},[()=>n().textDark,()=>n().textDull]),u(P,q)},H=P=>{var q=B(),J=V(q);{var K=D=>{var L=B(),se=V(L);xe(se,17,()=>t(r).filter(F=>F.type==="update"),be,(F,U)=>{we(F,{get post(){return t(U)}})}),u(D,L)},$e=D=>{var L=B(),se=V(L);{var F=U=>{var ke=B(),He=V(ke);xe(He,17,()=>t(r),be,(R,z)=>{we(R,{get post(){return t(z)}})}),u(U,ke)};I(se,U=>{t(p)==="all"&&U(F)},!0)}u(D,L)};I(J,D=>{t(p)==="activity"?D(K):D($e,!1)},!0)}u(P,q)};I(_,P=>{t(p)==="ratings"?P(M):P(H,!1)},!0)}u(g,S)};I(m,g=>{t(p)==="discussion"?g(x):g(b,!1)})}u(l,i)}),a(Se),w((l,r,i,m,x,b,g,S,_,M,H,P)=>{c(je,"background-image",`url("${e.banner}")`),c(ce,"background",l),C(de,"src",e.picture),C(de,"alt",`${e.displayName} profile picture`),c(de,"border-color",l),c(pe,"color",r),j(et,e.displayName),c(ue,"color",i),j(tt,`@${e.username??""}`),c(Pe,"background",i),c(Me,"color",i),j(rt,e.pronouns),C(W,"href",`/profile/${e.username}/follows`),c(W,"border-color",m),c(W,"color",m),j(it,`${e.followers.length??""} Followers`),j(nt,`${e.following.length??""} Following`),c(ge,"color",x),c(ge,"border-bottom",b),c(_e,"color",g),c(_e,"border-bottom",S),c(fe,"color",_),c(fe,"border-bottom",M),c(Ge,"color",H),c(Ge,"border-bottom",P)},[()=>n().backgroundDark,()=>n().textBright,()=>n().textDim,()=>n().textDull,()=>t(p)==="all"?n().text:n().textDim,()=>t(p)==="all"?`3px solid ${n().accent}`:"3px solid transparent",()=>t(p)==="discussion"?n().text:n().textDim,()=>t(p)==="discussion"?`3px solid ${n().accent}`:"3px solid transparent",()=>t(p)==="ratings"?n().text:n().textDim,()=>t(p)==="ratings"?`3px solid ${n().accent}`:"3px solid transparent",()=>t(p)==="activity"?n().text:n().textDim,()=>t(p)==="activity"?`3px solid ${n().accent}`:"3px solid transparent"]),u(h,Se),E()}_t(["click"]);export{mr as P};
