import{a as c,n as se,t as L,c as I}from"./B71co7hf.js";import{p as Z,s as n,c as r,r as a,t as M,a as O,a4 as K,x as s,ah as Fe,ag as H,ad as Ze,av as tt}from"./DPfC8MYq.js";import{s as V}from"./DlS_wHck.js";import{h as rt,a as me,S as at,A as He}from"./B-wc2tT0.js";import{i as B}from"./quy6V6DK.js";import{e as pe,i as be}from"./VMik9WFC.js";import{s as m,a as oe}from"./BDjJzRxm.js";import{d as qe}from"./BaFUJi82.js";import{t as v,s as u,B as st}from"./C30DWIvn.js";import{g as Ce}from"./BvJfAGpd.js";import{b as ze,t as ot,v as nt,g as ae,w as lt,f as Oe,x as Ee}from"./C4bEEYCC.js";import{r as ne}from"./CZ8HQwBd.js";import{L as it}from"./D2xjXHkc.js";import{p as vt}from"./BLV86yr1.js";var ut=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function ct(h,e){Z(e,!0);let t=ne(e,["$$slots","$$events","$$legacy"]),k=e.stroke;t={...t},t.stroke=void 0;var l=ut();let _;var f=n(r(l),2),w=r(f);m(w,"stroke",k);var S=n(w);m(S,"stroke",k),a(f),a(l),M(()=>_=oe(l,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(h,l),O()}var dt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function gt(h,e){Z(e,!0);let t=ne(e,["$$slots","$$events","$$legacy"]),k=e.stroke;t={...t},t.stroke=void 0;var l=dt();let _;var f=n(r(l),2),w=r(f);m(w,"stroke",k),a(f),a(l),M(()=>_=oe(l,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(h,l),O()}var _t=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ft(h,e){Z(e,!0);let t=ne(e,["$$slots","$$events","$$legacy"]),k=e.stroke;t={...t},t.stroke=void 0;var l=_t();let _;var f=n(r(l),2),w=r(f);m(w,"stroke",k);var S=n(w);m(S,"stroke",k),a(f),a(l),M(()=>_=oe(l,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(h,l),O()}var ht=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function xt(h,e){Z(e,!0);let t=ne(e,["$$slots","$$events","$$legacy"]),k=e.stroke;t={...t},t.stroke=void 0;var l=ht();let _;var f=n(r(l),2),w=r(f);m(w,"stroke",k),a(f),a(l),M(()=>_=oe(l,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(h,l),O()}var kt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function wt(h,e){Z(e,!0);let t=ne(e,["$$slots","$$events","$$legacy"]),k=e.stroke;t={...t},t.stroke=void 0;var l=kt();let _;var f=n(r(l),2),w=r(f);m(w,"stroke",k),a(f),a(l),M(()=>_=oe(l,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(h,l),O()}var mt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function pt(h,e){Z(e,!0);let t=ne(e,["$$slots","$$events","$$legacy"]),k=e.stroke;t={...t},t.stroke=void 0;var l=mt();let _;var f=n(r(l),2),w=r(f);m(w,"stroke",k),a(f),a(l),M(()=>_=oe(l,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(h,l),O()}var bt=(h,e)=>Ce(`/profile/${e.user.username}`),Ct=L('<span class="svelte-1x69ua7"> </span>'),yt=(h,e)=>{var t;return Ce(`/book/${(t=s(e))==null?void 0:t.isbn}`)},Vt=L('<section class="svelte-1x69ua7"><div class="profile svelte-1x69ua7"><button class="svelte-1x69ua7"></button></div> <div class="wrapper svelte-1x69ua7"><span class="user svelte-1x69ua7"><h2 class="svelte-1x69ua7"> </h2> <h3 class="svelte-1x69ua7"> </h3></span> <div class="outer"><div class="listing svelte-1x69ua7"><div class="book-info svelte-1x69ua7"><h1 class="svelte-1x69ua7"> </h1> <h2 class="svelte-1x69ua7"> </h2> <!> <span class="svelte-1x69ua7"> </span></div> <img class="cover svelte-1x69ua7"></div> <p class="description svelte-1x69ua7"> </p></div></div></section>');function Mt(h,e){Z(e,!0);let t=Fe(null);(async function(){K(t,vt(await ze(e.isbn)))})();var k=Vt(),l=r(k),_=r(l);_.__click=[bt,e],a(l);var f=n(l,2),w=r(f),S=r(w),ye=r(S,!0);a(S);var le=n(S,2),Ve=r(le,!0);a(le),a(w);var ie=n(w,2),Q=r(ie),T=r(Q),E=r(T),W=r(E,!0);a(E);var X=n(E,2),Y=r(X,!0);a(X);var q=n(X,2);{var ve=C=>{var R=Ct(),N=r(R);a(R),M(ue=>{var ee;u(R,"color",ue),V(N,`${((ee=s(t))==null?void 0:ee.pageCount)??""} pages`)},[()=>v().text]),c(C,R)};B(q,C=>{var R;(R=s(t))!=null&&R.pageCount&&C(ve)})}var z=n(q,2),$=r(z,!0);a(z),a(T);var de=n(T,2);de.__click=[yt,t],a(Q);var A=n(Q,2),Me=r(A,!0);a(A),a(ie),a(f),a(k),M((C,R,N,ue,ee)=>{var ge,_e,fe;u(_,"background-image",`url("${e.user.picture}")`),u(S,"color",C),V(ye,e.user.displayName),u(le,"color",R),V(Ve,`@${e.user.username}`),u(E,"color",N),V(W,(ge=s(t))==null?void 0:ge.title),u(X,"color",R),V(Y,ue),u(z,"color",N),V($,ee),m(de,"src",(_e=s(t))==null?void 0:_e.cover),u(A,"color",N),V(Me,(fe=s(t))==null?void 0:fe.description)},[()=>v().textBright,()=>v().textDim,()=>v().text,()=>{var C;return(C=s(t))==null?void 0:C.authors.join(", ")},()=>{var C;return[...((C=s(t))==null?void 0:C.genres)??[]].splice(0,2).join(", ")}]),c(h,k),O()}qe(["click"]);var St=()=>Ce("/"),Rt=L('<span class="dev svelte-nafwxh">Dev</span>'),Dt=L('<span class="author svelte-nafwxh">Author</span>'),Gt=L('<span class="mod svelte-nafwxh">Moderator</span>'),Bt=()=>Ce("/profile/edit"),Lt=L('<button class="edit-profile svelte-nafwxh">Edit Profile</button>'),jt=L('<div class="profile-actions svelte-nafwxh"><button class="profile-action-follow svelte-nafwxh"><!></button> <button class="profile-action svelte-nafwxh"><!></button></div>'),Ht=L('<a><!> <span class="truncate svelte-nafwxh"> </span></a>'),Ft=L('<a><!> <span class="truncate svelte-nafwxh"> </span></a>'),It=L('<span class="svelte-nafwxh"><!> <span> </span></span>'),At=(h,e)=>K(e,"all"),Nt=(h,e)=>K(e,"discussion"),Pt=(h,e)=>K(e,"ratings"),Ut=(h,e)=>K(e,"list"),Zt=L('<div class="ratings svelte-nafwxh"><span class="rating-sort svelte-nafwxh"><!> Best</span> <!></div>'),Ot=L('<!> <main class="svelte-nafwxh"><div class="banner svelte-nafwxh"></div> <button class="back-arrow svelte-nafwxh"><!></button> <div class="profile svelte-nafwxh"><img class="profile-picture svelte-nafwxh"> <div class="profile-line-1 svelte-nafwxh"><span class="name svelte-nafwxh"><h1 class="svelte-nafwxh"> </h1> <h2 class="svelte-nafwxh"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-nafwxh"><!></p> <div class="profile-line-2 svelte-nafwxh"><!> <!> <!></div> <a class="follows svelte-nafwxh"><span> </span> <span> </span></a> <div class="views svelte-nafwxh"><button class="svelte-nafwxh">All</button> <button class="svelte-nafwxh">Discussion</button> <button class="svelte-nafwxh">Reviews</button> <button class="svelte-nafwxh">Reading List</button></div></div> <!></main>',1);function ar(h,e){Z(e,!0);let t=Fe("all"),k=ot(e.user),l=nt(e.user),_=Ze(()=>{var o;return((o=ae())==null?void 0:o.id)===e.user.id}),f=e.user.currentBook?ze(e.user.currentBook):Promise.resolve(null),w=l.then(o=>o.filter(i=>i.type==="rating").length),S=Fe(null),ye=Ze(()=>{var o;return s(S)||(((o=ae())==null?void 0:o.following.some(i=>i===e.user.id))??!1)&&s(S)===null});function le(){K(S,!0),Oe({following:[...new Set([...ae().following,e.user.id])]}),Ee(e.user,{followers:[...new Set([...e.user.followers,ae().id])]})}function Ve(){K(S,!1),Oe({following:ae().following.filter(o=>o!==e.user.id)}),Ee(e.user,{followers:e.user.followers.filter(o=>o!==ae().id)})}var ie=Ot(),Q=H(ie);st(Q,{});var T=n(Q,2),E=r(T),W=n(E,2);W.__click=[St];var X=r(W);it(X,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),a(W);var Y=n(W,2),q=r(Y),ve=n(q,2),z=r(ve),$=r(z),de=r($,!0);a($);var A=n($,2),Me=r(A);a(A);var C=n(A,2);{var R=o=>{var i=Rt();c(o,i)};B(C,o=>{e.user.tags.includes("dev")&&o(R)})}var N=n(C,2);{var ue=o=>{var i=Dt();c(o,i)};B(N,o=>{e.user.tags.includes("author")&&o(ue)})}var ee=n(N,2);{var ge=o=>{var i=Gt();c(o,i)};B(ee,o=>{e.user.tags.includes("mod")&&o(ge)})}a(z);var _e=n(z,2);{var fe=o=>{var i=Lt();i.__click=[Bt],c(o,i)},Je=o=>{var i=jt(),x=r(i),D=r(x);{var y=g=>{ft(g,{get stroke(){return v().textDull},style:"width: 2rem;",onclick:Ve})},p=g=>{ct(g,{get stroke(){return v().textDull},style:"width: 2rem;",onclick:le})};B(D,g=>{s(ye)?g(y):g(p,!1)})}a(x);var d=n(x,2),b=r(d);wt(b,{get stroke(){return v().textDull},style:"width: 1rem;"}),a(d),a(i),M(g=>{u(x,"border-color",g),u(d,"border-color",g)},[()=>v().textDull]),c(o,i)};B(_e,o=>{s(_)?o(fe):o(Je,!1)})}a(ve);var he=n(ve,2),Ke=r(he);rt(Ke,()=>lt(e.user.bio)),a(he);var Se=n(he,2),Ie=r(Se);me(Ie,()=>k,null,(o,i)=>{var x=I(),D=H(x);{var y=p=>{var d=Ht(),b=r(d);at(b,{get stroke(){return v().textDull},style:"width: 1rem; height: 1rem;"});var g=n(b,2),j=r(g,!0);a(g),a(d),M(F=>{m(d,"href",`/book/${s(i).isbn}`),m(d,"title",`${e.user.displayName}'s highest rated book is ${s(i).title}`),u(g,"color",F),V(j,s(i).title)},[()=>v().textDull]),c(p,d)};B(D,p=>{s(i)&&p(y)})}c(o,x)});var Ae=n(Ie,2);me(Ae,()=>f,null,(o,i)=>{var x=I(),D=H(x);{var y=p=>{var d=Ft(),b=r(d);xt(b,{get stroke(){return v().textDull},style:"width: 1rem; height: 1rem;"});var g=n(b,2),j=r(g,!0);a(g),a(d),M(F=>{m(d,"href",`/book/${s(i).isbn??""}`),m(d,"title",`${e.user.displayName} is currently reading ${s(i)}`),u(g,"color",F),V(j,s(i).title)},[()=>v().textDull]),c(p,d)};B(D,p=>{s(i)&&p(y)})}c(o,x)});var Qe=n(Ae,2);me(Qe,()=>w,null,(o,i)=>{var x=It(),D=r(x);gt(D,{get stroke(){return v().textDull},style:"width: 1.25rem; height: 1.25rem;"});var y=n(D,2),p=r(y,!0);a(y),a(x),M(d=>{m(x,"title",`${e.user.displayName??""} has read $${s(i)??""} book${(s(i)===1?"":"s")??""}`),u(y,"color",d),V(p,s(i))},[()=>v().textDull]),c(o,x)}),a(Se);var te=n(Se,2),Re=r(te),Te=r(Re);a(Re);var Ne=n(Re,2),We=r(Ne);a(Ne),a(te);var Pe=n(te,2),xe=r(Pe);xe.__click=[At,t];var ke=n(xe,2);ke.__click=[Nt,t];var we=n(ke,2);we.__click=[Pt,t];var De=n(we,2);De.__click=[Ut,t],a(Pe),a(Y);var Xe=n(Y,2);me(Xe,()=>l,null,(o,i)=>{var x=I(),D=H(x);{var y=d=>{var b=I(),g=H(b);pe(g,17,()=>s(i).filter(j=>j.type==="general"),be,(j,F)=>{He(j,{get post(){return s(F)}})}),c(d,b)},p=d=>{var b=I(),g=H(b);{var j=P=>{var U=Zt(),re=r(U),Ge=r(re);pt(Ge,{get stroke(){return v().text},style:"width: 1.75rem; height: 1.75rem;"}),tt(),a(re);var Be=n(re,2);pe(Be,17,()=>s(i).filter(G=>G.type==="rating"),be,(G,J)=>{He(G,{get post(){return s(J)}})}),a(U),M(G=>u(re,"color",G),[()=>v().text]),c(P,U)},F=P=>{var U=I(),re=H(U);{var Ge=G=>{var J=I(),Le=H(J);pe(Le,17,()=>e.user.readingList,be,(je,ce)=>{Mt(je,{get isbn(){return s(ce)},get user(){return e.user}})}),c(G,J)},Be=G=>{var J=I(),Le=H(J);{var je=ce=>{var Ue=I(),Ye=H(Ue);pe(Ye,17,()=>s(i),be,($e,et)=>{He($e,{get post(){return s(et)}})}),c(ce,Ue)};B(Le,ce=>{s(t)==="all"&&ce(je)},!0)}c(G,J)};B(re,G=>{s(t)==="list"?G(Ge):G(Be,!1)},!0)}c(P,U)};B(g,P=>{s(t)==="ratings"?P(j):P(F,!1)},!0)}c(d,b)};B(D,d=>{s(t)==="discussion"?d(y):d(p,!1)})}c(o,x)}),a(T),M((o,i,x,D,y,p,d,b,g,j,F,P,U)=>{u(E,"background-image",`url("${e.user.banner}")`),u(Y,"background",o),m(q,"src",e.user.picture),m(q,"alt",`${e.user.displayName} profile picture`),u(q,"border-color",o),u($,"color",i),V(de,e.user.displayName),u(A,"color",x),V(Me,`@${e.user.username??""}`),u(he,"color",D),m(te,"href",`/profile/${e.user.username}/follows`),u(te,"border-color",y),u(te,"color",y),V(Te,`${e.user.followers.length??""} Followers`),V(We,`${e.user.following.length??""} Following`),u(xe,"color",p),u(xe,"border-bottom",d),u(ke,"color",b),u(ke,"border-bottom",g),u(we,"color",j),u(we,"border-bottom",F),u(De,"color",P),u(De,"border-bottom",U)},[()=>v().backgroundDark,()=>v().textBright,()=>v().textDim,()=>v().text,()=>v().textDull,()=>s(t)==="all"?v().text:v().textDim,()=>s(t)==="all"?`3px solid ${v().accent}`:"3px solid transparent",()=>s(t)==="discussion"?v().text:v().textDim,()=>s(t)==="discussion"?`3px solid ${v().accent}`:"3px solid transparent",()=>s(t)==="ratings"?v().text:v().textDim,()=>s(t)==="ratings"?`3px solid ${v().accent}`:"3px solid transparent",()=>s(t)==="list"?v().text:v().textDim,()=>s(t)==="list"?`3px solid ${v().accent}`:"3px solid transparent"]),c(h,ie),O()}qe(["click"]);export{ar as P};
