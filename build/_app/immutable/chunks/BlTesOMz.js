import"./Bg9kRutz.js";import{p as O,s as l,e as a,r as s,t as w,g as E,af as be,H as r,ad as G,f as V,ae as le}from"./B60NIL-c.js";import{s as I}from"./WtNTA83C.js";import{a as X}from"./Ci1U5ZIt.js";import{p as we,i as P}from"./DYFtAg2Y.js";import{e as xe,i as Ce}from"./BVGIpSUl.js";import{B as _t,h as ft,A as ye,C as kt}from"./Bc7dG6v6.js";import{a as c,n as ee,t as H,c as $}from"./DyR6v0x8.js";import{s as x,a as te,F as mt,G as bt,n as wt,H as xt,t as i,b as v,u as Y,j as Ct,f as qe,I as Je}from"./b27God9X.js";import{d as yt}from"./crcT5ml2.js";import{b as St}from"./tbrsfC1P.js";import{g as Ie}from"./BrsKBTPS.js";import{r as re}from"./BIEUxy6C.js";import{L as Rt}from"./D8FZxYiR.js";import{a as Vt}from"./BB-vqdxy.js";import{B as Mt}from"./CS2mtfsX.js";import{R as Dt}from"./CiiuQxwb.js";var $t=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function Bt(S,h){O(h,!0);let e=re(h,["$$slots","$$events","$$legacy"]),u=h.stroke;e={...e},e.stroke=void 0;var d=$t();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",u);var oe=l(C);x(oe,"stroke",u),s(f),s(d),w(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(S,d),E()}var Gt=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Ht(S,h){O(h,!0);let e=re(h,["$$slots","$$events","$$legacy"]),u=h.stroke;e={...e},e.stroke=void 0;var d=Gt();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",u),s(f),s(d),w(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(S,d),E()}var Lt=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Ft(S,h){O(h,!0);let e=re(h,["$$slots","$$events","$$legacy"]),u=h.stroke;e={...e},e.stroke=void 0;var d=Lt();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",u);var oe=l(C);x(oe,"stroke",u),s(f),s(d),w(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(S,d),E()}var jt=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function It(S,h){O(h,!0);let e=re(h,["$$slots","$$events","$$legacy"]),u=h.stroke;e={...e},e.stroke=void 0;var d=jt();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",u),s(f),s(d),w(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(S,d),E()}var Pt=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Ut(S,h){O(h,!0);let e=re(h,["$$slots","$$events","$$legacy"]),u=h.stroke;e={...e},e.stroke=void 0;var d=Pt();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",u),s(f),s(d),w(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(S,d),E()}var At=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Nt(S,h){O(h,!0);let e=re(h,["$$slots","$$events","$$legacy"]),u=h.stroke;e={...e},e.stroke=void 0;var d=At();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",u),s(f),s(d),w(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(S,d),E()}var Zt=()=>Ie("/"),zt=()=>Ie("/profile/edit"),Ot=H('<button class="edit-profile svelte-dhhu74">Edit Profile</button>'),Et=H('<div class="profile-actions svelte-dhhu74"><button class="profile-action-follow svelte-dhhu74"><!></button> <button class="profile-action svelte-dhhu74"><!></button></div>'),Wt=H('<p class="bio svelte-dhhu74"><!></p>'),qt=H('<a class="svelte-dhhu74"><!> <span class="truncate svelte-dhhu74"> </span></a>'),Jt=H('<a class="svelte-dhhu74"><!> <span class="truncate svelte-dhhu74"> </span></a>'),Kt=H('<span class="svelte-dhhu74"><!> <span> </span></span>'),Qt=H('<button class="svelte-dhhu74">Highest Rated</button> <button class="svelte-dhhu74">Recently Finished</button>',1),Tt=H('<div class="ratings svelte-dhhu74"><div class="rating-options svelte-dhhu74"><span class="svelte-dhhu74"><label for="show-full-reviews">Show full reviews</label> <!></span> <span class="svelte-dhhu74"><label for="change-rating-sort"> </label> <button id="change-rating-sort" class="svelte-dhhu74"><!></button></span> <!></div> <!></div>'),Xt=H('<div class="loading svelte-dhhu74"><h1 class="svelte-dhhu74">Loading posts...</h1> <p class="svelte-dhhu74">We promise Bookfly will be faster soon.</p></div>'),Yt=H('<section class="svelte-dhhu74"><div class="banner svelte-dhhu74"></div> <button class="back-arrow svelte-dhhu74"><!></button> <div class="profile svelte-dhhu74"><img class="profile-picture svelte-dhhu74"> <div class="profile-line-1 svelte-dhhu74"><span class="name svelte-dhhu74"><h1 class="svelte-dhhu74"> </h1> <h2 class="svelte-dhhu74"> </h2> <!> <div class="dot svelte-dhhu74"></div> <h2 class="pronouns svelte-dhhu74"> </h2></span> <!></div> <!> <div class="profile-line-2 svelte-dhhu74"><!> <!> <!></div> <a class="follows svelte-dhhu74"><span> </span> <span> </span></a> <div class="views svelte-dhhu74"><button class="svelte-dhhu74">All</button> <button class="svelte-dhhu74">Discussion</button> <button class="svelte-dhhu74">Books</button> <button class="svelte-dhhu74">Activity</button></div></div> <!></section>');function fr(S,h){O(h,!0);let e=h.user,u=be(we(new URLSearchParams(window.location.search).get("view")??"all")),d=mt(e),_=bt(e),f=G(()=>{var o;return((o=Y())==null?void 0:o.id)===e.id}),C=e.currentBook?wt(e.currentBook):Promise.resolve(null),oe=_.then(o=>o.filter(t=>t.type==="rating").length),Se=be(!1),ne,Re=be("best"),Ke=G(()=>({best:"Highest Rated",recent:"Recently Finished"})[r(Re)]),Qe=G(()=>_.then(o=>o.filter(t=>t.type==="rating").toSorted({best:(t,n)=>n.rating-t.rating,recent:(t,n)=>t.timestamp-n.timestamp}[r(Re)])));function Pe(o){return()=>{le(Re,we(o)),ne.close()}}let ie=be(null),Te=G(()=>{var o;return r(ie)||(((o=Y())==null?void 0:o.following.some(t=>t===e.id))??!1)&&r(ie)===null});function Xe(){le(ie,!0),qe({following:[...new Set([...Y().following,e.id])]}),Je(e,{followers:[...new Set([...e.followers,Y().id])]})}function Ye(){le(ie,!1),qe({following:Y().following.filter(o=>o!==e.id)}),Je(e,{followers:e.followers.filter(o=>o!==Y().id)})}function ve(o){return function(){Ie(`${window.location.origin}${window.location.pathname}?${new URLSearchParams({view:o})}`),le(u,we(o))}}var Ve=Yt(),Ue=a(Ve),de=l(Ue,2);de.__click=[Zt];var et=a(de);Rt(et,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),s(de);var ue=l(de,2),ce=a(ue),Me=l(ce,2),De=a(Me),he=a(De),tt=a(he,!0);s(he);var ge=l(he,2),rt=a(ge);s(ge);var Ae=l(ge,2);_t(Ae,{forUser:e,size:1});var Ne=l(Ae,2),$e=l(Ne,2),ot=a($e,!0);s($e),s(De);var at=l(De,2);{var st=o=>{var t=Ot();t.__click=[zt],w((n,k)=>{v(t,"color",n),v(t,"background",k)},[()=>i().background,Ct]),c(o,t)},lt=o=>{var t=Et(),n=a(t),k=a(n);{var m=p=>{Ft(p,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:Ye})},b=p=>{Bt(p,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:Xe})};P(k,p=>{r(Te)?p(m):p(b,!1)})}s(n);var g=l(n,2),y=a(g);Ut(y,{get stroke(){return i().textDull},style:"width: 1rem;"}),s(g),s(t),w(p=>{v(n,"border-color",p),v(g,"border-color",p)},[()=>i().textDull]),c(o,t)};P(at,o=>{r(f)?o(st):o(lt,!1)})}s(Me);var Ze=l(Me,2);X(Ze,()=>xt(e.bio),null,(o,t)=>{var n=Wt(),k=a(n);ft(k,()=>r(t),!1,!1),s(n),w(m=>v(n,"color",m),[()=>i().text]),c(o,n)});var Be=l(Ze,2),ze=a(Be);X(ze,()=>d,null,(o,t)=>{var n=$(),k=V(n);{var m=b=>{var g=qt(),y=a(g);Vt(y,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var p=l(y,2),M=a(p,!0);s(p),s(g),w(L=>{x(g,"href",`/book/${r(t).isbn}`),x(g,"title",`${e.displayName}'s highest rated book is ${r(t).title}`),v(p,"color",L),I(M,r(t).title)},[()=>i().textDull]),c(b,g)};P(k,b=>{r(t)&&b(m)})}c(o,n)});var Oe=l(ze,2);X(Oe,()=>C,null,(o,t)=>{var n=$(),k=V(n);{var m=b=>{var g=Jt(),y=a(g);It(y,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var p=l(y,2),M=a(p,!0);s(p),s(g),w(L=>{x(g,"href",`/book/${r(t).isbn??""}`),x(g,"title",`${e.displayName} is currently reading ${r(t).title}`),v(p,"color",L),I(M,r(t).title)},[()=>i().textDull]),c(b,g)};P(k,b=>{r(t)&&b(m)})}c(o,n)});var nt=l(Oe,2);X(nt,()=>oe,null,(o,t)=>{var n=Kt(),k=a(n);Ht(k,{get stroke(){return i().textDull},style:"width: 1.25rem; height: 1.25rem;"});var m=l(k,2),b=a(m,!0);s(m),s(n),w(g=>{x(n,"title",`${e.displayName??""} has read ${r(t)??""} book${(r(t)===1?"":"s")??""}`),v(m,"color",g),I(b,r(t))},[()=>i().textDull]),c(o,n)}),s(Be);var W=l(Be,2),Ge=a(W),it=a(Ge);s(Ge);var Ee=l(Ge,2),vt=a(Ee);s(Ee),s(W);var We=l(W,2),pe=a(We),dt=G(()=>ve("all"));pe.__click=function(...o){var t;(t=r(dt))==null||t.apply(this,o)};var _e=l(pe,2),ut=G(()=>ve("discussion"));_e.__click=function(...o){var t;(t=r(ut))==null||t.apply(this,o)};var fe=l(_e,2),ct=G(()=>ve("books"));fe.__click=function(...o){var t;(t=r(ct))==null||t.apply(this,o)};var He=l(fe,2),ht=G(()=>ve("activity"));He.__click=function(...o){var t;(t=r(ht))==null||t.apply(this,o)},s(We),s(ue);var gt=l(ue,2);X(gt,()=>_,o=>{var t=Xt(),n=a(t),k=l(n,2);s(t),w((m,b)=>{v(n,"color",m),v(k,"color",b)},[()=>i().text,()=>i().textDull]),c(o,t)},(o,t)=>{var n=$(),k=V(n);{var m=g=>{var y=$(),p=V(y);xe(p,17,()=>r(t).filter(M=>M.type==="general"),Ce,(M,L)=>{ye(M,{get post(){return r(L)}})}),c(g,y)},b=g=>{var y=$(),p=V(y);{var M=U=>{var q=Tt(),J=a(q),K=a(J),Le=l(a(K),2);Dt(Le,{id:"show-full-reviews",size:.5,get on(){return r(Se)},set on(R){le(Se,we(R))}}),s(K);var D=l(K,2),F=a(D),ae=a(F,!0);s(F);var j=l(F,2);j.__click=R=>ne.open(R);var N=a(j);Nt(N,{get stroke(){return i().textDull},style:"width: 1.5rem;"}),s(j),s(D);var ke=l(D,2);St(kt(ke,{children:(R,Z)=>{var se=Qt(),Q=V(se),je=G(()=>Pe("best"));Q.__click=function(...A){var B;(B=r(je))==null||B.apply(this,A)};var z=l(Q,2),me=G(()=>Pe("recent"));z.__click=function(...A){var B;(B=r(me))==null||B.apply(this,A)},w((A,B)=>{v(Q,"color",A),v(Q,"background",B),v(z,"color",A),v(z,"background",B)},[()=>i().text,()=>i().backgroundDim]),c(R,se)},$$slots:{default:!0}}),R=>ne=R,()=>ne),s(J);var Fe=l(J,2);X(Fe,()=>r(Qe),null,(R,Z)=>{var se=$(),Q=V(se);xe(Q,17,()=>r(Z),Ce,(je,z)=>{var me=$(),A=V(me);{var B=T=>{ye(T,{get post(){return r(z)}})},pt=T=>{Mt(T,{get book(){return r(z).books[0]},get rating(){return r(z).rating},user:e})};P(A,T=>{r(Se)?T(B):T(pt,!1)})}c(je,me)}),c(R,se)}),s(q),w((R,Z)=>{v(J,"border-color",R),v(K,"color",Z),v(D,"color",Z),I(ae,r(Ke))},[()=>i().textDark,()=>i().textDull]),c(U,q)},L=U=>{var q=$(),J=V(q);{var K=D=>{var F=$(),ae=V(F);xe(ae,17,()=>r(t).filter(j=>j.type==="update"),Ce,(j,N)=>{ye(j,{get post(){return r(N)}})}),c(D,F)},Le=D=>{var F=$(),ae=V(F);{var j=N=>{var ke=$(),Fe=V(ke);xe(Fe,17,()=>r(t),Ce,(R,Z)=>{ye(R,{get post(){return r(Z)}})}),c(N,ke)};P(ae,N=>{r(u)==="all"&&N(j)},!0)}c(D,F)};P(J,D=>{r(u)==="activity"?D(K):D(Le,!1)},!0)}c(U,q)};P(p,U=>{r(u)==="books"?U(M):U(L,!1)},!0)}c(g,y)};P(k,g=>{r(u)==="discussion"?g(m):g(b,!1)})}c(o,n)}),s(Ve),w((o,t,n,k,m,b,g,y,p,M,L,U)=>{v(Ue,"background-image",`url("${e.banner}")`),v(ue,"background",o),x(ce,"src",e.picture),x(ce,"alt",`${e.displayName} profile picture`),v(ce,"border-color",o),v(he,"color",t),I(tt,e.displayName),v(ge,"color",n),I(rt,`@${e.username??""}`),v(Ne,"background",n),v($e,"color",n),I(ot,e.pronouns),x(W,"href",`/profile/${e.username}/follows`),v(W,"border-color",k),v(W,"color",k),I(it,`${e.followers.length??""} Followers`),I(vt,`${e.following.length??""} Following`),v(pe,"color",m),v(pe,"border-bottom",b),v(_e,"color",g),v(_e,"border-bottom",y),v(fe,"color",p),v(fe,"border-bottom",M),v(He,"color",L),v(He,"border-bottom",U)},[()=>i().backgroundDark,()=>i().textBright,()=>i().textDim,()=>i().textDull,()=>r(u)==="all"?i().text:i().textDim,()=>r(u)==="all"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(u)==="discussion"?i().text:i().textDim,()=>r(u)==="discussion"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(u)==="books"?i().text:i().textDim,()=>r(u)==="books"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(u)==="activity"?i().text:i().textDim,()=>r(u)==="activity"?`3px solid ${i().accent}`:"3px solid transparent"]),c(S,Ve),E()}yt(["click"]);export{fr as P};
