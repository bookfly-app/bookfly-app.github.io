import"./Bg9kRutz.js";import{p as X,s as n,j as a,r as s,t as x,a as Y,af as Se,g as r,d as F,f as R,ae as ue}from"./DiqXsxXx.js";import{s as Z}from"./BuDD57Oe.js";import{a as Q}from"./B9aUA73W.js";import{p as Re,i as I}from"./B8MhMNG7.js";import{e as ce,i as he}from"./CEg9CAyN.js";import{B as wt,h as xt,A as Ve,C as Ct}from"./B8-3uUvb.js";import{a as u,n as ae,t as $,c as D}from"./CBKY_uNu.js";import{s as C,a as se,G as yt,n as qe,w as St,H as Rt,I as Vt,t as i,b as v,u as oe,c as Dt,g as Ke,J as Qe}from"./uEAOx7Lv.js";import{d as Mt}from"./C5FOHo4g.js";import{b as $t}from"./DfWF4Mlz.js";import{g as Ie}from"./d-o4lLbY.js";import{r as le}from"./DKOoKbnL.js";import{L as Bt}from"./D_9L0pWQ.js";import{a as Gt}from"./CDksmTCw.js";import{B as Te}from"./CZwK-8pe.js";import{R as Lt}from"./YIXKJzaq.js";var Ht=ae('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function Ft(V,h){X(h,!0);let t=le(h,["$$slots","$$events","$$legacy"]),c=h.stroke;t={...t},t.stroke=void 0;var d=Ht();let f;var k=n(a(d),2),m=a(k);C(m,"stroke",c);var ne=n(m);C(ne,"stroke",c),s(k),s(d),x(()=>f=se(d,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(V,d),Y()}var jt=ae('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function It(V,h){X(h,!0);let t=le(h,["$$slots","$$events","$$legacy"]),c=h.stroke;t={...t},t.stroke=void 0;var d=jt();let f;var k=n(a(d),2),m=a(k);C(m,"stroke",c),s(k),s(d),x(()=>f=se(d,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(V,d),Y()}var Pt=ae('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Ut(V,h){X(h,!0);let t=le(h,["$$slots","$$events","$$legacy"]),c=h.stroke;t={...t},t.stroke=void 0;var d=Pt();let f;var k=n(a(d),2),m=a(k);C(m,"stroke",c);var ne=n(m);C(ne,"stroke",c),s(k),s(d),x(()=>f=se(d,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(V,d),Y()}var At=ae('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Nt(V,h){X(h,!0);let t=le(h,["$$slots","$$events","$$legacy"]),c=h.stroke;t={...t},t.stroke=void 0;var d=At();let f;var k=n(a(d),2),m=a(k);C(m,"stroke",c),s(k),s(d),x(()=>f=se(d,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(V,d),Y()}var Zt=ae('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function zt(V,h){X(h,!0);let t=le(h,["$$slots","$$events","$$legacy"]),c=h.stroke;t={...t},t.stroke=void 0;var d=Zt();let f;var k=n(a(d),2),m=a(k);C(m,"stroke",c),s(k),s(d),x(()=>f=se(d,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(V,d),Y()}var Ot=ae('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Et(V,h){X(h,!0);let t=le(h,["$$slots","$$events","$$legacy"]),c=h.stroke;t={...t},t.stroke=void 0;var d=Ot();let f;var k=n(a(d),2),m=a(k);C(m,"stroke",c),s(k),s(d),x(()=>f=se(d,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(V,d),Y()}var Jt=()=>Ie("/"),Wt=()=>Ie("/profile/edit"),qt=$('<button class="edit-profile svelte-dhhu74">Edit Profile</button>'),Kt=$('<div class="profile-actions svelte-dhhu74"><button class="profile-action-follow svelte-dhhu74"><!></button> <button class="profile-action svelte-dhhu74"><!></button></div>'),Qt=$('<p class="bio svelte-dhhu74"><!></p>'),Tt=$('<a class="svelte-dhhu74"><!> <span class="truncate svelte-dhhu74"> </span></a>'),Xt=$('<a class="svelte-dhhu74"><!> <span class="truncate svelte-dhhu74"> </span></a>'),Yt=$('<span class="svelte-dhhu74"><!> <span> </span></span>'),er=$("<span> </span>"),tr=$('<button class="svelte-dhhu74">Highest Rated</button> <button class="svelte-dhhu74">Recently Finished</button>',1),rr=$('<div class="ratings svelte-dhhu74"><div class="rating-options svelte-dhhu74"><span class="svelte-dhhu74"><label for="show-full-reviews">Show full reviews</label> <!></span> <span class="svelte-dhhu74"><label for="change-rating-sort"> </label> <button id="change-rating-sort" class="svelte-dhhu74"><!></button></span> <!></div> <!></div>'),or=$('<div class="ratings svelte-dhhu74"><!></div>'),ar=$('<div class="loading svelte-dhhu74"><h1 class="svelte-dhhu74">Loading posts...</h1> <p class="svelte-dhhu74">We promise Bookfly will be faster soon.</p></div>'),sr=$('<section class="svelte-dhhu74"><div class="banner svelte-dhhu74"></div> <button class="back-arrow svelte-dhhu74"><!></button> <div class="profile svelte-dhhu74"><img class="profile-picture svelte-dhhu74"> <div class="profile-line-1 svelte-dhhu74"><span class="name svelte-dhhu74"><h1 class="svelte-dhhu74"> </h1> <h2 class="svelte-dhhu74"> </h2> <!> <div class="dot svelte-dhhu74"></div> <h2 class="pronouns svelte-dhhu74"> </h2></span> <!></div> <!> <div class="profile-line-2 svelte-dhhu74"><!> <!> <!></div> <a class="follows svelte-dhhu74"><!> <span> </span></a> <div class="views svelte-dhhu74"><button class="svelte-dhhu74">All</button> <button class="svelte-dhhu74">Discussion</button> <button class="svelte-dhhu74">Books</button> <button class="svelte-dhhu74">Activity</button> <button class="svelte-dhhu74">List</button></div></div> <!></section>');function Cr(V,h){X(h,!0);let t=h.user,c=Se(Re(new URLSearchParams(window.location.search).get("view")??"all")),d=yt(t),f=Promise.all(t.readingList.map(o=>qe(o))),k=St(t),m=Rt(t),ne=F(()=>{var o;return((o=oe())==null?void 0:o.id)===t.id}),Xe=t.currentBook?qe(t.currentBook):Promise.resolve(null),Ye=m.then(o=>o.filter(e=>e.type==="rating").length),De=Se(!1),ge,Me=Se("best"),et=F(()=>({best:"Highest Rated",recent:"Recently Finished"})[r(Me)]),tt=F(()=>m.then(o=>o.filter(e=>e.type==="rating").toSorted({best:(e,l)=>l.rating-e.rating,recent:(e,l)=>e.timestamp-l.timestamp}[r(Me)])));function Pe(o){return()=>{ue(Me,Re(o)),ge.close()}}let pe=Se(null),rt=F(()=>{var o;return r(pe)||(((o=oe())==null?void 0:o.following.some(e=>e===t.id))??!1)&&r(pe)===null});function ot(){ue(pe,!0),Ke({following:[...new Set([...oe().following,t.id])]}),Qe(t,{followers:[...new Set([...t.followers,oe().id])]})}function at(){ue(pe,!1),Ke({following:oe().following.filter(o=>o!==t.id)}),Qe(t,{followers:t.followers.filter(o=>o!==oe().id)})}function ie(o){return function(){Ie(`${window.location.origin}${window.location.pathname}?${new URLSearchParams({view:o})}`),ue(c,Re(o))}}var $e=sr(),Ue=a($e),_e=n(Ue,2);_e.__click=[Jt];var st=a(_e);Bt(st,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),s(_e);var fe=n(_e,2),ke=a(fe),Be=n(ke,2),Ge=a(Be),me=a(Ge),lt=a(me,!0);s(me);var be=n(me,2),nt=a(be);s(be);var Ae=n(be,2);wt(Ae,{forUser:t,size:1});var Ne=n(Ae,2),Le=n(Ne,2),it=a(Le,!0);s(Le),s(Ge);var vt=n(Ge,2);{var dt=o=>{var e=qt();e.__click=[Wt],x((l,_)=>{v(e,"color",l),v(e,"background",_)},[()=>i().background,Dt]),u(o,e)},ut=o=>{var e=Kt(),l=a(e),_=a(l);{var b=p=>{Ut(p,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:at})},w=p=>{Ft(p,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:ot})};I(_,p=>{r(rt)?p(b):p(w,!1)})}s(l);var g=n(l,2),y=a(g);zt(y,{get stroke(){return i().textDull},style:"width: 1rem;"}),s(g),s(e),x(p=>{v(l,"border-color",p),v(g,"border-color",p)},[()=>i().textDull]),u(o,e)};I(vt,o=>{r(ne)?o(dt):o(ut,!1)})}s(Be);var Ze=n(Be,2);Q(Ze,()=>Vt(t.bio),null,(o,e)=>{var l=Qt(),_=a(l);xt(_,()=>r(e),!1,!1),s(l),x(b=>v(l,"color",b),[()=>i().text]),u(o,l)});var He=n(Ze,2),ze=a(He);Q(ze,()=>d,null,(o,e)=>{var l=D(),_=R(l);{var b=w=>{var g=Tt(),y=a(g);Gt(y,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var p=n(y,2),B=a(p,!0);s(p),s(g),x(P=>{C(g,"href",`/book/${r(e).isbn}`),C(g,"title",`${t.displayName}'s highest rated book is ${r(e).title}`),v(p,"color",P),Z(B,r(e).title)},[()=>i().textDull]),u(w,g)};I(_,w=>{r(e)&&w(b)})}u(o,l)});var Oe=n(ze,2);Q(Oe,()=>Xe,null,(o,e)=>{var l=D(),_=R(l);{var b=w=>{var g=Xt(),y=a(g);Nt(y,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var p=n(y,2),B=a(p,!0);s(p),s(g),x(P=>{C(g,"href",`/book/${r(e).isbn??""}`),C(g,"title",`${t.displayName} is currently reading ${r(e).title}`),v(p,"color",P),Z(B,r(e).title)},[()=>i().textDull]),u(w,g)};I(_,w=>{r(e)&&w(b)})}u(o,l)});var ct=n(Oe,2);Q(ct,()=>Ye,null,(o,e)=>{var l=Yt(),_=a(l);It(_,{get stroke(){return i().textDull},style:"width: 1.25rem; height: 1.25rem;"});var b=n(_,2),w=a(b,!0);s(b),s(l),x(g=>{C(l,"title",`${t.displayName??""} has read ${r(e)??""} book${(r(e)===1?"":"s")??""}`),v(b,"color",g),Z(w,r(e))},[()=>i().textDull]),u(o,l)}),s(He);var ee=n(He,2),Ee=a(ee);Q(Ee,()=>k,null,(o,e)=>{var l=er(),_=a(l);s(l),x(()=>Z(_,`${r(e).length??""} Followers`)),u(o,l)});var Je=n(Ee,2),ht=a(Je);s(Je),s(ee);var We=n(ee,2),we=a(We),gt=F(()=>ie("all"));we.__click=function(...o){var e;(e=r(gt))==null||e.apply(this,o)};var xe=n(we,2),pt=F(()=>ie("discussion"));xe.__click=function(...o){var e;(e=r(pt))==null||e.apply(this,o)};var Ce=n(xe,2),_t=F(()=>ie("books"));Ce.__click=function(...o){var e;(e=r(_t))==null||e.apply(this,o)};var ye=n(Ce,2),ft=F(()=>ie("activity"));ye.__click=function(...o){var e;(e=r(ft))==null||e.apply(this,o)};var Fe=n(ye,2),kt=F(()=>ie("list"));Fe.__click=function(...o){var e;(e=r(kt))==null||e.apply(this,o)},s(We),s(fe);var mt=n(fe,2);Q(mt,()=>m,o=>{var e=ar(),l=a(e),_=n(l,2);s(e),x((b,w)=>{v(l,"color",b),v(_,"color",w)},[()=>i().text,()=>i().textDull]),u(o,e)},(o,e)=>{var l=D(),_=R(l);{var b=g=>{var y=D(),p=R(y);ce(p,17,()=>r(e).filter(B=>B.type==="general"),he,(B,P)=>{Ve(B,{get post(){return r(P)}})}),u(g,y)},w=g=>{var y=D(),p=R(y);{var B=z=>{var O=rr(),E=a(O),te=a(E),je=n(a(te),2);Lt(je,{id:"show-full-reviews",size:.5,get on(){return r(De)},set on(S){ue(De,Re(S))}}),s(te);var G=n(te,2),U=a(G),ve=a(U,!0);s(U);var A=n(U,2);A.__click=S=>ge.open(S);var de=a(A);Et(de,{get stroke(){return i().textDull},style:"width: 1.5rem;"}),s(A),s(G);var J=n(G,2);$t(Ct(J,{children:(S,N)=>{var L=tr(),M=R(L),T=F(()=>Pe("best"));M.__click=function(...K){var j;(j=r(T))==null||j.apply(this,K)};var H=n(M,2),q=F(()=>Pe("recent"));H.__click=function(...K){var j;(j=r(q))==null||j.apply(this,K)},x((K,j)=>{v(M,"color",K),v(M,"background",j),v(H,"color",K),v(H,"background",j)},[()=>i().text,()=>i().backgroundDim]),u(S,L)},$$slots:{default:!0}}),S=>ge=S,()=>ge),s(E);var W=n(E,2);Q(W,()=>r(tt),null,(S,N)=>{var L=D(),M=R(L);ce(M,17,()=>r(N),he,(T,H)=>{var q=D(),K=R(q);{var j=re=>{Ve(re,{get post(){return r(H)}})},bt=re=>{Te(re,{get book(){return r(H).books[0]},get rating(){return r(H).rating},user:t})};I(K,re=>{r(De)?re(j):re(bt,!1)})}u(T,q)}),u(S,L)}),s(O),x((S,N)=>{v(E,"border-color",S),v(te,"color",N),v(G,"color",N),Z(ve,r(et))},[()=>i().textDark,()=>i().textDull]),u(z,O)},P=z=>{var O=D(),E=R(O);{var te=G=>{var U=D(),ve=R(U);ce(ve,17,()=>r(e).filter(A=>A.type==="update"),he,(A,de)=>{Ve(A,{get post(){return r(de)}})}),u(G,U)},je=G=>{var U=D(),ve=R(U);{var A=J=>{var W=or(),S=a(W);Q(S,()=>f,null,(N,L)=>{var M=D(),T=R(M);ce(T,17,()=>r(L),he,(H,q)=>{Te(H,{get book(){return r(q)},user:t})}),u(N,M)}),s(W),u(J,W)},de=J=>{var W=D(),S=R(W);{var N=L=>{var M=D(),T=R(M);ce(T,17,()=>r(e),he,(H,q)=>{Ve(H,{get post(){return r(q)}})}),u(L,M)};I(S,L=>{r(c)==="all"&&L(N)},!0)}u(J,W)};I(ve,J=>{r(c)==="list"?J(A):J(de,!1)},!0)}u(G,U)};I(E,G=>{r(c)==="activity"?G(te):G(je,!1)},!0)}u(z,O)};I(p,z=>{r(c)==="books"?z(B):z(P,!1)},!0)}u(g,y)};I(_,g=>{r(c)==="discussion"?g(b):g(w,!1)})}u(o,l)}),s($e),x((o,e,l,_,b,w,g,y,p,B,P,z,O,E)=>{v(Ue,"background-image",`url("${t.banner}")`),v(fe,"background",o),C(ke,"src",t.picture),C(ke,"alt",`${t.displayName} profile picture`),v(ke,"border-color",o),v(me,"color",e),Z(lt,t.displayName),v(be,"color",l),Z(nt,`@${t.username??""}`),v(Ne,"background",l),v(Le,"color",l),Z(it,t.pronouns),C(ee,"href",`/profile/${t.username}/follows`),v(ee,"border-color",_),v(ee,"color",_),Z(ht,`${t.following.length??""} Following`),v(we,"color",b),v(we,"border-bottom",w),v(xe,"color",g),v(xe,"border-bottom",y),v(Ce,"color",p),v(Ce,"border-bottom",B),v(ye,"color",P),v(ye,"border-bottom",z),v(Fe,"color",O),v(Fe,"border-bottom",E)},[()=>i().backgroundDark,()=>i().textBright,()=>i().textDim,()=>i().textDull,()=>r(c)==="all"?i().text:i().textDim,()=>r(c)==="all"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(c)==="discussion"?i().text:i().textDim,()=>r(c)==="discussion"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(c)==="books"?i().text:i().textDim,()=>r(c)==="books"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(c)==="activity"?i().text:i().textDim,()=>r(c)==="activity"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(c)==="list"?i().text:i().textDim,()=>r(c)==="list"?`3px solid ${i().accent}`:"3px solid transparent"]),u(V,$e),Y()}Mt(["click"]);export{Cr as P};
