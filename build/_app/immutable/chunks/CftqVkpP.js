import{a as _,n as ne,t as j,c as X}from"./BxSTZsxu.js";import{V as O,Z as l,_ as t,$ as r,Y as G,W as E,a4 as B,j as o,av as Z,ag as U,ad as Ue,aw as st}from"./CPHSnTsz.js";import{s as w}from"./CDWYztYM.js";import{i as D}from"./CYO2J7MK.js";import{e as he,i as xe}from"./wX8QaUIw.js";import{h as ot,S as lt,A as je}from"./YWQBuUU_.js";import{s as y,a as ve}from"./DqPAjMxq.js";import{d as Ee}from"./Bx1gFvPW.js";import{t as v,s as c}from"./CSAgp_0I.js";import{p as ee}from"./BKizAegZ.js";import{g as we}from"./BcNDbQzC.js";import{g as We,k as it,m as nt,b as $,n as vt,u as Ze,o as Oe}from"./BKupSz3R.js";import{r as de}from"./Yq0P00KR.js";import{L as dt}from"./B4j4sipx.js";import{B as ct}from"./DMdIt5He.js";import{M as ut}from"./BjDUfhiK.js";var gt=ne('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function _t(f,e){O(e,!0);let s=de(e,["$$slots","$$events","$$legacy"]),i=e.stroke;s={...s},s.stroke=void 0;var n=gt();let u;var g=l(t(n),2),m=t(g);y(m,"stroke",i),r(g),r(n),G(()=>u=ve(n,u,{...s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),E()}var ft=ne('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function mt(f,e){O(e,!0);let s=de(e,["$$slots","$$events","$$legacy"]),i=e.stroke;s={...s},s.stroke=void 0;var n=ft();let u;var g=l(t(n),2),m=t(g);y(m,"stroke",i),r(g),r(n),G(()=>u=ve(n,u,{...s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),E()}var pt=ne('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function bt(f,e){O(e,!0);let s=de(e,["$$slots","$$events","$$legacy"]),i=e.stroke;s={...s},s.stroke=void 0;var n=pt();let u;var g=l(t(n),2),m=t(g);y(m,"stroke",i),r(g),r(n),G(()=>u=ve(n,u,{...s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),E()}var kt=(f,e)=>we(`/profile/${e.user.username}`),ht=j('<span class="svelte-1x69ua7"> </span>'),xt=(f,e)=>{var s;return we(`/book/${(s=o(e))==null?void 0:s.isbn}`)},wt=j('<section class="svelte-1x69ua7"><div class="profile svelte-1x69ua7"><button class="svelte-1x69ua7"></button></div> <div class="wrapper svelte-1x69ua7"><span class="user svelte-1x69ua7"><h2 class="svelte-1x69ua7"> </h2> <h3 class="svelte-1x69ua7"> </h3></span> <div class="outer"><div class="listing svelte-1x69ua7"><div class="book-info svelte-1x69ua7"><h1 class="svelte-1x69ua7"> </h1> <h2 class="svelte-1x69ua7"> </h2> <!> <span class="svelte-1x69ua7"> </span></div> <img class="cover svelte-1x69ua7"></div> <p class="description svelte-1x69ua7"> </p></div></div></section>');function yt(f,e){O(e,!0);let s=Z(null);(async function(){B(s,ee(await We(e.isbn)))})();var i=wt(),n=t(i),u=t(n);u.__click=[kt,e],r(n);var g=l(n,2),m=t(g),C=t(m),ye=t(C,!0);r(C);var te=l(C,2),Ce=t(te,!0);r(te),r(m);var re=l(m,2),W=t(re),Y=t(W),A=t(Y),q=t(A,!0);r(A);var z=l(A,2),J=t(z,!0);r(z);var N=l(z,2);{var ae=h=>{var M=ht(),H=t(M);r(M),G(se=>{var Q;c(M,"color",se),w(H,`${((Q=o(s))==null?void 0:Q.pageCount)??""} pages`)},[()=>v().text]),_(h,M)};D(N,h=>{var M;(M=o(s))!=null&&M.pageCount&&h(ae)})}var P=l(N,2),K=t(P,!0);r(P),r(Y);var ce=l(Y,2);ce.__click=[xt,s],r(W);var I=l(W,2),Me=t(I,!0);r(I),r(re),r(g),r(i),G((h,M,H,se,Q)=>{var ue,ge,_e;c(u,"background-image",`url("${e.user.picture}")`),c(C,"color",h),w(ye,e.user.displayName),c(te,"color",M),w(Ce,`@${e.user.username}`),c(A,"color",H),w(q,(ue=o(s))==null?void 0:ue.title),c(z,"color",M),w(J,se),c(P,"color",H),w(K,Q),y(ce,"src",(ge=o(s))==null?void 0:ge.cover),c(I,"color",H),w(Me,(_e=o(s))==null?void 0:_e.description)},[()=>v().textBright,()=>v().textDim,()=>v().text,()=>{var h;return(h=o(s))==null?void 0:h.authors.join(", ")},()=>{var h;return[...((h=o(s))==null?void 0:h.genres)??[]].splice(0,2).join(", ")}]),_(f,i),E()}Ee(["click"]);var Ct=ne('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function Mt(f,e){O(e,!0);let s=de(e,["$$slots","$$events","$$legacy"]),i=e.stroke;s={...s},s.stroke=void 0;var n=Ct();let u;var g=l(t(n),2),m=t(g);y(m,"stroke",i);var C=l(m);y(C,"stroke",i),r(g),r(n),G(()=>u=ve(n,u,{...s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),E()}var St=ne('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Vt(f,e){O(e,!0);let s=de(e,["$$slots","$$events","$$legacy"]),i=e.stroke;s={...s},s.stroke=void 0;var n=St();let u;var g=l(t(n),2),m=t(g);y(m,"stroke",i);var C=l(m);y(C,"stroke",i),r(g),r(n),G(()=>u=ve(n,u,{...s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),E()}var Rt=()=>we("/"),Dt=j('<span class="dev svelte-doybg2">Dev</span>'),Bt=j('<span class="author svelte-doybg2">Author</span>'),Gt=j('<span class="mod svelte-doybg2">Moderator</span>'),Lt=()=>we("/profile/edit"),jt=j('<button class="edit-profile svelte-doybg2">Edit Profile</button>'),Ft=j('<div class="profile-actions svelte-doybg2"><button class="profile-action-follow svelte-doybg2"><!></button> <button class="profile-action svelte-doybg2"><!></button></div>'),It=j('<span class="svelte-doybg2"><!> <span class="truncate svelte-doybg2"> </span></span>'),Ht=(f,e)=>B(e,"all"),At=(f,e)=>B(e,"discussion"),Nt=(f,e)=>B(e,"ratings"),Pt=(f,e)=>B(e,"list"),Ut=j('<div class="ratings svelte-doybg2"><span class="rating-sort svelte-doybg2"><!> Best</span> <!></div>'),Zt=j('<!> <main class="svelte-doybg2"><div class="banner svelte-doybg2"></div> <button class="back-arrow svelte-doybg2"><!></button> <div class="profile svelte-doybg2"><img class="profile-picture svelte-doybg2"> <div class="profile-line-1 svelte-doybg2"><span class="name svelte-doybg2"><h1 class="svelte-doybg2"> </h1> <h2 class="svelte-doybg2"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-doybg2"><!></p> <div class="profile-line-2 svelte-doybg2"><span class="svelte-doybg2"><!> <span class="truncate svelte-doybg2"> </span></span> <!> <span class="svelte-doybg2"><!> <span> </span></span></div> <a class="follows svelte-doybg2"><span> </span> <span> </span></a> <div class="views svelte-doybg2"><button class="svelte-doybg2">All</button> <button class="svelte-doybg2">Discussion</button> <button class="svelte-doybg2">Reviews</button> <button class="svelte-doybg2">Reading List</button></div></div> <!></main>',1);function sr(f,e){O(e,!0);let s=Z(ee([])),i=Z("all"),n=Z(""),u=Z(0),g=Z(""),m=Ue(()=>{var a;return((a=$())==null?void 0:a.id)===e.user.id});(async()=>{var d;B(n,ee(((d=await it(e.user))==null?void 0:d.title)??"")),B(g,ee(e.user.currentBook?(await We(e.user.currentBook)).title:null));let a=await nt(e.user);B(s,ee(a.toSorted((p,b)=>b.timestamp-p.timestamp))),B(u,ee(o(s).filter(p=>p.type==="rating").length))})();let C=Z(null),ye=Ue(()=>{var a;return((a=$())==null?void 0:a.following.some(d=>d===e.user.id))??!1});function te(){B(C,!0),Ze({following:[...new Set([...$().following,e.user.id])]}),Oe(e.user,{followers:[...new Set([...e.user.followers,$().id])]})}function Ce(){B(C,!1),Ze({following:$().following.filter(a=>a!==e.user.id)}),Oe(e.user,{followers:e.user.followers.filter(a=>a!==$().id)})}var re=Zt(),W=U(re);ct(W,{});var Y=l(W,2),A=t(Y),q=l(A,2);q.__click=[Rt];var z=t(q);dt(z,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),r(q);var J=l(q,2),N=t(J),ae=l(N,2),P=t(ae),K=t(P),ce=t(K,!0);r(K);var I=l(K,2),Me=t(I);r(I);var h=l(I,2);{var M=a=>{var d=Dt();_(a,d)};D(h,a=>{e.user.tags.includes("dev")&&a(M)})}var H=l(h,2);{var se=a=>{var d=Bt();_(a,d)};D(H,a=>{e.user.tags.includes("author")&&a(se)})}var Q=l(H,2);{var ue=a=>{var d=Gt();_(a,d)};D(Q,a=>{e.user.tags.includes("mod")&&a(ue)})}r(P);var ge=l(P,2);{var _e=a=>{var d=jt();d.__click=[Lt],_(a,d)},Ye=a=>{var d=Ft(),p=t(d),b=t(p);{var S=k=>{Vt(k,{get stroke(){return v().textDull},style:"width: 2rem;",onclick:Ce})},V=k=>{Mt(k,{get stroke(){return v().textDull},style:"width: 2rem;",onclick:te})};D(b,k=>{o(C)||o(ye)&&o(C)!==!1?k(S):k(V,!1)})}r(p);var R=l(p,2),L=t(R);ut(L,{get stroke(){return v().textDull},style:"width: 1rem;"}),r(R),r(d),G(k=>{c(p,"border-color",k),c(R,"border-color",k)},[()=>v().textDull]),_(a,d)};D(ge,a=>{o(m)?a(_e):a(Ye,!1)})}r(ae);var fe=l(ae,2),qe=t(fe);ot(qe,()=>vt(e.user.bio)),r(fe);var Se=l(fe,2),me=t(Se),Fe=t(me);lt(Fe,{get stroke(){return v().textDull},style:"width: 1.25rem; height: 1.25rem;"});var Ve=l(Fe,2),ze=t(Ve,!0);r(Ve),r(me);var Ie=l(me,2);{var Je=a=>{var d=It(),p=t(d);mt(p,{get stroke(){return v().textDull},style:"width: 1.25rem; height: 1.25rem;"});var b=l(p,2),S=t(b,!0);r(b),r(d),G(V=>{y(d,"title",`${e.user.displayName} is currently reading ${o(g)}`),c(b,"color",V),w(S,o(g))},[()=>v().textDull]),_(a,d)};D(Ie,a=>{o(g)&&a(Je)})}var Re=l(Ie,2),He=t(Re);_t(He,{get stroke(){return v().textDull},style:"width: 1.25rem; height: 1.25rem;"});var De=l(He,2),Ke=t(De,!0);r(De),r(Re),r(Se);var T=l(Se,2),Be=t(T),Qe=t(Be);r(Be);var Ae=l(Be,2),Te=t(Ae);r(Ae),r(T);var Ne=l(T,2),pe=t(Ne);pe.__click=[Ht,i];var be=l(pe,2);be.__click=[At,i];var ke=l(be,2);ke.__click=[Nt,i];var Ge=l(ke,2);Ge.__click=[Pt,i],r(Ne),r(J);var Xe=l(J,2);{var $e=a=>{var d=X(),p=U(d);he(p,17,()=>o(s).filter(b=>b.type==="general"),xe,(b,S)=>{je(b,{get post(){return o(S)}})}),_(a,d)},et=a=>{var d=X(),p=U(d);{var b=V=>{var R=Ut(),L=t(R),k=t(L);bt(k,{get stroke(){return v().text},style:"width: 1.75rem; height: 1.75rem;"}),st(),r(L);var oe=l(L,2);he(oe,17,()=>o(s).filter(x=>x.type==="rating"),xe,(x,F)=>{je(x,{get post(){return o(F)}})}),r(R),G(x=>c(L,"color",x),[()=>v().text]),_(V,R)},S=V=>{var R=X(),L=U(R);{var k=x=>{var F=X(),le=U(F);he(le,17,()=>e.user.readingList,xe,(Le,ie)=>{yt(Le,{get isbn(){return o(ie)},get user(){return e.user}})}),_(x,F)},oe=x=>{var F=X(),le=U(F);{var Le=ie=>{var Pe=X(),tt=U(Pe);he(tt,17,()=>o(s),xe,(rt,at)=>{je(rt,{get post(){return o(at)}})}),_(ie,Pe)};D(le,ie=>{o(i)==="all"&&ie(Le)},!0)}_(x,F)};D(L,x=>{o(i)==="list"?x(k):x(oe,!1)},!0)}_(V,R)};D(p,V=>{o(i)==="ratings"?V(b):V(S,!1)},!0)}_(a,d)};D(Xe,a=>{o(i)==="discussion"?a($e):a(et,!1)})}r(Y),G((a,d,p,b,S,V,R,L,k,oe,x,F,le)=>{c(A,"background-image",`url("${e.user.banner}")`),c(J,"background",a),y(N,"src",e.user.picture),y(N,"alt",`${e.user.displayName} profile picture`),c(N,"border-color",a),c(K,"color",d),w(ce,e.user.displayName),c(I,"color",p),w(Me,`@${e.user.username??""}`),c(fe,"color",b),y(me,"title",`${e.user.displayName}'s highest rated book is ${o(n)}`),c(Ve,"color",S),w(ze,o(n)),y(Re,"title",`${e.user.displayName} has read ${o(u)} book${o(u)===1?"":"s"}`),c(De,"color",S),w(Ke,o(u)),y(T,"href",`/profile/${e.user.username}/follows`),c(T,"border-color",S),c(T,"color",S),w(Qe,`${e.user.followers.length??""} Followers`),w(Te,`${e.user.following.length??""} Following`),c(pe,"color",V),c(pe,"border-bottom",R),c(be,"color",L),c(be,"border-bottom",k),c(ke,"color",oe),c(ke,"border-bottom",x),c(Ge,"color",F),c(Ge,"border-bottom",le)},[()=>v().backgroundDark,()=>v().textBright,()=>v().textDim,()=>v().text,()=>v().textDull,()=>o(i)==="all"?v().text:v().textDim,()=>o(i)==="all"?`3px solid ${v().accent}`:"3px solid transparent",()=>o(i)==="discussion"?v().text:v().textDim,()=>o(i)==="discussion"?`3px solid ${v().accent}`:"3px solid transparent",()=>o(i)==="ratings"?v().text:v().textDim,()=>o(i)==="ratings"?`3px solid ${v().accent}`:"3px solid transparent",()=>o(i)==="list"?v().text:v().textDim,()=>o(i)==="list"?`3px solid ${v().accent}`:"3px solid transparent"]),_(f,re),E()}Ee(["click"]);export{sr as P};
