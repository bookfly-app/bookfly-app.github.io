import"./Bg9kRutz.js";import{p as X,s as n,j as a,r as s,t as x,a as Y,af as Se,g as r,d as F,f as V,ae}from"./DiqXsxXx.js";import{s as Z}from"./BuDD57Oe.js";import{a as Q}from"./B9aUA73W.js";import{p as Re,i as I}from"./B8MhMNG7.js";import{e as ce,i as he}from"./CEg9CAyN.js";import{B as wt,h as xt,A as Ve,C as Ct}from"./qtmUg0bm.js";import{a as h,n as se,t as B,c as D}from"./CBKY_uNu.js";import{s as C,a as le,G as yt,n as We,w as St,H as Rt,I as Vt,t as i,b as v,u as oe,c as Dt,g as qe,J as Ke}from"./uEAOx7Lv.js";import{d as Mt}from"./C5FOHo4g.js";import{b as Bt}from"./DfWF4Mlz.js";import{g as Te}from"./nKCNxJw8.js";import{r as ne}from"./DKOoKbnL.js";import{L as Gt}from"./D_9L0pWQ.js";import{a as $t}from"./CDksmTCw.js";import{B as Qe}from"./CZwK-8pe.js";import{R as Lt}from"./YIXKJzaq.js";var Ht=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function Ft(y,d){X(d,!0);let t=ne(d,["$$slots","$$events","$$legacy"]),u=d.stroke;t={...t},t.stroke=void 0;var c=Ht();let f;var k=n(a(c),2),b=a(k);C(b,"stroke",u);var ie=n(b);C(ie,"stroke",u),s(k),s(c),x(()=>f=le(c,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),h(y,c),Y()}var jt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function It(y,d){X(d,!0);let t=ne(d,["$$slots","$$events","$$legacy"]),u=d.stroke;t={...t},t.stroke=void 0;var c=jt();let f;var k=n(a(c),2),b=a(k);C(b,"stroke",u),s(k),s(c),x(()=>f=le(c,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),h(y,c),Y()}var Pt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Ut(y,d){X(d,!0);let t=ne(d,["$$slots","$$events","$$legacy"]),u=d.stroke;t={...t},t.stroke=void 0;var c=Pt();let f;var k=n(a(c),2),b=a(k);C(b,"stroke",u);var ie=n(b);C(ie,"stroke",u),s(k),s(c),x(()=>f=le(c,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),h(y,c),Y()}var At=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Nt(y,d){X(d,!0);let t=ne(d,["$$slots","$$events","$$legacy"]),u=d.stroke;t={...t},t.stroke=void 0;var c=At();let f;var k=n(a(c),2),b=a(k);C(b,"stroke",u),s(k),s(c),x(()=>f=le(c,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),h(y,c),Y()}var Zt=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function zt(y,d){X(d,!0);let t=ne(d,["$$slots","$$events","$$legacy"]),u=d.stroke;t={...t},t.stroke=void 0;var c=Zt();let f;var k=n(a(c),2),b=a(k);C(b,"stroke",u),s(k),s(c),x(()=>f=le(c,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),h(y,c),Y()}var Ot=se('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Et(y,d){X(d,!0);let t=ne(d,["$$slots","$$events","$$legacy"]),u=d.stroke;t={...t},t.stroke=void 0;var c=Ot();let f;var k=n(a(c),2),b=a(k);C(b,"stroke",u),s(k),s(c),x(()=>f=le(c,f,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),h(y,c),Y()}var Jt=(y,d)=>d.sidebar.show(),Wt=()=>Te("/profile/edit"),qt=B('<button class="edit-profile svelte-dhhu74">Edit Profile</button>'),Kt=B('<div class="profile-actions svelte-dhhu74"><button class="profile-action-follow svelte-dhhu74"><!></button> <button class="profile-action svelte-dhhu74"><!></button></div>'),Qt=B('<p class="bio svelte-dhhu74"><!></p>'),Tt=B('<a class="svelte-dhhu74"><!> <span class="truncate svelte-dhhu74"> </span></a>'),Xt=B('<a class="svelte-dhhu74"><!> <span class="truncate svelte-dhhu74"> </span></a>'),Yt=(y,d)=>ae(d,"books"),er=B('<a class="svelte-dhhu74"><!> <span> </span></a>'),tr=B("<span> </span>"),rr=B('<button class="svelte-dhhu74">Highest Rated</button> <button class="svelte-dhhu74">Recently Finished</button>',1),or=B('<div class="ratings svelte-dhhu74"><div class="rating-options svelte-dhhu74"><span class="svelte-dhhu74"><label for="show-full-reviews">Show full reviews</label> <!></span> <span class="svelte-dhhu74"><label for="change-rating-sort"> </label> <button id="change-rating-sort" class="svelte-dhhu74"><!></button></span> <!></div> <!></div>'),ar=B('<div class="ratings svelte-dhhu74"><!></div>'),sr=B('<div class="loading svelte-dhhu74"><h1 class="svelte-dhhu74">Loading posts...</h1> <p class="svelte-dhhu74">We promise Bookfly will be faster soon.</p></div>'),lr=B('<section class="svelte-dhhu74"><div class="banner svelte-dhhu74"></div> <button class="back-arrow svelte-dhhu74"><!></button> <div class="profile svelte-dhhu74"><img class="profile-picture svelte-dhhu74"> <div class="profile-line-1 svelte-dhhu74"><span class="name svelte-dhhu74"><h1 class="svelte-dhhu74"> </h1> <h2 class="svelte-dhhu74"> </h2> <!> <div class="dot svelte-dhhu74"></div> <h2 class="pronouns svelte-dhhu74"> </h2></span> <!></div> <!> <div class="profile-line-2 svelte-dhhu74"><!> <!> <!></div> <a class="follows svelte-dhhu74"><!> <span> </span></a> <div class="views svelte-dhhu74"><button class="svelte-dhhu74">All</button> <button class="svelte-dhhu74">Discussion</button> <button class="svelte-dhhu74">Books</button> <button class="svelte-dhhu74">Activity</button> <button class="svelte-dhhu74">List</button></div></div> <!></section>');function yr(y,d){X(d,!0);let t=d.user,u=Se(Re(new URLSearchParams(window.location.search).get("view")??"all")),c=yt(t),f=Promise.all(t.readingList.map(o=>We(o))),k=St(t),b=Rt(t),ie=F(()=>{var o;return((o=oe())==null?void 0:o.id)===t.id}),Xe=t.currentBook?We(t.currentBook):Promise.resolve(null),Ye=b.then(o=>o.filter(e=>e.type==="rating").length),De=Se(!1),ge,Me=Se("best"),et=F(()=>({best:"Highest Rated",recent:"Recently Finished"})[r(Me)]),tt=F(()=>b.then(o=>o.filter(e=>e.type==="rating").toSorted({best:(e,l)=>l.rating-e.rating,recent:(e,l)=>e.timestamp-l.timestamp}[r(Me)])));function Ie(o){return()=>{ae(Me,Re(o)),ge.close()}}let _e=Se(null),rt=F(()=>{var o;return r(_e)||(((o=oe())==null?void 0:o.following.some(e=>e===t.id))??!1)&&r(_e)===null});function ot(){ae(_e,!0),qe({following:[...new Set([...oe().following,t.id])]}),Ke(t,{followers:[...new Set([...t.followers,oe().id])]})}function at(){ae(_e,!1),qe({following:oe().following.filter(o=>o!==t.id)}),Ke(t,{followers:t.followers.filter(o=>o!==oe().id)})}function ve(o){return function(){Te(`${window.location.origin}${window.location.pathname}?${new URLSearchParams({view:o})}`),ae(u,Re(o))}}var Be=lr(),Pe=a(Be),pe=n(Pe,2);pe.__click=[Jt,d];var st=a(pe);Gt(st,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),s(pe);var fe=n(pe,2),ke=a(fe),Ge=n(ke,2),$e=a(Ge),be=a($e),lt=a(be,!0);s(be);var me=n(be,2),nt=a(me);s(me);var Ue=n(me,2);wt(Ue,{forUser:t,size:1});var Ae=n(Ue,2),Le=n(Ae,2),it=a(Le,!0);s(Le),s($e);var vt=n($e,2);{var dt=o=>{var e=qt();e.__click=[Wt],x((l,p)=>{v(e,"color",l),v(e,"background",p)},[()=>i().background,Dt]),h(o,e)},ut=o=>{var e=Kt(),l=a(e),p=a(l);{var m=_=>{Ut(_,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:at})},w=_=>{Ft(_,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:ot})};I(p,_=>{r(rt)?_(m):_(w,!1)})}s(l);var g=n(l,2),S=a(g);zt(S,{get stroke(){return i().textDull},style:"width: 1rem;"}),s(g),s(e),x(_=>{v(l,"border-color",_),v(g,"border-color",_)},[()=>i().textDull]),h(o,e)};I(vt,o=>{r(ie)?o(dt):o(ut,!1)})}s(Ge);var Ne=n(Ge,2);Q(Ne,()=>Vt(t.bio),null,(o,e)=>{var l=Qt(),p=a(l);xt(p,()=>r(e),!1,!1),s(l),x(m=>v(l,"color",m),[()=>i().text]),h(o,l)});var He=n(Ne,2),Ze=a(He);Q(Ze,()=>c,null,(o,e)=>{var l=D(),p=V(l);{var m=w=>{var g=Tt(),S=a(g);$t(S,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem; flex-shrink: 0;"});var _=n(S,2),G=a(_,!0);s(_),s(g),x(P=>{C(g,"href",`/book/${r(e).isbn}`),C(g,"title",`${t.displayName}'s highest rated book is ${r(e).title}`),v(_,"color",P),Z(G,r(e).title)},[()=>i().textDull]),h(w,g)};I(p,w=>{r(e)&&w(m)})}h(o,l)});var ze=n(Ze,2);Q(ze,()=>Xe,null,(o,e)=>{var l=D(),p=V(l);{var m=w=>{var g=Xt(),S=a(g);Nt(S,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem; flex-shrink: 0;"});var _=n(S,2),G=a(_,!0);s(_),s(g),x(P=>{C(g,"href",`/book/${r(e).isbn??""}`),C(g,"title",`${t.displayName} is currently reading ${r(e).title}`),v(_,"color",P),Z(G,r(e).title)},[()=>i().textDull]),h(w,g)};I(p,w=>{r(e)&&w(m)})}h(o,l)});var ct=n(ze,2);Q(ct,()=>Ye,null,(o,e)=>{var l=er();l.__click=[Yt,u];var p=a(l);It(p,{get stroke(){return i().textDull},style:"width: 1.25rem; height: 1.25rem;"});var m=n(p,2),w=a(m,!0);s(m),s(l),x(g=>{C(l,"href",`/profile/${t.username??""}?view=books`),C(l,"title",`${t.displayName??""} has read ${r(e)??""} book${(r(e)===1?"":"s")??""}`),v(m,"color",g),Z(w,r(e))},[()=>i().textDull]),h(o,l)}),s(He);var ee=n(He,2),Oe=a(ee);Q(Oe,()=>k,null,(o,e)=>{var l=tr(),p=a(l);s(l),x(()=>Z(p,`${r(e).length??""} Followers`)),h(o,l)});var Ee=n(Oe,2),ht=a(Ee);s(Ee),s(ee);var Je=n(ee,2),we=a(Je),gt=F(()=>ve("all"));we.__click=function(...o){var e;(e=r(gt))==null||e.apply(this,o)};var xe=n(we,2),_t=F(()=>ve("discussion"));xe.__click=function(...o){var e;(e=r(_t))==null||e.apply(this,o)};var Ce=n(xe,2),pt=F(()=>ve("books"));Ce.__click=function(...o){var e;(e=r(pt))==null||e.apply(this,o)};var ye=n(Ce,2),ft=F(()=>ve("activity"));ye.__click=function(...o){var e;(e=r(ft))==null||e.apply(this,o)};var Fe=n(ye,2),kt=F(()=>ve("list"));Fe.__click=function(...o){var e;(e=r(kt))==null||e.apply(this,o)},s(Je),s(fe);var bt=n(fe,2);Q(bt,()=>b,o=>{var e=sr(),l=a(e),p=n(l,2);s(e),x((m,w)=>{v(l,"color",m),v(p,"color",w)},[()=>i().text,()=>i().textDull]),h(o,e)},(o,e)=>{var l=D(),p=V(l);{var m=g=>{var S=D(),_=V(S);ce(_,17,()=>r(e).filter(G=>G.type==="general"),he,(G,P)=>{Ve(G,{get post(){return r(P)}})}),h(g,S)},w=g=>{var S=D(),_=V(S);{var G=z=>{var O=or(),E=a(O),te=a(E),je=n(a(te),2);Lt(je,{id:"show-full-reviews",size:.5,get on(){return r(De)},set on(R){ae(De,Re(R))}}),s(te);var $=n(te,2),U=a($),de=a(U,!0);s(U);var A=n(U,2);A.__click=R=>ge.open(R);var ue=a(A);Et(ue,{get stroke(){return i().textDull},style:"width: 1.5rem;"}),s(A),s($);var J=n($,2);Bt(Ct(J,{children:(R,N)=>{var L=rr(),M=V(L),T=F(()=>Ie("best"));M.__click=function(...K){var j;(j=r(T))==null||j.apply(this,K)};var H=n(M,2),q=F(()=>Ie("recent"));H.__click=function(...K){var j;(j=r(q))==null||j.apply(this,K)},x((K,j)=>{v(M,"color",K),v(M,"background",j),v(H,"color",K),v(H,"background",j)},[()=>i().text,()=>i().backgroundDim]),h(R,L)},$$slots:{default:!0}}),R=>ge=R,()=>ge),s(E);var W=n(E,2);Q(W,()=>r(tt),null,(R,N)=>{var L=D(),M=V(L);ce(M,17,()=>r(N),he,(T,H)=>{var q=D(),K=V(q);{var j=re=>{Ve(re,{get post(){return r(H)}})},mt=re=>{Qe(re,{get book(){return r(H).books[0]},get rating(){return r(H).rating},user:t})};I(K,re=>{r(De)?re(j):re(mt,!1)})}h(T,q)}),h(R,L)}),s(O),x((R,N)=>{v(E,"border-color",R),v(te,"color",N),v($,"color",N),Z(de,r(et))},[()=>i().textDark,()=>i().textDull]),h(z,O)},P=z=>{var O=D(),E=V(O);{var te=$=>{var U=D(),de=V(U);ce(de,17,()=>r(e).filter(A=>A.type==="update"),he,(A,ue)=>{Ve(A,{get post(){return r(ue)}})}),h($,U)},je=$=>{var U=D(),de=V(U);{var A=J=>{var W=ar(),R=a(W);Q(R,()=>f,null,(N,L)=>{var M=D(),T=V(M);ce(T,17,()=>r(L),he,(H,q)=>{Qe(H,{get book(){return r(q)},user:t})}),h(N,M)}),s(W),h(J,W)},ue=J=>{var W=D(),R=V(W);{var N=L=>{var M=D(),T=V(M);ce(T,17,()=>r(e),he,(H,q)=>{Ve(H,{get post(){return r(q)}})}),h(L,M)};I(R,L=>{r(u)==="all"&&L(N)},!0)}h(J,W)};I(de,J=>{r(u)==="list"?J(A):J(ue,!1)},!0)}h($,U)};I(E,$=>{r(u)==="activity"?$(te):$(je,!1)},!0)}h(z,O)};I(_,z=>{r(u)==="books"?z(G):z(P,!1)},!0)}h(g,S)};I(p,g=>{r(u)==="discussion"?g(m):g(w,!1)})}h(o,l)}),s(Be),x((o,e,l,p,m,w,g,S,_,G,P,z,O,E)=>{v(Pe,"background-image",`url("${t.banner}")`),v(fe,"background",o),C(ke,"src",t.picture),C(ke,"alt",`${t.displayName} profile picture`),v(ke,"border-color",o),v(be,"color",e),Z(lt,t.displayName),v(me,"color",l),Z(nt,`@${t.username??""}`),v(Ae,"background",l),v(Le,"color",l),Z(it,t.pronouns),C(ee,"href",`/profile/${t.username}/follows`),v(ee,"border-color",p),v(ee,"color",p),Z(ht,`${t.following.length??""} Following`),v(we,"color",m),v(we,"border-bottom",w),v(xe,"color",g),v(xe,"border-bottom",S),v(Ce,"color",_),v(Ce,"border-bottom",G),v(ye,"color",P),v(ye,"border-bottom",z),v(Fe,"color",O),v(Fe,"border-bottom",E)},[()=>i().backgroundDark,()=>i().textBright,()=>i().textDim,()=>i().textDull,()=>r(u)==="all"?i().text:i().textDim,()=>r(u)==="all"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(u)==="discussion"?i().text:i().textDim,()=>r(u)==="discussion"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(u)==="books"?i().text:i().textDim,()=>r(u)==="books"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(u)==="activity"?i().text:i().textDim,()=>r(u)==="activity"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(u)==="list"?i().text:i().textDim,()=>r(u)==="list"?`3px solid ${i().accent}`:"3px solid transparent"]),h(y,Be),Y()}Mt(["click"]);export{yr as P};
