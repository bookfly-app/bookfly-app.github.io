import"./Bg9kRutz.js";import{p as z,s as l,e as a,r as s,t as b,g as O,af as me,H as r,ad as B,f as R,ae as le}from"./B60NIL-c.js";import{s as j}from"./WtNTA83C.js";import{a as X}from"./Ci1U5ZIt.js";import{p as be,i as I}from"./DYFtAg2Y.js";import{e as xe,i as Ce}from"./BVGIpSUl.js";import{B as _t,h as ft,A as ye,C as wt}from"./CqUTuAg2.js";import{a as u,n as ee,t as G,c as D}from"./DyR6v0x8.js";import{s as x,a as te,F as kt,G as mt,n as bt,H as xt,t as i,b as v,u as Y,j as Ct,f as We,I as Je}from"./b27God9X.js";import{d as yt}from"./crcT5ml2.js";import{b as qt}from"./tbrsfC1P.js";import{g as je}from"./Cc6QAm8f.js";import{r as re}from"./BIEUxy6C.js";import{L as St}from"./D8FZxYiR.js";import{a as Rt}from"./BB-vqdxy.js";import{B as Vt}from"./CS2mtfsX.js";import{R as Mt}from"./CiiuQxwb.js";var Dt=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function $t(q,g){z(g,!0);let e=re(g,["$$slots","$$events","$$legacy"]),c=g.stroke;e={...e},e.stroke=void 0;var d=Dt();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",c);var oe=l(C);x(oe,"stroke",c),s(f),s(d),b(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(q,d),O()}var Bt=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Gt(q,g){z(g,!0);let e=re(g,["$$slots","$$events","$$legacy"]),c=g.stroke;e={...e},e.stroke=void 0;var d=Bt();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",c),s(f),s(d),b(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(q,d),O()}var Ht=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Lt(q,g){z(g,!0);let e=re(g,["$$slots","$$events","$$legacy"]),c=g.stroke;e={...e},e.stroke=void 0;var d=Ht();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",c);var oe=l(C);x(oe,"stroke",c),s(f),s(d),b(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(q,d),O()}var Ft=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function jt(q,g){z(g,!0);let e=re(g,["$$slots","$$events","$$legacy"]),c=g.stroke;e={...e},e.stroke=void 0;var d=Ft();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",c),s(f),s(d),b(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(q,d),O()}var It=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Pt(q,g){z(g,!0);let e=re(g,["$$slots","$$events","$$legacy"]),c=g.stroke;e={...e},e.stroke=void 0;var d=It();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",c),s(f),s(d),b(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(q,d),O()}var Ut=ee('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function At(q,g){z(g,!0);let e=re(g,["$$slots","$$events","$$legacy"]),c=g.stroke;e={...e},e.stroke=void 0;var d=Ut();let _;var f=l(a(d),2),C=a(f);x(C,"stroke",c),s(f),s(d),b(()=>_=te(d,_,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(q,d),O()}var Nt=()=>je("/"),Zt=()=>je("/profile/edit"),zt=G('<button class="edit-profile svelte-wheqt1">Edit Profile</button>'),Ot=G('<div class="profile-actions svelte-wheqt1"><button class="profile-action-follow svelte-wheqt1"><!></button> <button class="profile-action svelte-wheqt1"><!></button></div>'),Et=G('<p class="bio svelte-wheqt1"><!></p>'),Wt=G('<a class="svelte-wheqt1"><!> <span class="truncate svelte-wheqt1"> </span></a>'),Jt=G('<a class="svelte-wheqt1"><!> <span class="truncate svelte-wheqt1"> </span></a>'),Kt=G('<span class="svelte-wheqt1"><!> <span> </span></span>'),Qt=G('<button class="svelte-wheqt1">Highest Rated</button> <button class="svelte-wheqt1">Recently Finished</button>',1),Tt=G('<div class="ratings svelte-wheqt1"><div class="rating-options svelte-wheqt1"><span class="svelte-wheqt1"><label for="show-full-reviews">Show full reviews</label> <!></span> <span class="svelte-wheqt1"><label for="change-rating-sort"> </label> <button id="change-rating-sort"><!></button></span> <!></div> <!></div>'),Xt=G('<div class="loading svelte-wheqt1"><h1 class="svelte-wheqt1">Loading posts...</h1> <p class="svelte-wheqt1">We promise Bookfly will be faster soon.</p></div>'),Yt=G('<section class="svelte-wheqt1"><div class="banner svelte-wheqt1"></div> <button class="back-arrow svelte-wheqt1"><!></button> <div class="profile svelte-wheqt1"><img class="profile-picture svelte-wheqt1"> <div class="profile-line-1 svelte-wheqt1"><span class="name svelte-wheqt1"><h1 class="svelte-wheqt1"> </h1> <h2 class="svelte-wheqt1"> </h2> <!> <div class="dot svelte-wheqt1"></div> <h2 class="pronouns svelte-wheqt1"> </h2></span> <!></div> <!> <div class="profile-line-2 svelte-wheqt1"><!> <!> <!></div> <a class="follows svelte-wheqt1"><span> </span> <span> </span></a> <div class="views svelte-wheqt1"><button class="svelte-wheqt1">All</button> <button class="svelte-wheqt1">Discussion</button> <button class="svelte-wheqt1">Books</button> <button class="svelte-wheqt1">Activity</button></div></div> <!></section>');function fr(q,g){z(g,!0);let e=g.user,c=me(be(new URLSearchParams(window.location.search).get("view")??"all")),d=kt(e),_=mt(e),f=B(()=>{var o;return((o=Y())==null?void 0:o.id)===e.id}),C=e.currentBook?bt(e.currentBook):Promise.resolve(null),oe=_.then(o=>o.filter(t=>t.type==="rating").length),qe=me(!1),ne,Se=me("best"),Ke=B(()=>({best:"Highest Rated",recent:"Recently Finished"})[r(Se)]),Qe=B(()=>_.then(o=>o.filter(t=>t.type==="rating").toSorted({best:(t,n)=>n.rating-t.rating,recent:(t,n)=>t.timestamp-n.timestamp}[r(Se)])));function Ie(o){return()=>{le(Se,be(o)),ne.close()}}let ie=me(null),Te=B(()=>{var o;return r(ie)||(((o=Y())==null?void 0:o.following.some(t=>t===e.id))??!1)&&r(ie)===null});function Xe(){le(ie,!0),We({following:[...new Set([...Y().following,e.id])]}),Je(e,{followers:[...new Set([...e.followers,Y().id])]})}function Ye(){le(ie,!1),We({following:Y().following.filter(o=>o!==e.id)}),Je(e,{followers:e.followers.filter(o=>o!==Y().id)})}function ve(o){return function(){je(`${window.location.origin}${window.location.pathname}?${new URLSearchParams({view:o})}`),le(c,be(o))}}var Re=Yt(),Pe=a(Re),de=l(Pe,2);de.__click=[Nt];var et=a(de);St(et,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),s(de);var ce=l(de,2),ue=a(ce),Ve=l(ue,2),Me=a(Ve),ge=a(Me),tt=a(ge,!0);s(ge);var pe=l(ge,2),rt=a(pe);s(pe);var Ue=l(pe,2);_t(Ue,{forUser:e,size:1});var Ae=l(Ue,2),De=l(Ae,2),ot=a(De,!0);s(De),s(Me);var at=l(Me,2);{var st=o=>{var t=zt();t.__click=[Zt],b((n,w)=>{v(t,"color",n),v(t,"background",w)},[()=>i().background,Ct]),u(o,t)},lt=o=>{var t=Ot(),n=a(t),w=a(n);{var k=h=>{Lt(h,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:Ye})},m=h=>{$t(h,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:Xe})};I(w,h=>{r(Te)?h(k):h(m,!1)})}s(n);var p=l(n,2),y=a(p);Pt(y,{get stroke(){return i().textDull},style:"width: 1rem;"}),s(p),s(t),b(h=>{v(n,"border-color",h),v(p,"border-color",h)},[()=>i().textDull]),u(o,t)};I(at,o=>{r(f)?o(st):o(lt,!1)})}s(Ve);var Ne=l(Ve,2);X(Ne,()=>xt(e.bio),null,(o,t)=>{var n=Et(),w=a(n);ft(w,()=>r(t),!1,!1),s(n),b(k=>v(n,"color",k),[()=>i().text]),u(o,n)});var $e=l(Ne,2),Ze=a($e);X(Ze,()=>d,null,(o,t)=>{var n=D(),w=R(n);{var k=m=>{var p=Wt(),y=a(p);Rt(y,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var h=l(y,2),V=a(h,!0);s(h),s(p),b(H=>{x(p,"href",`/book/${r(t).isbn}`),x(p,"title",`${e.displayName}'s highest rated book is ${r(t).title}`),v(h,"color",H),j(V,r(t).title)},[()=>i().textDull]),u(m,p)};I(w,m=>{r(t)&&m(k)})}u(o,n)});var ze=l(Ze,2);X(ze,()=>C,null,(o,t)=>{var n=D(),w=R(n);{var k=m=>{var p=Jt(),y=a(p);jt(y,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var h=l(y,2),V=a(h,!0);s(h),s(p),b(H=>{x(p,"href",`/book/${r(t).isbn??""}`),x(p,"title",`${e.displayName} is currently reading ${r(t).title}`),v(h,"color",H),j(V,r(t).title)},[()=>i().textDull]),u(m,p)};I(w,m=>{r(t)&&m(k)})}u(o,n)});var nt=l(ze,2);X(nt,()=>oe,null,(o,t)=>{var n=Kt(),w=a(n);Gt(w,{get stroke(){return i().textDull},style:"width: 1.25rem; height: 1.25rem;"});var k=l(w,2),m=a(k,!0);s(k),s(n),b(p=>{x(n,"title",`${e.displayName??""} has read ${r(t)??""} book${(r(t)===1?"":"s")??""}`),v(k,"color",p),j(m,r(t))},[()=>i().textDull]),u(o,n)}),s($e);var E=l($e,2),Be=a(E),it=a(Be);s(Be);var Oe=l(Be,2),vt=a(Oe);s(Oe),s(E);var Ee=l(E,2),he=a(Ee),dt=B(()=>ve("all"));he.__click=function(...o){var t;(t=r(dt))==null||t.apply(this,o)};var _e=l(he,2),ct=B(()=>ve("discussion"));_e.__click=function(...o){var t;(t=r(ct))==null||t.apply(this,o)};var fe=l(_e,2),ut=B(()=>ve("books"));fe.__click=function(...o){var t;(t=r(ut))==null||t.apply(this,o)};var Ge=l(fe,2),gt=B(()=>ve("activity"));Ge.__click=function(...o){var t;(t=r(gt))==null||t.apply(this,o)},s(Ee),s(ce);var pt=l(ce,2);X(pt,()=>_,o=>{var t=Xt(),n=a(t),w=l(n,2);s(t),b((k,m)=>{v(n,"color",k),v(w,"color",m)},[()=>i().text,()=>i().textDull]),u(o,t)},(o,t)=>{var n=D(),w=R(n);{var k=p=>{var y=D(),h=R(y);xe(h,17,()=>r(t).filter(V=>V.type==="general"),Ce,(V,H)=>{ye(V,{get post(){return r(H)}})}),u(p,y)},m=p=>{var y=D(),h=R(y);{var V=P=>{var W=Tt(),J=a(W),K=a(J),He=l(a(K),2);Mt(He,{id:"show-full-reviews",size:.5,get on(){return r(qe)},set on(S){le(qe,be(S))}}),s(K);var M=l(K,2),L=a(M),ae=a(L,!0);s(L);var F=l(L,2);F.__click=S=>ne.open(S);var A=a(F);At(A,{get stroke(){return i().textDull},style:"width: 1.5rem;"}),s(F),s(M);var we=l(M,2);qt(wt(we,{children:(S,N)=>{var se=Qt(),Q=R(se),Fe=B(()=>Ie("best"));Q.__click=function(...U){var $;($=r(Fe))==null||$.apply(this,U)};var Z=l(Q,2),ke=B(()=>Ie("recent"));Z.__click=function(...U){var $;($=r(ke))==null||$.apply(this,U)},b((U,$)=>{v(Q,"color",U),v(Q,"background",$),v(Z,"color",U),v(Z,"background",$)},[()=>i().text,()=>i().backgroundDim]),u(S,se)},$$slots:{default:!0}}),S=>ne=S,()=>ne),s(J);var Le=l(J,2);X(Le,()=>r(Qe),null,(S,N)=>{var se=D(),Q=R(se);xe(Q,17,()=>r(N),Ce,(Fe,Z)=>{var ke=D(),U=R(ke);{var $=T=>{ye(T,{get post(){return r(Z)}})},ht=T=>{Vt(T,{get book(){return r(Z).books[0]},get rating(){return r(Z).rating},user:e})};I(U,T=>{r(qe)?T($):T(ht,!1)})}u(Fe,ke)}),u(S,se)}),s(W),b((S,N)=>{v(J,"border-color",S),v(K,"color",N),v(M,"color",N),j(ae,r(Ke))},[()=>i().textDark,()=>i().textDull]),u(P,W)},H=P=>{var W=D(),J=R(W);{var K=M=>{var L=D(),ae=R(L);xe(ae,17,()=>r(t).filter(F=>F.type==="update"),Ce,(F,A)=>{ye(F,{get post(){return r(A)}})}),u(M,L)},He=M=>{var L=D(),ae=R(L);{var F=A=>{var we=D(),Le=R(we);xe(Le,17,()=>r(t),Ce,(S,N)=>{ye(S,{get post(){return r(N)}})}),u(A,we)};I(ae,A=>{r(c)==="all"&&A(F)},!0)}u(M,L)};I(J,M=>{r(c)==="activity"?M(K):M(He,!1)},!0)}u(P,W)};I(h,P=>{r(c)==="books"?P(V):P(H,!1)},!0)}u(p,y)};I(w,p=>{r(c)==="discussion"?p(k):p(m,!1)})}u(o,n)}),s(Re),b((o,t,n,w,k,m,p,y,h,V,H,P)=>{v(Pe,"background-image",`url("${e.banner}")`),v(ce,"background",o),x(ue,"src",e.picture),x(ue,"alt",`${e.displayName} profile picture`),v(ue,"border-color",o),v(ge,"color",t),j(tt,e.displayName),v(pe,"color",n),j(rt,`@${e.username??""}`),v(Ae,"background",n),v(De,"color",n),j(ot,e.pronouns),x(E,"href",`/profile/${e.username}/follows`),v(E,"border-color",w),v(E,"color",w),j(it,`${e.followers.length??""} Followers`),j(vt,`${e.following.length??""} Following`),v(he,"color",k),v(he,"border-bottom",m),v(_e,"color",p),v(_e,"border-bottom",y),v(fe,"color",h),v(fe,"border-bottom",V),v(Ge,"color",H),v(Ge,"border-bottom",P)},[()=>i().backgroundDark,()=>i().textBright,()=>i().textDim,()=>i().textDull,()=>r(c)==="all"?i().text:i().textDim,()=>r(c)==="all"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(c)==="discussion"?i().text:i().textDim,()=>r(c)==="discussion"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(c)==="books"?i().text:i().textDim,()=>r(c)==="books"?`3px solid ${i().accent}`:"3px solid transparent",()=>r(c)==="activity"?i().text:i().textDim,()=>r(c)==="activity"?`3px solid ${i().accent}`:"3px solid transparent"]),u(q,Re),O()}yt(["click"]);export{fr as P};
