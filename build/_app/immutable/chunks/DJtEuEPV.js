import{a as u,n as ve,t as L,c as H}from"./CbWYkoq1.js";import{o as J,v as l,w as r,x as a,t as S,u as K,a9 as E,I as o,am as Fe,al as I,ai as Oe,az as tt}from"./PerO79jO.js";import{s as y}from"./C0lN6YrG.js";import{a as ke}from"./BeWPpG_o.js";import{i as G}from"./Efaoq--R.js";import{e as pe,i as be}from"./CIoGpdJn.js";import{h as rt,S as at,A as Ie}from"./BsoOBcRf.js";import{s as M,a as ce}from"./Dp0rzYFF.js";import{d as ze}from"./ANvJsBAK.js";import{t as i,s as c}from"./DOlxBVF0.js";import{g as Ce}from"./_y_IYZP9.js";import{b as Ee,q as st,r as ot,g as ae,t as lt,h as Ze,v as qe}from"./CxZcCfUc.js";import{r as ue}from"./dXC5txAM.js";import{L as nt}from"./CgBGE8h6.js";import{M as it}from"./BlcDXQHo.js";import{B as vt}from"./CVbZ-Hxy.js";import{p as ct}from"./BJKYJlHz.js";var ut=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function dt(f,e){J(e,!0);let t=ue(e,["$$slots","$$events","$$legacy"]),w=e.stroke;t={...t},t.stroke=void 0;var v=ut();let h;var x=l(r(v),2),m=r(x);M(m,"stroke",w);var D=l(m);M(D,"stroke",w),a(x),a(v),S(()=>h=ce(v,h,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(f,v),K()}var gt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function _t(f,e){J(e,!0);let t=ue(e,["$$slots","$$events","$$legacy"]),w=e.stroke;t={...t},t.stroke=void 0;var v=gt();let h;var x=l(r(v),2),m=r(x);M(m,"stroke",w),a(x),a(v),S(()=>h=ce(v,h,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(f,v),K()}var ft=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ht(f,e){J(e,!0);let t=ue(e,["$$slots","$$events","$$legacy"]),w=e.stroke;t={...t},t.stroke=void 0;var v=ft();let h;var x=l(r(v),2),m=r(x);M(m,"stroke",w);var D=l(m);M(D,"stroke",w),a(x),a(v),S(()=>h=ce(v,h,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(f,v),K()}var xt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function wt(f,e){J(e,!0);let t=ue(e,["$$slots","$$events","$$legacy"]),w=e.stroke;t={...t},t.stroke=void 0;var v=xt();let h;var x=l(r(v),2),m=r(x);M(m,"stroke",w),a(x),a(v),S(()=>h=ce(v,h,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(f,v),K()}var mt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function kt(f,e){J(e,!0);let t=ue(e,["$$slots","$$events","$$legacy"]),w=e.stroke;t={...t},t.stroke=void 0;var v=mt();let h;var x=l(r(v),2),m=r(x);M(m,"stroke",w),a(x),a(v),S(()=>h=ce(v,h,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),u(f,v),K()}var pt=(f,e)=>Ce(`/profile/${e.user.username}`),bt=L('<span class="svelte-1x69ua7"> </span>'),Ct=(f,e)=>{var t;return Ce(`/book/${(t=o(e))==null?void 0:t.isbn}`)},yt=L('<section class="svelte-1x69ua7"><div class="profile svelte-1x69ua7"><button class="svelte-1x69ua7"></button></div> <div class="wrapper svelte-1x69ua7"><span class="user svelte-1x69ua7"><h2 class="svelte-1x69ua7"> </h2> <h3 class="svelte-1x69ua7"> </h3></span> <div class="outer"><div class="listing svelte-1x69ua7"><div class="book-info svelte-1x69ua7"><h1 class="svelte-1x69ua7"> </h1> <h2 class="svelte-1x69ua7"> </h2> <!> <span class="svelte-1x69ua7"> </span></div> <img class="cover svelte-1x69ua7"></div> <p class="description svelte-1x69ua7"> </p></div></div></section>');function Mt(f,e){J(e,!0);let t=Fe(null);(async function(){E(t,ct(await Ee(e.isbn)))})();var w=yt(),v=r(w),h=r(v);h.__click=[pt,e],a(v);var x=l(v,2),m=r(x),D=r(m),ye=r(D,!0);a(D);var se=l(D,2),Me=r(se,!0);a(se),a(m);var oe=l(m,2),Q=r(oe),T=r(Q),O=r(T),W=r(O,!0);a(O);var X=l(O,2),Y=r(X,!0);a(X);var Z=l(X,2);{var le=b=>{var V=bt(),N=r(V);a(V),S(ne=>{var ee;c(V,"color",ne),y(N,`${((ee=o(t))==null?void 0:ee.pageCount)??""} pages`)},[()=>i().text]),u(b,V)};G(Z,b=>{var V;(V=o(t))!=null&&V.pageCount&&b(le)})}var q=l(Z,2),$=r(q,!0);a(q),a(T);var de=l(T,2);de.__click=[Ct,t],a(Q);var A=l(Q,2),De=r(A,!0);a(A),a(oe),a(x),a(w),S((b,V,N,ne,ee)=>{var ge,_e,fe;c(h,"background-image",`url("${e.user.picture}")`),c(D,"color",b),y(ye,e.user.displayName),c(se,"color",V),y(Me,`@${e.user.username}`),c(O,"color",N),y(W,(ge=o(t))==null?void 0:ge.title),c(X,"color",V),y(Y,ne),c(q,"color",N),y($,ee),M(de,"src",(_e=o(t))==null?void 0:_e.cover),c(A,"color",N),y(De,(fe=o(t))==null?void 0:fe.description)},[()=>i().textBright,()=>i().textDim,()=>i().text,()=>{var b;return(b=o(t))==null?void 0:b.authors.join(", ")},()=>{var b;return[...((b=o(t))==null?void 0:b.genres)??[]].splice(0,2).join(", ")}]),u(f,w),K()}ze(["click"]);var Dt=()=>Ce("/"),St=L('<span class="dev svelte-nafwxh">Dev</span>'),Vt=L('<span class="author svelte-nafwxh">Author</span>'),Rt=L('<span class="mod svelte-nafwxh">Moderator</span>'),Bt=()=>Ce("/profile/edit"),Gt=L('<button class="edit-profile svelte-nafwxh">Edit Profile</button>'),Lt=L('<div class="profile-actions svelte-nafwxh"><button class="profile-action-follow svelte-nafwxh"><!></button> <button class="profile-action svelte-nafwxh"><!></button></div>'),jt=L('<span class="svelte-nafwxh"><!> <span class="truncate svelte-nafwxh"> </span></span>'),It=L('<span class="svelte-nafwxh"><!> <span class="truncate svelte-nafwxh"> </span></span>'),Ft=L('<span class="svelte-nafwxh"><!> <span> </span></span>'),Ht=(f,e)=>E(e,"all"),At=(f,e)=>E(e,"discussion"),Nt=(f,e)=>E(e,"ratings"),Pt=(f,e)=>E(e,"list"),Ut=L('<div class="ratings svelte-nafwxh"><span class="rating-sort svelte-nafwxh"><!> Best</span> <!></div>'),Ot=L('<!> <main class="svelte-nafwxh"><div class="banner svelte-nafwxh"></div> <button class="back-arrow svelte-nafwxh"><!></button> <div class="profile svelte-nafwxh"><img class="profile-picture svelte-nafwxh"> <div class="profile-line-1 svelte-nafwxh"><span class="name svelte-nafwxh"><h1 class="svelte-nafwxh"> </h1> <h2 class="svelte-nafwxh"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-nafwxh"><!></p> <div class="profile-line-2 svelte-nafwxh"><!> <!> <!></div> <a class="follows svelte-nafwxh"><span> </span> <span> </span></a> <div class="views svelte-nafwxh"><button class="svelte-nafwxh">All</button> <button class="svelte-nafwxh">Discussion</button> <button class="svelte-nafwxh">Reviews</button> <button class="svelte-nafwxh">Reading List</button></div></div> <!></main>',1);function or(f,e){J(e,!0);let t=Fe("all"),w=st(e.user),v=ot(e.user),h=Oe(()=>{var s;return((s=ae())==null?void 0:s.id)===e.user.id}),x=e.user.currentBook?Ee(e.user.currentBook).then(s=>s.title):Promise.resolve(null),m=v.then(s=>s.filter(n=>n.type==="rating").length),D=Fe(null),ye=Oe(()=>{var s;return o(D)||(((s=ae())==null?void 0:s.following.some(n=>n===e.user.id))??!1)&&o(D)===null});function se(){E(D,!0),Ze({following:[...new Set([...ae().following,e.user.id])]}),qe(e.user,{followers:[...new Set([...e.user.followers,ae().id])]})}function Me(){E(D,!1),Ze({following:ae().following.filter(s=>s!==e.user.id)}),qe(e.user,{followers:e.user.followers.filter(s=>s!==ae().id)})}var oe=Ot(),Q=I(oe);vt(Q,{});var T=l(Q,2),O=r(T),W=l(O,2);W.__click=[Dt];var X=r(W);nt(X,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),a(W);var Y=l(W,2),Z=r(Y),le=l(Z,2),q=r(le),$=r(q),de=r($,!0);a($);var A=l($,2),De=r(A);a(A);var b=l(A,2);{var V=s=>{var n=St();u(s,n)};G(b,s=>{e.user.tags.includes("dev")&&s(V)})}var N=l(b,2);{var ne=s=>{var n=Vt();u(s,n)};G(N,s=>{e.user.tags.includes("author")&&s(ne)})}var ee=l(N,2);{var ge=s=>{var n=Rt();u(s,n)};G(ee,s=>{e.user.tags.includes("mod")&&s(ge)})}a(q);var _e=l(q,2);{var fe=s=>{var n=Gt();n.__click=[Bt],u(s,n)},Je=s=>{var n=Lt(),_=r(n),R=r(_);{var C=g=>{ht(g,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:Me})},k=g=>{dt(g,{get stroke(){return i().textDull},style:"width: 2rem;",onclick:se})};G(R,g=>{o(ye)?g(C):g(k,!1)})}a(_);var d=l(_,2),p=r(d);it(p,{get stroke(){return i().textDull},style:"width: 1rem;"}),a(d),a(n),S(g=>{c(_,"border-color",g),c(d,"border-color",g)},[()=>i().textDull]),u(s,n)};G(_e,s=>{o(h)?s(fe):s(Je,!1)})}a(le);var he=l(le,2),Ke=r(he);rt(Ke,()=>lt(e.user.bio)),a(he);var Se=l(he,2),He=r(Se);ke(He,()=>w,null,(s,n)=>{var _=H(),R=I(_);{var C=k=>{var d=jt(),p=r(d);at(p,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var g=l(p,2),j=r(g,!0);a(g),a(d),S(F=>{M(d,"title",`${e.user.displayName}'s highest rated book is ${o(n).title}`),c(g,"color",F),y(j,o(n).title)},[()=>i().textDull]),u(k,d)};G(R,k=>{o(n)&&k(C)})}u(s,_)});var Ae=l(He,2);ke(Ae,()=>x,null,(s,n)=>{var _=H(),R=I(_);{var C=k=>{var d=It(),p=r(d);wt(p,{get stroke(){return i().textDull},style:"width: 1rem; height: 1rem;"});var g=l(p,2),j=r(g,!0);a(g),a(d),S(F=>{M(d,"title",`${e.user.displayName} is currently reading ${o(n)}`),c(g,"color",F),y(j,o(n))},[()=>i().textDull]),u(k,d)};G(R,k=>{o(n)&&k(C)})}u(s,_)});var Qe=l(Ae,2);ke(Qe,()=>m,null,(s,n)=>{var _=Ft(),R=r(_);_t(R,{get stroke(){return i().textDull},style:"width: 1.25rem; height: 1.25rem;"});var C=l(R,2),k=r(C,!0);a(C),a(_),S(d=>{M(_,"title",`${e.user.displayName} has read ${o(n)} book${o(n)===1?"":"s"}`),c(C,"color",d),y(k,o(n))},[()=>i().textDull]),u(s,_)}),a(Se);var te=l(Se,2),Ve=r(te),Te=r(Ve);a(Ve);var Ne=l(Ve,2),We=r(Ne);a(Ne),a(te);var Pe=l(te,2),xe=r(Pe);xe.__click=[Ht,t];var we=l(xe,2);we.__click=[At,t];var me=l(we,2);me.__click=[Nt,t];var Re=l(me,2);Re.__click=[Pt,t],a(Pe),a(Y);var Xe=l(Y,2);ke(Xe,()=>v,null,(s,n)=>{var _=H(),R=I(_);{var C=d=>{var p=H(),g=I(p);pe(g,17,()=>o(n).filter(j=>j.type==="general"),be,(j,F)=>{Ie(j,{get post(){return o(F)}})}),u(d,p)},k=d=>{var p=H(),g=I(p);{var j=P=>{var U=Ut(),re=r(U),Be=r(re);kt(Be,{get stroke(){return i().text},style:"width: 1.75rem; height: 1.75rem;"}),tt(),a(re);var Ge=l(re,2);pe(Ge,17,()=>o(n).filter(B=>B.type==="rating"),be,(B,z)=>{Ie(B,{get post(){return o(z)}})}),a(U),S(B=>c(re,"color",B),[()=>i().text]),u(P,U)},F=P=>{var U=H(),re=I(U);{var Be=B=>{var z=H(),Le=I(z);pe(Le,17,()=>e.user.readingList,be,(je,ie)=>{Mt(je,{get isbn(){return o(ie)},get user(){return e.user}})}),u(B,z)},Ge=B=>{var z=H(),Le=I(z);{var je=ie=>{var Ue=H(),Ye=I(Ue);pe(Ye,17,()=>o(n),be,($e,et)=>{Ie($e,{get post(){return o(et)}})}),u(ie,Ue)};G(Le,ie=>{o(t)==="all"&&ie(je)},!0)}u(B,z)};G(re,B=>{o(t)==="list"?B(Be):B(Ge,!1)},!0)}u(P,U)};G(g,P=>{o(t)==="ratings"?P(j):P(F,!1)},!0)}u(d,p)};G(R,d=>{o(t)==="discussion"?d(C):d(k,!1)})}u(s,_)}),a(T),S((s,n,_,R,C,k,d,p,g,j,F,P,U)=>{c(O,"background-image",`url("${e.user.banner}")`),c(Y,"background",s),M(Z,"src",e.user.picture),M(Z,"alt",`${e.user.displayName} profile picture`),c(Z,"border-color",s),c($,"color",n),y(de,e.user.displayName),c(A,"color",_),y(De,`@${e.user.username??""}`),c(he,"color",R),M(te,"href",`/profile/${e.user.username}/follows`),c(te,"border-color",C),c(te,"color",C),y(Te,`${e.user.followers.length??""} Followers`),y(We,`${e.user.following.length??""} Following`),c(xe,"color",k),c(xe,"border-bottom",d),c(we,"color",p),c(we,"border-bottom",g),c(me,"color",j),c(me,"border-bottom",F),c(Re,"color",P),c(Re,"border-bottom",U)},[()=>i().backgroundDark,()=>i().textBright,()=>i().textDim,()=>i().text,()=>i().textDull,()=>o(t)==="all"?i().text:i().textDim,()=>o(t)==="all"?`3px solid ${i().accent}`:"3px solid transparent",()=>o(t)==="discussion"?i().text:i().textDim,()=>o(t)==="discussion"?`3px solid ${i().accent}`:"3px solid transparent",()=>o(t)==="ratings"?i().text:i().textDim,()=>o(t)==="ratings"?`3px solid ${i().accent}`:"3px solid transparent",()=>o(t)==="list"?i().text:i().textDim,()=>o(t)==="list"?`3px solid ${i().accent}`:"3px solid transparent"]),u(f,oe),K()}ze(["click"]);export{or as P};
