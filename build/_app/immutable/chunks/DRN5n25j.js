import"./Bg9kRutz.js";import{p as z,s,e as o,r as a,t as x,g as O,H as t,ae as A,af as ke,ad as X,f as R}from"./B60NIL-c.js";import{s as F}from"./WtNTA83C.js";import{a as Y}from"./Ci1U5ZIt.js";import{i as j,p as ze}from"./DYFtAg2Y.js";import{e as me,i as be}from"./BVGIpSUl.js";import{B as ct,h as ut,A as xe,C as gt}from"./C2ANBjpT.js";import{a as g,n as te,t as G,c as D}from"./DyR6v0x8.js";import{s as C,a as re,F as pt,G as _t,n as ht,H as ft,t as n,b as d,u as ee,j as wt,f as Oe,I as Ee}from"./b27God9X.js";import{d as kt}from"./crcT5ml2.js";import{b as mt}from"./tbrsfC1P.js";import{g as We}from"./BPxXHxJL.js";import{r as oe}from"./BIEUxy6C.js";import{L as bt}from"./D8FZxYiR.js";import{a as xt}from"./BB-vqdxy.js";import{B as Ct}from"./CS2mtfsX.js";import{R as yt}from"./CiiuQxwb.js";var qt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function St(k,v){z(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),u=v.stroke;e={...e},e.stroke=void 0;var c=qt();let h;var f=s(o(c),2),y=o(f);C(y,"stroke",u);var ae=s(y);C(ae,"stroke",u),a(f),a(c),x(()=>h=re(c,h,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),g(k,c),O()}var Rt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Vt(k,v){z(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),u=v.stroke;e={...e},e.stroke=void 0;var c=Rt();let h;var f=s(o(c),2),y=o(f);C(y,"stroke",u),a(f),a(c),x(()=>h=re(c,h,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),g(k,c),O()}var Mt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Dt(k,v){z(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),u=v.stroke;e={...e},e.stroke=void 0;var c=Mt();let h;var f=s(o(c),2),y=o(f);C(y,"stroke",u);var ae=s(y);C(ae,"stroke",u),a(f),a(c),x(()=>h=re(c,h,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),g(k,c),O()}var Bt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Gt(k,v){z(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),u=v.stroke;e={...e},e.stroke=void 0;var c=Bt();let h;var f=s(o(c),2),y=o(f);C(y,"stroke",u),a(f),a(c),x(()=>h=re(c,h,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),g(k,c),O()}var $t=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Ht(k,v){z(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),u=v.stroke;e={...e},e.stroke=void 0;var c=$t();let h;var f=s(o(c),2),y=o(f);C(y,"stroke",u),a(f),a(c),x(()=>h=re(c,h,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),g(k,c),O()}var Lt=te('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Ft(k,v){z(v,!0);let e=oe(v,["$$slots","$$events","$$legacy"]),u=v.stroke;e={...e},e.stroke=void 0;var c=Lt();let h;var f=s(o(c),2),y=o(f);C(y,"stroke",u),a(f),a(c),x(()=>h=re(c,h,{...e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),g(k,c),O()}var jt=()=>We("/"),It=()=>We("/profile/edit"),Pt=G('<button class="edit-profile svelte-wheqt1">Edit Profile</button>'),At=G('<div class="profile-actions svelte-wheqt1"><button class="profile-action-follow svelte-wheqt1"><!></button> <button class="profile-action svelte-wheqt1"><!></button></div>'),Nt=G('<p class="bio svelte-wheqt1"><!></p>'),Ut=G('<a class="svelte-wheqt1"><!> <span class="truncate svelte-wheqt1"> </span></a>'),Zt=G('<a class="svelte-wheqt1"><!> <span class="truncate svelte-wheqt1"> </span></a>'),zt=G('<span class="svelte-wheqt1"><!> <span> </span></span>'),Ot=(k,v)=>A(v,"all"),Et=(k,v)=>A(v,"discussion"),Wt=(k,v)=>A(v,"ratings"),Jt=(k,v)=>A(v,"activity"),Kt=G('<button class="svelte-wheqt1">Highest Rated</button> <button class="svelte-wheqt1">Recently Finished</button>',1),Qt=G('<div class="ratings svelte-wheqt1"><div class="rating-options svelte-wheqt1"><span class="svelte-wheqt1"><label for="show-full-reviews">Show full reviews</label> <!></span> <span class="svelte-wheqt1"><label for="change-rating-sort"> </label> <button id="change-rating-sort"><!></button></span> <!></div> <!></div>'),Tt=G('<div class="loading svelte-wheqt1"><h1 class="svelte-wheqt1">Loading posts...</h1> <p class="svelte-wheqt1">We promise Bookfly will be faster soon.</p></div>'),Xt=G('<section class="svelte-wheqt1"><div class="banner svelte-wheqt1"></div> <button class="back-arrow svelte-wheqt1"><!></button> <div class="profile svelte-wheqt1"><img class="profile-picture svelte-wheqt1"> <div class="profile-line-1 svelte-wheqt1"><span class="name svelte-wheqt1"><h1 class="svelte-wheqt1"> </h1> <h2 class="svelte-wheqt1"> </h2> <!> <div class="dot svelte-wheqt1"></div> <h2 class="pronouns svelte-wheqt1"> </h2></span> <!></div> <!> <div class="profile-line-2 svelte-wheqt1"><!> <!> <!></div> <a class="follows svelte-wheqt1"><span> </span> <span> </span></a> <div class="views svelte-wheqt1"><button class="svelte-wheqt1">All</button> <button class="svelte-wheqt1">Discussion</button> <button class="svelte-wheqt1">Books</button> <button class="svelte-wheqt1">Activity</button></div></div> <!></section>');function hr(k,v){z(v,!0);let e=v.user,u=ke("all"),c=pt(e),h=_t(e),f=X(()=>{var l;return((l=ee())==null?void 0:l.id)===e.id}),y=e.currentBook?ht(e.currentBook):Promise.resolve(null),ae=h.then(l=>l.filter(r=>r.type==="rating").length),Ce=ke(!1),ie,ye=ke("best"),Je=X(()=>({best:"Highest Rated",recent:"Recently Finished"})[t(ye)]),Ke=X(()=>h.then(l=>l.filter(r=>r.type==="rating").toSorted({best:(r,i)=>i.rating-r.rating,recent:(r,i)=>r.timestamp-i.timestamp}[t(ye)])));function Le(l){return()=>{A(ye,ze(l)),ie.close()}}let ne=ke(null),Qe=X(()=>{var l;return t(ne)||(((l=ee())==null?void 0:l.following.some(r=>r===e.id))??!1)&&t(ne)===null});function Te(){A(ne,!0),Oe({following:[...new Set([...ee().following,e.id])]}),Ee(e,{followers:[...new Set([...e.followers,ee().id])]})}function Xe(){A(ne,!1),Oe({following:ee().following.filter(l=>l!==e.id)}),Ee(e,{followers:e.followers.filter(l=>l!==ee().id)})}var qe=Xt(),Fe=o(qe),ve=s(Fe,2);ve.__click=[jt];var Ye=o(ve);bt(Ye,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),a(ve);var de=s(ve,2),ce=o(de),Se=s(ce,2),Re=o(Se),ue=o(Re),et=o(ue,!0);a(ue);var ge=s(ue,2),tt=o(ge);a(ge);var je=s(ge,2);ct(je,{forUser:e,size:1});var Ie=s(je,2),Ve=s(Ie,2),rt=o(Ve,!0);a(Ve),a(Re);var ot=s(Re,2);{var at=l=>{var r=Pt();r.__click=[It],x((i,w)=>{d(r,"color",i),d(r,"background",w)},[()=>n().background,wt]),g(l,r)},st=l=>{var r=At(),i=o(r),w=o(i);{var m=_=>{Dt(_,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:Xe})},b=_=>{St(_,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:Te})};j(w,_=>{t(Qe)?_(m):_(b,!1)})}a(i);var p=s(i,2),q=o(p);Ht(q,{get stroke(){return n().textDull},style:"width: 1rem;"}),a(p),a(r),x(_=>{d(i,"border-color",_),d(p,"border-color",_)},[()=>n().textDull]),g(l,r)};j(ot,l=>{t(f)?l(at):l(st,!1)})}a(Se);var Pe=s(Se,2);Y(Pe,()=>ft(e.bio),null,(l,r)=>{var i=Nt(),w=o(i);ut(w,()=>t(r),!1,!1),a(i),x(m=>d(i,"color",m),[()=>n().text]),g(l,i)});var Me=s(Pe,2),Ae=o(Me);Y(Ae,()=>c,null,(l,r)=>{var i=D(),w=R(i);{var m=b=>{var p=Ut(),q=o(p);xt(q,{get stroke(){return n().textDull},style:"width: 1rem; height: 1rem;"});var _=s(q,2),V=o(_,!0);a(_),a(p),x($=>{C(p,"href",`/book/${t(r).isbn}`),C(p,"title",`${e.displayName}'s highest rated book is ${t(r).title}`),d(_,"color",$),F(V,t(r).title)},[()=>n().textDull]),g(b,p)};j(w,b=>{t(r)&&b(m)})}g(l,i)});var Ne=s(Ae,2);Y(Ne,()=>y,null,(l,r)=>{var i=D(),w=R(i);{var m=b=>{var p=Zt(),q=o(p);Gt(q,{get stroke(){return n().textDull},style:"width: 1rem; height: 1rem;"});var _=s(q,2),V=o(_,!0);a(_),a(p),x($=>{C(p,"href",`/book/${t(r).isbn??""}`),C(p,"title",`${e.displayName} is currently reading ${t(r).title}`),d(_,"color",$),F(V,t(r).title)},[()=>n().textDull]),g(b,p)};j(w,b=>{t(r)&&b(m)})}g(l,i)});var lt=s(Ne,2);Y(lt,()=>ae,null,(l,r)=>{var i=zt(),w=o(i);Vt(w,{get stroke(){return n().textDull},style:"width: 1.25rem; height: 1.25rem;"});var m=s(w,2),b=o(m,!0);a(m),a(i),x(p=>{C(i,"title",`${e.displayName??""} has read ${t(r)??""} book${(t(r)===1?"":"s")??""}`),d(m,"color",p),F(b,t(r))},[()=>n().textDull]),g(l,i)}),a(Me);var E=s(Me,2),De=o(E),it=o(De);a(De);var Ue=s(De,2),nt=o(Ue);a(Ue),a(E);var Ze=s(E,2),pe=o(Ze);pe.__click=[Ot,u];var _e=s(pe,2);_e.__click=[Et,u];var he=s(_e,2);he.__click=[Wt,u];var Be=s(he,2);Be.__click=[Jt,u],a(Ze),a(de);var vt=s(de,2);Y(vt,()=>h,l=>{var r=Tt(),i=o(r),w=s(i,2);a(r),x((m,b)=>{d(i,"color",m),d(w,"color",b)},[()=>n().text,()=>n().textDull]),g(l,r)},(l,r)=>{var i=D(),w=R(i);{var m=p=>{var q=D(),_=R(q);me(_,17,()=>t(r).filter(V=>V.type==="general"),be,(V,$)=>{xe(V,{get post(){return t($)}})}),g(p,q)},b=p=>{var q=D(),_=R(q);{var V=I=>{var W=Qt(),J=o(W),K=o(J),Ge=s(o(K),2);yt(Ge,{id:"show-full-reviews",size:.5,get on(){return t(Ce)},set on(S){A(Ce,ze(S))}}),a(K);var M=s(K,2),H=o(M),se=o(H,!0);a(H);var L=s(H,2);L.__click=S=>ie.open(S);var N=o(L);Ft(N,{get stroke(){return n().textDull},style:"width: 1.5rem;"}),a(L),a(M);var fe=s(M,2);mt(gt(fe,{children:(S,U)=>{var le=Kt(),Q=R(le),He=X(()=>Le("best"));Q.__click=function(...P){var B;(B=t(He))==null||B.apply(this,P)};var Z=s(Q,2),we=X(()=>Le("recent"));Z.__click=function(...P){var B;(B=t(we))==null||B.apply(this,P)},x((P,B)=>{d(Q,"color",P),d(Q,"background",B),d(Z,"color",P),d(Z,"background",B)},[()=>n().text,()=>n().backgroundDim]),g(S,le)},$$slots:{default:!0}}),S=>ie=S,()=>ie),a(J);var $e=s(J,2);Y($e,()=>t(Ke),null,(S,U)=>{var le=D(),Q=R(le);me(Q,17,()=>t(U),be,(He,Z)=>{var we=D(),P=R(we);{var B=T=>{xe(T,{get post(){return t(Z)}})},dt=T=>{Ct(T,{get book(){return t(Z).books[0]},get rating(){return t(Z).rating},user:e})};j(P,T=>{t(Ce)?T(B):T(dt,!1)})}g(He,we)}),g(S,le)}),a(W),x((S,U)=>{d(J,"border-color",S),d(K,"color",U),d(M,"color",U),F(se,t(Je))},[()=>n().textDark,()=>n().textDull]),g(I,W)},$=I=>{var W=D(),J=R(W);{var K=M=>{var H=D(),se=R(H);me(se,17,()=>t(r).filter(L=>L.type==="update"),be,(L,N)=>{xe(L,{get post(){return t(N)}})}),g(M,H)},Ge=M=>{var H=D(),se=R(H);{var L=N=>{var fe=D(),$e=R(fe);me($e,17,()=>t(r),be,(S,U)=>{xe(S,{get post(){return t(U)}})}),g(N,fe)};j(se,N=>{t(u)==="all"&&N(L)},!0)}g(M,H)};j(J,M=>{t(u)==="activity"?M(K):M(Ge,!1)},!0)}g(I,W)};j(_,I=>{t(u)==="ratings"?I(V):I($,!1)},!0)}g(p,q)};j(w,p=>{t(u)==="discussion"?p(m):p(b,!1)})}g(l,i)}),a(qe),x((l,r,i,w,m,b,p,q,_,V,$,I)=>{d(Fe,"background-image",`url("${e.banner}")`),d(de,"background",l),C(ce,"src",e.picture),C(ce,"alt",`${e.displayName} profile picture`),d(ce,"border-color",l),d(ue,"color",r),F(et,e.displayName),d(ge,"color",i),F(tt,`@${e.username??""}`),d(Ie,"background",i),d(Ve,"color",i),F(rt,e.pronouns),C(E,"href",`/profile/${e.username}/follows`),d(E,"border-color",w),d(E,"color",w),F(it,`${e.followers.length??""} Followers`),F(nt,`${e.following.length??""} Following`),d(pe,"color",m),d(pe,"border-bottom",b),d(_e,"color",p),d(_e,"border-bottom",q),d(he,"color",_),d(he,"border-bottom",V),d(Be,"color",$),d(Be,"border-bottom",I)},[()=>n().backgroundDark,()=>n().textBright,()=>n().textDim,()=>n().textDull,()=>t(u)==="all"?n().text:n().textDim,()=>t(u)==="all"?`3px solid ${n().accent}`:"3px solid transparent",()=>t(u)==="discussion"?n().text:n().textDim,()=>t(u)==="discussion"?`3px solid ${n().accent}`:"3px solid transparent",()=>t(u)==="ratings"?n().text:n().textDim,()=>t(u)==="ratings"?`3px solid ${n().accent}`:"3px solid transparent",()=>t(u)==="activity"?n().text:n().textDim,()=>t(u)==="activity"?`3px solid ${n().accent}`:"3px solid transparent"]),g(k,qe),O()}kt(["click"]);export{hr as P};
