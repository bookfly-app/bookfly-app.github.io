import{a as d,n as ve,t as L,c as P}from"./DexLR8qC.js";import{a0 as J,a3 as l,a4 as r,a5 as a,a2 as S,a1 as K,a9 as U,y as o,an as be,al as F,ai as Oe,aA as at}from"./5f8FJv0s.js";import{s as C}from"./B69nLCsL.js";import{a as Fe}from"./wJu-vJE8.js";import{i as G}from"./hKDZrkzC.js";import{e as xe,i as we}from"./D-MdWV-n.js";import{h as st,S as ot,A as Ie}from"./DMkxRJYH.js";import{s as y,a as ce}from"./BI6m0154.js";import{d as qe}from"./-jdAx9ne.js";import{t as n,s as c}from"./B3gDZwlR.js";import{p as ze}from"./AR1n4UHv.js";import{g as Ce}from"./BX52TFUg.js";import{g as Je,k as lt,m as it,b as ae,n as nt,u as Ze,o as Ee}from"./nEF06w4h.js";import{r as de}from"./B5o0pe91.js";import{L as vt}from"./BErkwlK9.js";import{M as ct}from"./BU7nzDVi.js";import{B as dt}from"./B8CG8S0L.js";var ut=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function gt(_,e){J(e,!0);let t=de(e,["$$slots","$$events","$$legacy"]),p=e.stroke;t={...t},t.stroke=void 0;var v=ut();let u;var f=l(r(v),2),h=r(f);y(h,"stroke",p);var M=l(h);y(M,"stroke",p),a(f),a(v),S(()=>u=ce(v,u,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),d(_,v),K()}var _t=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ft(_,e){J(e,!0);let t=de(e,["$$slots","$$events","$$legacy"]),p=e.stroke;t={...t},t.stroke=void 0;var v=_t();let u;var f=l(r(v),2),h=r(f);y(h,"stroke",p),a(f),a(v),S(()=>u=ce(v,u,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),d(_,v),K()}var mt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function kt(_,e){J(e,!0);let t=de(e,["$$slots","$$events","$$legacy"]),p=e.stroke;t={...t},t.stroke=void 0;var v=mt();let u;var f=l(r(v),2),h=r(f);y(h,"stroke",p);var M=l(h);y(M,"stroke",p),a(f),a(v),S(()=>u=ce(v,u,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),d(_,v),K()}var pt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ht(_,e){J(e,!0);let t=de(e,["$$slots","$$events","$$legacy"]),p=e.stroke;t={...t},t.stroke=void 0;var v=pt();let u;var f=l(r(v),2),h=r(f);y(h,"stroke",p),a(f),a(v),S(()=>u=ce(v,u,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),d(_,v),K()}var xt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function wt(_,e){J(e,!0);let t=de(e,["$$slots","$$events","$$legacy"]),p=e.stroke;t={...t},t.stroke=void 0;var v=xt();let u;var f=l(r(v),2),h=r(f);y(h,"stroke",p),a(f),a(v),S(()=>u=ce(v,u,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),d(_,v),K()}var bt=(_,e)=>Ce(`/profile/${e.user.username}`),Ct=L('<span class="svelte-1x69ua7"> </span>'),yt=(_,e)=>{var t;return Ce(`/book/${(t=o(e))==null?void 0:t.isbn}`)},Mt=L('<section class="svelte-1x69ua7"><div class="profile svelte-1x69ua7"><button class="svelte-1x69ua7"></button></div> <div class="wrapper svelte-1x69ua7"><span class="user svelte-1x69ua7"><h2 class="svelte-1x69ua7"> </h2> <h3 class="svelte-1x69ua7"> </h3></span> <div class="outer"><div class="listing svelte-1x69ua7"><div class="book-info svelte-1x69ua7"><h1 class="svelte-1x69ua7"> </h1> <h2 class="svelte-1x69ua7"> </h2> <!> <span class="svelte-1x69ua7"> </span></div> <img class="cover svelte-1x69ua7"></div> <p class="description svelte-1x69ua7"> </p></div></div></section>');function Dt(_,e){J(e,!0);let t=be(null);(async function(){U(t,ze(await Je(e.isbn)))})();var p=Mt(),v=r(p),u=r(v);u.__click=[bt,e],a(v);var f=l(v,2),h=r(f),M=r(h),ye=r(M,!0);a(M);var se=l(M,2),Me=r(se,!0);a(se),a(h);var oe=l(h,2),Q=r(oe),T=r(Q),O=r(T),W=r(O,!0);a(O);var X=l(O,2),Y=r(X,!0);a(X);var Z=l(X,2);{var le=x=>{var V=Ct(),H=r(V);a(V),S(ie=>{var ee;c(V,"color",ie),C(H,`${((ee=o(t))==null?void 0:ee.pageCount)??""} pages`)},[()=>n().text]),d(x,V)};G(Z,x=>{var V;(V=o(t))!=null&&V.pageCount&&x(le)})}var E=l(Z,2),$=r(E,!0);a(E),a(T);var ue=l(T,2);ue.__click=[yt,t],a(Q);var I=l(Q,2),De=r(I,!0);a(I),a(oe),a(f),a(p),S((x,V,H,ie,ee)=>{var ge,_e,fe;c(u,"background-image",`url("${e.user.picture}")`),c(M,"color",x),C(ye,e.user.displayName),c(se,"color",V),C(Me,`@${e.user.username}`),c(O,"color",H),C(W,(ge=o(t))==null?void 0:ge.title),c(X,"color",V),C(Y,ie),c(E,"color",H),C($,ee),y(ue,"src",(_e=o(t))==null?void 0:_e.cover),c(I,"color",H),C(De,(fe=o(t))==null?void 0:fe.description)},[()=>n().textBright,()=>n().textDim,()=>n().text,()=>{var x;return(x=o(t))==null?void 0:x.authors.join(", ")},()=>{var x;return[...((x=o(t))==null?void 0:x.genres)??[]].splice(0,2).join(", ")}]),d(_,p),K()}qe(["click"]);var St=()=>Ce("/"),Vt=L('<span class="dev svelte-1dltc8a">Dev</span>'),Rt=L('<span class="author svelte-1dltc8a">Author</span>'),Bt=L('<span class="mod svelte-1dltc8a">Moderator</span>'),Gt=()=>Ce("/profile/edit"),Lt=L('<button class="edit-profile svelte-1dltc8a">Edit Profile</button>'),jt=L('<div class="profile-actions svelte-1dltc8a"><button class="profile-action-follow svelte-1dltc8a"><!></button> <button class="profile-action svelte-1dltc8a"><!></button></div>'),Ft=L('<span class="svelte-1dltc8a"><!> <span class="truncate svelte-1dltc8a"> </span></span>'),It=L('<span class="svelte-1dltc8a"><!> <span class="truncate svelte-1dltc8a"> </span></span>'),Ht=L('<span class="svelte-1dltc8a"><!> <span> </span></span>'),At=(_,e)=>U(e,"all"),Nt=(_,e)=>U(e,"discussion"),Pt=(_,e)=>U(e,"ratings"),Ut=(_,e)=>U(e,"list"),Ot=L('<div class="ratings svelte-1dltc8a"><span class="rating-sort svelte-1dltc8a"><!> Best</span> <!></div>'),Zt=L('<!> <main class="svelte-1dltc8a"><div class="banner svelte-1dltc8a"></div> <button class="back-arrow svelte-1dltc8a"><!></button> <div class="profile svelte-1dltc8a"><img class="profile-picture svelte-1dltc8a"> <div class="profile-line-1 svelte-1dltc8a"><span class="name svelte-1dltc8a"><h1 class="svelte-1dltc8a"> </h1> <h2 class="svelte-1dltc8a"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-1dltc8a"><!></p> <div class="profile-line-2 svelte-1dltc8a"><!> <!> <!></div> <a class="follows svelte-1dltc8a"><span> </span> <span> </span></a> <div class="views svelte-1dltc8a"><button class="svelte-1dltc8a">All</button> <button class="svelte-1dltc8a">Discussion</button> <button class="svelte-1dltc8a">Reviews</button> <button class="svelte-1dltc8a">Reading List</button></div></div> <!></main>',1);function lr(_,e){J(e,!0);let t=be("all"),p=lt(e.user),v=it(e.user),u=be(""),f=v.then(s=>s.length),h=Oe(()=>{var s;return((s=ae())==null?void 0:s.id)===e.user.id});(async()=>U(u,ze(e.user.currentBook?(await Je(e.user.currentBook)).title:null)))();let M=be(null),ye=Oe(()=>{var s;return((s=ae())==null?void 0:s.following.some(i=>i===e.user.id))??!1});function se(){U(M,!0),Ze({following:[...new Set([...ae().following,e.user.id])]}),Ee(e.user,{followers:[...new Set([...e.user.followers,ae().id])]})}function Me(){U(M,!1),Ze({following:ae().following.filter(s=>s!==e.user.id)}),Ee(e.user,{followers:e.user.followers.filter(s=>s!==ae().id)})}var oe=Zt(),Q=F(oe);dt(Q,{});var T=l(Q,2),O=r(T),W=l(O,2);W.__click=[St];var X=r(W);vt(X,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),a(W);var Y=l(W,2),Z=r(Y),le=l(Z,2),E=r(le),$=r(E),ue=r($,!0);a($);var I=l($,2),De=r(I);a(I);var x=l(I,2);{var V=s=>{var i=Vt();d(s,i)};G(x,s=>{e.user.tags.includes("dev")&&s(V)})}var H=l(x,2);{var ie=s=>{var i=Rt();d(s,i)};G(H,s=>{e.user.tags.includes("author")&&s(ie)})}var ee=l(H,2);{var ge=s=>{var i=Bt();d(s,i)};G(ee,s=>{e.user.tags.includes("mod")&&s(ge)})}a(E);var _e=l(E,2);{var fe=s=>{var i=Lt();i.__click=[Gt],d(s,i)},Ke=s=>{var i=jt(),g=r(i),w=r(g);{var b=k=>{kt(k,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:Me})},D=k=>{gt(k,{get stroke(){return n().textDull},style:"width: 2rem;",onclick:se})};G(w,k=>{o(M)||o(ye)&&o(M)!==!1?k(b):k(D,!1)})}a(g);var m=l(g,2),R=r(m);ct(R,{get stroke(){return n().textDull},style:"width: 1rem;"}),a(m),a(i),S(k=>{c(g,"border-color",k),c(m,"border-color",k)},[()=>n().textDull]),d(s,i)};G(_e,s=>{o(h)?s(fe):s(Ke,!1)})}a(le);var me=l(le,2),Qe=r(me);st(Qe,()=>nt(e.user.bio)),a(me);var Se=l(me,2),He=r(Se);Fe(He,()=>p,null,(s,i)=>{var g=P(),w=F(g);{var b=D=>{var m=Ft(),R=r(m);ot(R,{get stroke(){return n().textDull},style:"width: 1.25rem; height: 1.25rem;"});var k=l(R,2),j=r(k,!0);a(k),a(m),S(q=>{y(m,"title",`${e.user.displayName}'s highest rated book is ${o(i).title}`),c(k,"color",q),C(j,o(i).title)},[()=>n().textDull]),d(D,m)};G(w,D=>{o(i)&&D(b)})}d(s,g)});var Ae=l(He,2);{var Te=s=>{var i=It(),g=r(i);ht(g,{get stroke(){return n().textDull},style:"width: 1.25rem; height: 1.25rem;"});var w=l(g,2),b=r(w,!0);a(w),a(i),S(D=>{y(i,"title",`${e.user.displayName} is currently reading ${o(u)}`),c(w,"color",D),C(b,o(u))},[()=>n().textDull]),d(s,i)};G(Ae,s=>{o(u)&&s(Te)})}var We=l(Ae,2);Fe(We,()=>f,null,(s,i)=>{var g=Ht(),w=r(g);ft(w,{get stroke(){return n().textDull},style:"width: 1.25rem; height: 1.25rem;"});var b=l(w,2),D=r(b,!0);a(b),a(g),S(m=>{y(g,"title",`${e.user.displayName} has read ${o(i)} book${o(i)===1?"":"s"}`),c(b,"color",m),C(D,o(i))},[()=>n().textDull]),d(s,g)}),a(Se);var te=l(Se,2),Ve=r(te),Xe=r(Ve);a(Ve);var Ne=l(Ve,2),Ye=r(Ne);a(Ne),a(te);var Pe=l(te,2),ke=r(Pe);ke.__click=[At,t];var pe=l(ke,2);pe.__click=[Nt,t];var he=l(pe,2);he.__click=[Pt,t];var Re=l(he,2);Re.__click=[Ut,t],a(Pe),a(Y);var $e=l(Y,2);Fe($e,()=>v,null,(s,i)=>{var g=P(),w=F(g);{var b=m=>{var R=P(),k=F(R);xe(k,17,()=>o(i).filter(j=>j.type==="general"),we,(j,q)=>{Ie(j,{get post(){return o(q)}})}),d(m,R)},D=m=>{var R=P(),k=F(R);{var j=A=>{var N=Ot(),re=r(N),Be=r(re);wt(Be,{get stroke(){return n().text},style:"width: 1.75rem; height: 1.75rem;"}),at(),a(re);var Ge=l(re,2);xe(Ge,17,()=>o(i).filter(B=>B.type==="rating"),we,(B,z)=>{Ie(B,{get post(){return o(z)}})}),a(N),S(B=>c(re,"color",B),[()=>n().text]),d(A,N)},q=A=>{var N=P(),re=F(N);{var Be=B=>{var z=P(),Le=F(z);xe(Le,17,()=>e.user.readingList,we,(je,ne)=>{Dt(je,{get isbn(){return o(ne)},get user(){return e.user}})}),d(B,z)},Ge=B=>{var z=P(),Le=F(z);{var je=ne=>{var Ue=P(),et=F(Ue);xe(et,17,()=>o(i),we,(tt,rt)=>{Ie(tt,{get post(){return o(rt)}})}),d(ne,Ue)};G(Le,ne=>{o(t)==="all"&&ne(je)},!0)}d(B,z)};G(re,B=>{o(t)==="list"?B(Be):B(Ge,!1)},!0)}d(A,N)};G(k,A=>{o(t)==="ratings"?A(j):A(q,!1)},!0)}d(m,R)};G(w,m=>{o(t)==="discussion"?m(b):m(D,!1)})}d(s,g)}),a(T),S((s,i,g,w,b,D,m,R,k,j,q,A,N)=>{c(O,"background-image",`url("${e.user.banner}")`),c(Y,"background",s),y(Z,"src",e.user.picture),y(Z,"alt",`${e.user.displayName} profile picture`),c(Z,"border-color",s),c($,"color",i),C(ue,e.user.displayName),c(I,"color",g),C(De,`@${e.user.username??""}`),c(me,"color",w),y(te,"href",`/profile/${e.user.username}/follows`),c(te,"border-color",b),c(te,"color",b),C(Xe,`${e.user.followers.length??""} Followers`),C(Ye,`${e.user.following.length??""} Following`),c(ke,"color",D),c(ke,"border-bottom",m),c(pe,"color",R),c(pe,"border-bottom",k),c(he,"color",j),c(he,"border-bottom",q),c(Re,"color",A),c(Re,"border-bottom",N)},[()=>n().backgroundDark,()=>n().textBright,()=>n().textDim,()=>n().text,()=>n().textDull,()=>o(t)==="all"?n().text:n().textDim,()=>o(t)==="all"?`3px solid ${n().accent}`:"3px solid transparent",()=>o(t)==="discussion"?n().text:n().textDim,()=>o(t)==="discussion"?`3px solid ${n().accent}`:"3px solid transparent",()=>o(t)==="ratings"?n().text:n().textDim,()=>o(t)==="ratings"?`3px solid ${n().accent}`:"3px solid transparent",()=>o(t)==="list"?n().text:n().textDim,()=>o(t)==="list"?`3px solid ${n().accent}`:"3px solid transparent"]),d(_,oe),K()}qe(["click"]);export{lr as P};
