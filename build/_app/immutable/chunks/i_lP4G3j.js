import{a as c,n as oe,t as L,c as I}from"./D6bbjQKa.js";import{o as Z,v as l,w as r,x as s,t as y,u as O,a9 as J,D as a,am as He,ai as Ue,al as A,az as $e}from"./BoYJbVl0.js";import{s as S}from"./CRq8brLZ.js";import{a as me}from"./BijDdK7v.js";import{i as B}from"./DXGzWa6H.js";import{e as xe,i as we}from"./DR4kThJq.js";import{h as et,S as tt,A as je}from"./Cl5Zg4e6.js";import{s as x,a as le}from"./CH9K2Gpc.js";import{d as ze}from"./BhJvXT8z.js";import{t as v,s as d}from"./Cic6AYzS.js";import{g as be}from"./Cq7jMERK.js";import{b as Ee,v as rt,w as st,g as ae,x as at,f as Ze,y as Oe}from"./BouDITe6.js";import{r as ie}from"./de3NUO7W.js";import{L as ot}from"./tfhG9hc0.js";import{p as lt}from"./DZX_dtYD.js";var it=oe('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function nt(p,e){Z(e,!0);let t=ie(e,["$$slots","$$events","$$legacy"]),h=e.stroke;t={...t},t.stroke=void 0;var n=it();let _;var f=l(r(n),2),m=r(f);x(m,"stroke",h);var D=l(m);x(D,"stroke",h),s(f),s(n),y(()=>_=le(n,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(p,n),O()}var vt=oe('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function dt(p,e){Z(e,!0);let t=ie(e,["$$slots","$$events","$$legacy"]),h=e.stroke;t={...t},t.stroke=void 0;var n=vt();let _;var f=l(r(n),2),m=r(f);x(m,"stroke",h),s(f),s(n),y(()=>_=le(n,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(p,n),O()}var ct=oe('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ut(p,e){Z(e,!0);let t=ie(e,["$$slots","$$events","$$legacy"]),h=e.stroke;t={...t},t.stroke=void 0;var n=ct();let _;var f=l(r(n),2),m=r(f);x(m,"stroke",h);var D=l(m);x(D,"stroke",h),s(f),s(n),y(()=>_=le(n,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(p,n),O()}var gt=oe('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function _t(p,e){Z(e,!0);let t=ie(e,["$$slots","$$events","$$legacy"]),h=e.stroke;t={...t},t.stroke=void 0;var n=gt();let _;var f=l(r(n),2),m=r(f);x(m,"stroke",h),s(f),s(n),y(()=>_=le(n,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(p,n),O()}var ft=oe('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function kt(p,e){Z(e,!0);let t=ie(e,["$$slots","$$events","$$legacy"]),h=e.stroke;t={...t},t.stroke=void 0;var n=ft();let _;var f=l(r(n),2),m=r(f);x(m,"stroke",h),s(f),s(n),y(()=>_=le(n,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(p,n),O()}var pt=oe('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ht(p,e){Z(e,!0);let t=ie(e,["$$slots","$$events","$$legacy"]),h=e.stroke;t={...t},t.stroke=void 0;var n=pt();let _;var f=l(r(n),2),m=r(f);x(m,"stroke",h),s(f),s(n),y(()=>_=le(n,_,{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),c(p,n),O()}var mt=(p,e)=>be(`/profile/${e.user.username}`),xt=L('<span class="svelte-1x69ua7"> </span>'),wt=(p,e)=>{var t;return be(`/book/${(t=a(e))==null?void 0:t.isbn}`)},bt=L('<section class="svelte-1x69ua7"><div class="profile svelte-1x69ua7"><button class="svelte-1x69ua7"></button></div> <div class="wrapper svelte-1x69ua7"><span class="user svelte-1x69ua7"><h2 class="svelte-1x69ua7"> </h2> <h3 class="svelte-1x69ua7"> </h3></span> <div class="outer"><div class="listing svelte-1x69ua7"><div class="book-info svelte-1x69ua7"><h1 class="svelte-1x69ua7"> </h1> <h2 class="svelte-1x69ua7"> </h2> <!> <span class="svelte-1x69ua7"> </span></div> <img class="cover svelte-1x69ua7"></div> <p class="description svelte-1x69ua7"> </p></div></div></section>');function Ct(p,e){Z(e,!0);let t=He(null);(async function(){J(t,lt(await Ee(e.isbn)))})();var h=bt(),n=r(h),_=r(n);_.__click=[mt,e],s(n);var f=l(n,2),m=r(f),D=r(m),Ce=r(D,!0);s(D);var ne=l(D,2),ye=r(ne,!0);s(ne),s(m);var K=l(m,2),Q=r(K),N=r(Q),T=r(N),W=r(T,!0);s(T);var H=l(T,2),ve=r(H,!0);s(H);var X=l(H,2);{var Y=V=>{var R=xt(),z=r(R);s(R),y(ce=>{var te;d(R,"color",ce),S(z,`${((te=a(t))==null?void 0:te.pageCount)??""} pages`)},[()=>v().text]),c(V,R)};B(X,V=>{var R;(R=a(t))!=null&&R.pageCount&&V(Y)})}var de=l(X,2),$=r(de,!0);s(de),s(N);var ge=l(N,2);ge.__click=[wt,t],s(Q);var ee=l(Q,2),Ve=r(ee,!0);s(ee),s(K),s(f),s(h),y((V,R,z,ce,te)=>{var _e,fe,E;d(_,"background-image",`url("${e.user.picture}")`),d(D,"color",V),S(Ce,e.user.displayName),d(ne,"color",R),S(ye,`@${e.user.username}`),d(T,"color",z),S(W,(_e=a(t))==null?void 0:_e.title),d(H,"color",R),S(ve,ce),d(de,"color",z),S($,te),x(ge,"src",(fe=a(t))==null?void 0:fe.cover),d(ee,"color",z),S(Ve,(E=a(t))==null?void 0:E.description)},[()=>v().textBright,()=>v().textDim,()=>v().text,()=>{var V;return(V=a(t))==null?void 0:V.authors.join(", ")},()=>{var V;return[...((V=a(t))==null?void 0:V.genres)??[]].splice(0,2).join(", ")}]),c(p,h),O()}ze(["click"]);var yt=()=>be("/"),Vt=L('<span class="dev svelte-dsdrl">Dev</span>'),Mt=L('<span class="author svelte-dsdrl">Author</span>'),St=L('<span class="mod svelte-dsdrl">Moderator</span>'),Dt=()=>be("/profile/edit"),Rt=L('<button class="edit-profile svelte-dsdrl">Edit Profile</button>'),Gt=L('<div class="profile-actions svelte-dsdrl"><button class="profile-action-follow svelte-dsdrl"><!></button> <button class="profile-action svelte-dsdrl"><!></button></div>'),Bt=L('<a><!> <span class="truncate svelte-dsdrl"> </span></a>'),Lt=L('<a><!> <span class="truncate svelte-dsdrl"> </span></a>'),jt=L('<span class="svelte-dsdrl"><!> <span> </span></span>'),Ht=(p,e)=>J(e,"all"),Ft=(p,e)=>J(e,"discussion"),It=(p,e)=>J(e,"ratings"),At=(p,e)=>J(e,"list"),Nt=L('<div class="ratings svelte-dsdrl"><span class="rating-sort svelte-dsdrl"><!> Best</span> <!></div>'),Pt=L('<section class="svelte-dsdrl"><div class="banner svelte-dsdrl"></div> <button class="back-arrow svelte-dsdrl"><!></button> <div class="profile svelte-dsdrl"><img class="profile-picture svelte-dsdrl"> <div class="profile-line-1 svelte-dsdrl"><span class="name svelte-dsdrl"><h1 class="svelte-dsdrl"> </h1> <h2 class="svelte-dsdrl"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-dsdrl"><!></p> <div class="profile-line-2 svelte-dsdrl"><!> <!> <!></div> <a class="follows svelte-dsdrl"><span> </span> <span> </span></a> <div class="views svelte-dsdrl"><button class="svelte-dsdrl">All</button> <button class="svelte-dsdrl">Discussion</button> <button class="svelte-dsdrl">Reviews</button> <button class="svelte-dsdrl">Reading List</button></div></div> <!></section>');function tr(p,e){Z(e,!0);let t=He("all"),h=rt(e.user),n=st(e.user),_=Ue(()=>{var o;return((o=ae())==null?void 0:o.id)===e.user.id}),f=e.user.currentBook?Ee(e.user.currentBook):Promise.resolve(null),m=n.then(o=>o.filter(i=>i.type==="rating").length),D=He(null),Ce=Ue(()=>{var o;return a(D)||(((o=ae())==null?void 0:o.following.some(i=>i===e.user.id))??!1)&&a(D)===null});function ne(){J(D,!0),Ze({following:[...new Set([...ae().following,e.user.id])]}),Oe(e.user,{followers:[...new Set([...e.user.followers,ae().id])]})}function ye(){J(D,!1),Ze({following:ae().following.filter(o=>o!==e.user.id)}),Oe(e.user,{followers:e.user.followers.filter(o=>o!==ae().id)})}var K=Pt(),Q=r(K),N=l(Q,2);N.__click=[yt];var T=r(N);ot(T,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),s(N);var W=l(N,2),H=r(W),ve=l(H,2),X=r(ve),Y=r(X),de=r(Y,!0);s(Y);var $=l(Y,2),ge=r($);s($);var ee=l($,2);{var Ve=o=>{var i=Vt();c(o,i)};B(ee,o=>{e.user.tags.includes("dev")&&o(Ve)})}var V=l(ee,2);{var R=o=>{var i=Mt();c(o,i)};B(V,o=>{e.user.tags.includes("author")&&o(R)})}var z=l(V,2);{var ce=o=>{var i=St();c(o,i)};B(z,o=>{e.user.tags.includes("mod")&&o(ce)})}s(X);var te=l(X,2);{var _e=o=>{var i=Rt();i.__click=[Dt],y((k,M,w)=>{d(i,"color",k),d(i,"background",`linear-gradient(${M??""}, ${w??""})`)},[()=>v().background,()=>v().accent,()=>v().accent2]),c(o,i)},fe=o=>{var i=Gt(),k=r(i),M=r(k);{var w=g=>{ut(g,{get stroke(){return v().textDull},style:"width: 2rem;",onclick:ye})},b=g=>{nt(g,{get stroke(){return v().textDull},style:"width: 2rem;",onclick:ne})};B(M,g=>{a(Ce)?g(w):g(b,!1)})}s(k);var u=l(k,2),C=r(u);kt(C,{get stroke(){return v().textDull},style:"width: 1rem;"}),s(u),s(i),y(g=>{d(k,"border-color",g),d(u,"border-color",g)},[()=>v().textDull]),c(o,i)};B(te,o=>{a(_)?o(_e):o(fe,!1)})}s(ve);var E=l(ve,2),qe=r(E);et(qe,()=>at(e.user.bio)),s(E);var Me=l(E,2),Fe=r(Me);me(Fe,()=>h,null,(o,i)=>{var k=I(),M=A(k);{var w=b=>{var u=Bt(),C=r(u);tt(C,{get stroke(){return v().textDull},style:"width: 1rem; height: 1rem;"});var g=l(C,2),j=r(g,!0);s(g),s(u),y(F=>{x(u,"href",`/book/${a(i).isbn}`),x(u,"title",`${e.user.displayName}'s highest rated book is ${a(i).title}`),d(g,"color",F),S(j,a(i).title)},[()=>v().textDull]),c(b,u)};B(M,b=>{a(i)&&b(w)})}c(o,k)});var Ie=l(Fe,2);me(Ie,()=>f,null,(o,i)=>{var k=I(),M=A(k);{var w=b=>{var u=Lt(),C=r(u);_t(C,{get stroke(){return v().textDull},style:"width: 1rem; height: 1rem;"});var g=l(C,2),j=r(g,!0);s(g),s(u),y(F=>{x(u,"href",`/book/${a(i).isbn??""}`),x(u,"title",`${e.user.displayName} is currently reading ${a(i)}`),d(g,"color",F),S(j,a(i).title)},[()=>v().textDull]),c(b,u)};B(M,b=>{a(i)&&b(w)})}c(o,k)});var Je=l(Ie,2);me(Je,()=>m,null,(o,i)=>{var k=jt(),M=r(k);dt(M,{get stroke(){return v().textDull},style:"width: 1.25rem; height: 1.25rem;"});var w=l(M,2),b=r(w,!0);s(w),s(k),y(u=>{x(k,"title",`${e.user.displayName??""} has read $${a(i)??""} book${(a(i)===1?"":"s")??""}`),d(w,"color",u),S(b,a(i))},[()=>v().textDull]),c(o,k)}),s(Me);var re=l(Me,2),Se=r(re),Ke=r(Se);s(Se);var Ae=l(Se,2),Qe=r(Ae);s(Ae),s(re);var Ne=l(re,2),ke=r(Ne);ke.__click=[Ht,t];var pe=l(ke,2);pe.__click=[Ft,t];var he=l(pe,2);he.__click=[It,t];var De=l(he,2);De.__click=[At,t],s(Ne),s(W);var Te=l(W,2);me(Te,()=>n,null,(o,i)=>{var k=I(),M=A(k);{var w=u=>{var C=I(),g=A(C);xe(g,17,()=>a(i).filter(j=>j.type==="general"),we,(j,F)=>{je(j,{get post(){return a(F)}})}),c(u,C)},b=u=>{var C=I(),g=A(C);{var j=P=>{var U=Nt(),se=r(U),Re=r(se);ht(Re,{get stroke(){return v().text},style:"width: 1.75rem; height: 1.75rem;"}),$e(),s(se);var Ge=l(se,2);xe(Ge,17,()=>a(i).filter(G=>G.type==="rating"),we,(G,q)=>{je(G,{get post(){return a(q)}})}),s(U),y(G=>d(se,"color",G),[()=>v().text]),c(P,U)},F=P=>{var U=I(),se=A(U);{var Re=G=>{var q=I(),Be=A(q);xe(Be,17,()=>e.user.readingList,we,(Le,ue)=>{Ct(Le,{get isbn(){return a(ue)},get user(){return e.user}})}),c(G,q)},Ge=G=>{var q=I(),Be=A(q);{var Le=ue=>{var Pe=I(),We=A(Pe);xe(We,17,()=>a(i),we,(Xe,Ye)=>{je(Xe,{get post(){return a(Ye)}})}),c(ue,Pe)};B(Be,ue=>{a(t)==="all"&&ue(Le)},!0)}c(G,q)};B(se,G=>{a(t)==="list"?G(Re):G(Ge,!1)},!0)}c(P,U)};B(g,P=>{a(t)==="ratings"?P(j):P(F,!1)},!0)}c(u,C)};B(M,u=>{a(t)==="discussion"?u(w):u(b,!1)})}c(o,k)}),s(K),y((o,i,k,M,w,b,u,C,g,j,F,P,U)=>{d(Q,"background-image",`url("${e.user.banner}")`),d(W,"background",o),x(H,"src",e.user.picture),x(H,"alt",`${e.user.displayName} profile picture`),d(H,"border-color",o),d(Y,"color",i),S(de,e.user.displayName),d($,"color",k),S(ge,`@${e.user.username??""}`),d(E,"color",M),x(re,"href",`/profile/${e.user.username}/follows`),d(re,"border-color",w),d(re,"color",w),S(Ke,`${e.user.followers.length??""} Followers`),S(Qe,`${e.user.following.length??""} Following`),d(ke,"color",b),d(ke,"border-bottom",u),d(pe,"color",C),d(pe,"border-bottom",g),d(he,"color",j),d(he,"border-bottom",F),d(De,"color",P),d(De,"border-bottom",U)},[()=>v().backgroundDark,()=>v().textBright,()=>v().textDim,()=>v().text,()=>v().textDull,()=>a(t)==="all"?v().text:v().textDim,()=>a(t)==="all"?`3px solid ${v().accent}`:"3px solid transparent",()=>a(t)==="discussion"?v().text:v().textDim,()=>a(t)==="discussion"?`3px solid ${v().accent}`:"3px solid transparent",()=>a(t)==="ratings"?v().text:v().textDim,()=>a(t)==="ratings"?`3px solid ${v().accent}`:"3px solid transparent",()=>a(t)==="list"?v().text:v().textDim,()=>a(t)==="list"?`3px solid ${v().accent}`:"3px solid transparent"]),c(p,K),O()}ze(["click"]);export{tr as P};
