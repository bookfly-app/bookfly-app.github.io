import{v as vt,w as dt,t as l,u as x,s as c,c as ut,a as _t,f as N}from"../chunks/BWtWgn92.js";import{a as g,t as S,c as P}from"../chunks/gFbpwaTI.js";import{p as mt,f as w,t as G,a as kt,ab as Q,aa as gt,s as v,j as f,g as b,r as p,d as ft}from"../chunks/DBPlaF8E.js";import{s as M}from"../chunks/Chu0jhlY.js";import{i as F}from"../chunks/BW7aK-Zr.js";import{e as bt,i as pt}from"../chunks/HJfK_IHA.js";import{a as K}from"../chunks/o2l4qZHV.js";import{d as ht}from"../chunks/CThlKSBW.js";import{b as jt}from"../chunks/CVPpxQ3u.js";import{S as xt,F as Lt}from"../chunks/BBAWapf1.js";import{B as yt}from"../chunks/d2KtSSUw.js";import{P as wt,S as Bt}from"../chunks/COdcIwaF.js";import{A as St}from"../chunks/5UU8o6SF.js";const At=async({params:j})=>({book:await vt(j.slug)}),Xt=Object.freeze(Object.defineProperty({__proto__:null,load:At},Symbol.toStringTag,{value:"Module"}));async function Dt(j,n){var a;const e=x().readingList;N({readingList:[...e,n.isbn]}),(a=x())==null||a.readingList.push(n.isbn)}async function Rt(j,n){const e=x().readingList.filter(a=>a!==n.isbn);N({readingList:e}),x().readingList=e}var Pt=(j,n)=>Q(n,"info"),Ft=(j,n)=>Q(n,"discussion"),It=S('<div class="book-info svelte-kn64jk"><img class="cover svelte-kn64jk"> <p class="description svelte-kn64jk"> </p></div>'),Ot=S('<button id="add-to-reading-list" class="remove-from-reading-list svelte-kn64jk">Remove from Reading List</button>'),Tt=S('<button id="add-to-reading-list" class="svelte-kn64jk">Add to Reading List</button>'),$t=S('<nav class="svelte-kn64jk"><div class="banner svelte-kn64jk"><button aria-label="Open sidebar" class="svelte-kn64jk"></button> <div class="book-name svelte-kn64jk"><h1 class="svelte-kn64jk"> </h1> <h2 class="svelte-kn64jk"> </h2></div> <!></div></nav> <section class="svelte-kn64jk"><div class="views svelte-kn64jk"><button class="svelte-kn64jk">Info</button> <button class="svelte-kn64jk">Discussion</button></div> <!> <!></section> <!> <!>',1),zt=S("<!> <!>",1);function Yt(j,n){mt(n,!0);let e=n.data.book,a=gt("info"),V=dt(e.isbn),I,W=ft(()=>{var d;return((d=x())==null?void 0:d.readingList.includes(e.isbn))??!1});function X(d,C=3){d=d.replaceAll("--","â€”"),d=d.replaceAll(/\.(\S)/g,(r,u)=>`. ${u}`);let L=d.split(/([.!?])\s*/),h=[];for(let r=0;r<L.length;r+=2)h.push(L[r]+L[r+1]);let y=h.map((r,u)=>(u+1)%C===0&&u!==h.length-1?r+`

`:r).join("");return y=y.replaceAll(/\.(\S)/g,(r,u)=>`. ${u}`),y}var U=zt(),q=w(U);yt(q);var Y=v(q,2);wt(Y,{style:"overflow-y: hidden;",children:(d,C)=>{var L=$t(),h=w(L),y=f(h),r=f(y);r.__click=()=>I.show();var u=v(r,2),A=f(u),Z=f(A,!0);p(A);var O=v(A,2),tt=f(O,!0);p(O),p(u);var et=v(u,2);xt(et,{style:"width: 2rem; height: 2rem;",get stroke(){return l().textBright}}),p(y),p(h);var T=v(h,2),D=f(T),R=f(D);R.__click=[Pt,a];var $=v(R,2);$.__click=[Ft,a],p(D);var E=v(D,2);{var at=t=>{var i=It(),_=f(i),m=v(_,2),k=f(m,!0);p(m),p(i),G((s,o)=>{K(_,"alt",`${e.title} cover`),K(_,"src",e.cover),c(m,"color",s),M(k,o)},[()=>l().textDull,()=>X(e.description)]),g(t,i)},rt=t=>{var i=P(),_=w(i);{var m=k=>{var s=P(),o=w(s);ut(o,()=>V,null,(B,z)=>{var J=P(),it=w(J);bt(it,17,()=>b(z),pt,(lt,ct)=>{St(lt,{get post(){return b(ct)}})}),g(B,J)}),g(k,s)};F(_,k=>{b(a)==="discussion"&&k(m)},!0)}g(t,i)};F(E,t=>{b(a)==="info"?t(at):t(rt,!1)})}var st=v(E,2);{var ot=t=>{var i=P(),_=w(i);{var m=s=>{var o=Ot();o.__click=[Rt,e],g(s,o)},k=s=>{var o=Tt();o.__click=[Dt,e],G(B=>c(o,"background",B),[_t]),g(s,o)};F(_,s=>{b(W)?s(m):s(k,!1)})}g(t,i)};F(st,t=>{x()&&t(ot)})}p(T);var H=v(T,2);Lt(H,{selected:"search"});var nt=v(H,2);jt(Bt(nt,{}),t=>I=t,()=>I),G((t,i,_,m,k,s,o,B,z)=>{c(h,"background",t),c(r,"background-image",i),c(A,"color",_),M(Z,e.title),c(O,"color",m),M(tt,k),c(D,"background-color",t),c(R,"color",s),c(R,"border-bottom-color",o),c($,"color",B),c($,"border-bottom-color",z)},[()=>l().backgroundDark,()=>{var t;return`url("${((t=x())==null?void 0:t.picture)??""}")`},()=>l().textBright,()=>l().textDim,()=>e.authors.join(", "),()=>b(a)==="info"?l().textBright:l().textDull,()=>b(a)==="info"?l().accent:"transparent",()=>b(a)==="discussion"?l().textBright:l().textDull,()=>b(a)==="discussion"?l().accent:"transparent"]),g(d,L)},$$slots:{default:!0}}),g(j,U),kt()}ht(["click"]);export{Yt as component,Xt as universal};
