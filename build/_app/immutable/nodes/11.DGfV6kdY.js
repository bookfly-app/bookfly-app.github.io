import{w as Vt,x as qt,u as F,t as f,s as x,a as ft,y as Et,d as Ht,k as kt}from"../chunks/CVc447rH.js";import"../chunks/Bg9kRutz.js";import{p as Jt,a as Kt,g as r,a5 as ht,f as A,s as t,t as T,a4 as bt,c as e,r as s,d as C}from"../chunks/BEuF9Aiu.js";import{b as Qt,s as n}from"../chunks/CIMMqX_l.js";import{p as wt,i as I}from"../chunks/Dc0SBWOI.js";import{e as xt,i as Wt}from"../chunks/BLfhk5AQ.js";import{a as m,t as $,c as J,e as Xt}from"../chunks/DY2BR4sA.js";import{d as Yt}from"../chunks/NdrWdQlm.js";import{B as Zt}from"../chunks/INptXayj.js";import{B as ta}from"../chunks/CoIpPjfT.js";import{P as aa}from"../chunks/fbTVcXp3.js";import{S as sa,A as ea}from"../chunks/BV3gILk7.js";const ra=async({params:N})=>({book:await Vt(N.isbn)}),Da=Object.freeze(Object.defineProperty({__proto__:null,load:ra},Symbol.toStringTag,{value:"Module"}));async function oa(N,y){var p;const a=F().readingList;kt({readingList:[...a,y.isbn]}),(p=F())==null||p.readingList.push(y.isbn)}async function na(N,y){const a=F().readingList.filter(p=>p!==y.isbn);kt({readingList:a}),F().readingList=a}var ia=$('<h2 class="svelte-i6wom1"> </h2>'),la=$('<span class="rating svelte-i6wom1"><!> <span class="count svelte-i6wom1"> </span></span>'),va=$('<a href="/author" class="svelte-i6wom1"> </a><!>',1),ca=$('<div class="book-info svelte-i6wom1"><div class="title svelte-i6wom1"><h1 class="svelte-i6wom1"> </h1> <!></div> <!> <!> <p class="description svelte-i6wom1"> </p></div> <div class="product-info svelte-i6wom1"><h2 class="svelte-i6wom1">Product Information</h2> <span class="svelte-i6wom1"><span class="svelte-i6wom1">Title:</span> </span> <span class="svelte-i6wom1"><span class="svelte-i6wom1"> </span> <span class="svelte-i6wom1"></span></span> <span class="svelte-i6wom1"><span class="svelte-i6wom1">ISBN-13:</span> </span> <span class="svelte-i6wom1"><span class="svelte-i6wom1">Page Count:</span> </span> <span class="svelte-i6wom1"><span class="svelte-i6wom1">Publish Date:</span> </span> <span class="svelte-i6wom1"><span class="svelte-i6wom1"> </span> </span> <span class="svelte-i6wom1"><span class="svelte-i6wom1">Characters:</span> </span> <span class="svelte-i6wom1"><span class="svelte-i6wom1">Tags:</span> </span></div>',1),pa=$('<button id="add-to-reading-list" class="remove-from-reading-list svelte-i6wom1">Remove from Reading List</button>'),ua=$('<button id="add-to-reading-list" class="svelte-i6wom1">Add to Reading List</button>'),ma=$('<!> <nav class="svelte-i6wom1"><div class="book-name svelte-i6wom1"><h1 class="svelte-i6wom1"> </h1> <h2 class="svelte-i6wom1"> </h2></div> <div class="views svelte-i6wom1"><button class="svelte-i6wom1">Info</button> <button class="svelte-i6wom1">Discussion</button></div></nav> <section class="svelte-i6wom1"><!> <!></section>',1);function Pa(N,y){Jt(y,!0);let a=y.data.book,p=bt("info");function ct(v){return function(){ht(p,wt(v)),K.scrollTop=0}}let yt=qt(a.isbn),pt=bt(null),Lt=C(()=>{var v;return((v=F())==null?void 0:v.readingList.includes(a.isbn))??!1});function Bt(v,ut=3){v=v.replaceAll("--","â€”"),v=v.replaceAll(/\.(\S)/g,(l,g)=>`. ${g}`);let L=v.split(/([.!?])\s*/);const j=[];for(let l=0;l<L.length;l+=2){const g=l<L.length-1?L[l+1]:"";j.push(L[l]+g)}let B=j.map((l,g)=>(g+1)%ut===0&&g!==j.length-1?l+`

`:l).join("");return B=B.replaceAll(/\.(\S)/g,(l,g)=>`. ${g}`),B}let K;aa(N,{type:"search",get sidebar(){return r(pt)},set sidebar(v){ht(pt,wt(v))},children:(v,ut)=>{var L=ma(),j=A(L);Zt(j,{style:"position: fixed; top: 1rem; left: 1rem;"});var O=t(j,2),B=e(O),l=e(B),g=e(l,!0);s(l);var Q=t(l,2),Dt=e(Q,!0);s(Q),s(B);var mt=t(B,2),U=e(mt),Pt=C(()=>ct("info"));U.__click=function(...o){var i;(i=r(Pt))==null||i.apply(this,o)};var W=t(U,2),Rt=C(()=>ct("discussion"));W.__click=function(...o){var i;(i=r(Rt))==null||i.apply(this,o)},s(mt),s(O);var X=t(O,2),dt=e(X);{var At=o=>{var i=ca(),h=A(i),b=e(h),d=e(b),c=e(d,!0);s(d);var u=t(d,2);{var D=_=>{var w=ia(),k=e(w,!0);s(w),T(()=>n(k,a.authors[0])),m(_,w)};I(u,_=>{a.authors.length>0&&_(D)})}s(b);var V=t(b,2);ta(V,{book:a,style:"width: 10rem"});var z=t(V,2);ft(z,()=>Et(a.isbn),null,(_,w)=>{var k=C(()=>{var{rating:vt,count:Ut}=r(w);return{rating:vt,count:Ut}}),P=C(()=>r(k).rating),R=C(()=>r(k).count),M=la(),E=e(M);sa(E,{get rating(){return r(P)}});var H=t(E),S=t(H),lt=e(S);s(S),s(M),T(vt=>{n(H,` ${vt??""} `),n(lt,`(${r(R)??""})`)},[()=>r(P).toFixed(1)]),m(_,M)});var G=t(z,2),Y=e(G,!0);s(G),s(h);var q=t(h,2),Z=t(e(q),2),Tt=t(e(Z),1,!0);s(Z);var tt=t(Z,2),at=e(tt),Ct=e(at);s(at);var _t=t(at,2);xt(_t,22,()=>a.authors,_=>_,(_,w,k)=>{var P=va(),R=A(P),M=e(R,!0);s(R);var E=t(R);{var H=S=>{var lt=Xt(",");m(S,lt)};I(E,S=>{r(k)!==a.authors.length-1&&S(H)})}T(()=>n(M,w)),m(_,P)}),s(_t),s(tt);var st=t(tt,2),It=t(e(st),1,!0);s(st);var et=t(st,2),Ft=t(e(et),1,!0);s(et);var rt=t(et,2),Nt=t(e(rt),1,!0);s(rt);var ot=t(rt,2),nt=e(ot),Ot=e(nt);s(nt);var zt=t(nt,1,!0);s(ot);var it=t(ot,2),Gt=t(e(it),1,!0);s(it);var gt=t(it,2),Mt=t(e(gt),1,!0);s(gt),s(q),T((_,w,k,P,R)=>{n(c,a.title),x(G,"color",_),n(Y,w),n(Tt,a.title),n(Ct,`Author${(a.authors.length===1?"":"s")??""}:`),n(It,a.isbn),n(Ft,a.pageCount),n(Nt,a.publishDate),n(Ot,`Publisher${(a.publishers.length===1?"":"s")??""}:`),n(zt,k),n(Gt,P),n(Mt,R)},[()=>f().textDull,()=>Bt(a.description),()=>a.publishers.join(", "),()=>a.characters.join(", "),()=>a.genres.join(", ")]),m(o,i)},$t=o=>{var i=J(),h=A(i);{var b=d=>{var c=J(),u=A(c);ft(u,()=>yt,null,(D,V)=>{var z=J(),G=A(z);xt(G,17,()=>r(V),Wt,(Y,q)=>{ea(Y,{get post(){return r(q)}})}),m(D,z)}),m(d,c)};I(h,d=>{r(p)==="discussion"&&d(b)},!0)}m(o,i)};I(dt,o=>{r(p)==="info"?o(At):o($t,!1)})}var jt=t(dt,2);{var St=o=>{var i=J(),h=A(i);{var b=c=>{var u=pa();u.__click=[na,a],m(c,u)},d=c=>{var u=ua();u.__click=[oa,a],T(D=>x(u,"background",D),[Ht]),m(c,u)};I(h,c=>{r(Lt)?c(b):c(d,!1)})}m(o,i)};I(jt,o=>{F()&&o(St)})}s(X),Qt(X,o=>K=o,()=>K),T((o,i,h,b,d,c,u,D)=>{x(O,"background",o),x(l,"color",i),n(g,a.title),x(Q,"color",h),n(Dt,b),x(U,"color",d),x(U,"border-bottom-color",c),x(W,"color",u),x(W,"border-bottom-color",D)},[()=>f().backgroundDark,()=>f().textBright,()=>f().textDim,()=>a.authors.join(", "),()=>r(p)==="info"?f().textBright:f().textDull,()=>r(p)==="info"?f().accent:"transparent",()=>r(p)==="discussion"?f().textBright:f().textDull,()=>r(p)==="discussion"?f().accent:"transparent"]),m(v,L)},$$slots:{default:!0}}),Kt()}Yt(["click"]);export{Pa as component,Da as universal};
