import{h as qt,i as Et,u as F,j as Ht,d as Lt}from"../chunks/dyZAUeH2.js";import"../chunks/Bg9kRutz.js";import{p as Jt,a as Kt,i as n,a5 as mt,f as A,s as t,t as $,ab as bt,c as e,r as s,k as S}from"../chunks/i-Dxzh4-.js";import{i as w,b as Qt,s as i}from"../chunks/GNpwh-9T.js";import{P as Wt,a as yt}from"../chunks/CfszLjNa.js";import{e as xt,i as Xt}from"../chunks/Da2w85Gb.js";import{a as _,t as B,c as Q,e as Yt}from"../chunks/CjOfaZex.js";import{d as Zt}from"../chunks/AeTdaPAh.js";import{t as b,s as L,a as ta}from"../chunks/C3MWGuYO.js";import{p as kt}from"../chunks/CHAJi5Dc.js";import{B as aa}from"../chunks/BncN0TPR.js";import{B as sa}from"../chunks/QHfWtbYP.js";import{S as ea,A as na}from"../chunks/LqLgb7Ly.js";const ra=async({params:N})=>({book:await qt(N.isbn)}),Aa=Object.freeze(Object.defineProperty({__proto__:null,load:ra},Symbol.toStringTag,{value:"Module"}));async function ia(N,D){var d;const a=F().readingList;Lt({readingList:[...a,D.isbn]}),(d=F())==null||d.readingList.push(D.isbn)}async function la(N,D){const a=F().readingList.filter(d=>d!==D.isbn);Lt({readingList:a}),F().readingList=a}var oa=B('<h2 class="svelte-4ny7li"> </h2>'),va=B('<button class="rating svelte-4ny7li"><!> <span class="count svelte-4ny7li"> </span></button>'),ca=B('<a href="/author" class="svelte-4ny7li"> </a><!>',1),pa=B('<span class="svelte-4ny7li"><span class="svelte-4ny7li">Characters:</span> </span>'),ua=B('<div class="book-info svelte-4ny7li"><div class="title svelte-4ny7li"><h1 class="svelte-4ny7li"> </h1> <!></div> <!> <!> <p class="description svelte-4ny7li"> </p></div> <div class="product-info svelte-4ny7li"><h2 class="svelte-4ny7li">Product Information</h2> <span class="svelte-4ny7li"><span class="svelte-4ny7li">Title:</span> </span> <span class="svelte-4ny7li"><span class="svelte-4ny7li"> </span> <span class="svelte-4ny7li"></span></span> <span class="svelte-4ny7li"><span class="svelte-4ny7li">ISBN-13:</span> </span> <span class="svelte-4ny7li"><span class="svelte-4ny7li">Page Count:</span> </span> <span class="svelte-4ny7li"><span class="svelte-4ny7li">Publish Date:</span> </span> <span class="svelte-4ny7li"><span class="svelte-4ny7li"> </span> </span> <!> <span class="svelte-4ny7li"><span class="svelte-4ny7li">Tags:</span> </span></div>',1),_a=B('<button id="add-to-reading-list" class="remove-from-reading-list svelte-4ny7li">Remove from Reading List</button>'),da=B('<button id="add-to-reading-list" class="svelte-4ny7li">Add to Reading List</button>'),fa=B('<!> <nav class="svelte-4ny7li"><div class="book-name svelte-4ny7li"><h1 class="svelte-4ny7li"> </h1> <h2 class="svelte-4ny7li"> </h2></div> <div class="views svelte-4ny7li"><button class="svelte-4ny7li">Info</button> <button class="svelte-4ny7li">Discussion</button></div></nav> <section class="svelte-4ny7li"><!> <!></section>',1);function $a(N,D){Jt(D,!0);let a=D.data.book,d=bt("info");function W(c){return function(){mt(d,kt(c)),X.scrollTop=0}}let Bt=Et(a.isbn),pt=bt(null),Dt=S(()=>{var c;return((c=F())==null?void 0:c.readingList.includes(a.isbn))??!1});function Pt(c,ut=3){c=c.replaceAll("--","â€”"),c=c.replaceAll(/\.(\S)/g,(o,h)=>`. ${h}`);let P=c.split(/([.!?])\s*/);const T=[];for(let o=0;o<P.length;o+=2){const h=o<P.length-1?P[o+1]:"";T.push(P[o]+h)}let R=T.map((o,h)=>(h+1)%ut===0&&h!==T.length-1?o+`

`:o).join("");return R=R.replaceAll(/\.(\S)/g,(o,h)=>`. ${h}`),R}let X;Wt(N,{type:"search",get sidebar(){return n(pt)},set sidebar(c){mt(pt,kt(c))},children:(c,ut)=>{var P=fa(),T=A(P);aa(T,{style:"position: fixed; top: 1rem; left: 1rem;"});var O=t(T,2),R=e(O),o=e(R),h=e(o,!0);s(o);var Y=t(o,2),Rt=e(Y,!0);s(Y),s(R);var _t=t(R,2),V=e(_t),jt=S(()=>W("info"));V.__click=function(...r){var l;(l=n(jt))==null||l.apply(this,r)};var Z=t(V,2),At=S(()=>W("discussion"));Z.__click=function(...r){var l;(l=n(At))==null||l.apply(this,r)},s(_t),s(O);var tt=t(O,2),dt=e(tt);{var $t=r=>{var l=ua(),y=A(l),x=e(y),g=e(x),p=e(g,!0);s(g);var f=t(g,2);{var j=v=>{var u=oa(),m=e(u,!0);s(u),$(()=>i(m,a.authors[0])),_(v,u)};w(f,v=>{a.authors.length>0&&v(j)})}s(x);var q=t(x,2);sa(q,{book:a,style:"width: 10rem"});var z=t(q,2);yt(z,()=>Ht(a.isbn),null,(v,u)=>{var m=S(()=>{var{rating:U,count:K}=n(u);return{rating:U,count:K}}),k=S(()=>n(m).rating),M=S(()=>n(m).count),C=va(),ct=S(()=>W("discussion"));C.__click=function(...U){var K;(K=n(ct))==null||K.apply(this,U)};var H=e(C);ea(H,{get rating(){return n(k)}});var I=t(H),J=t(I),Vt=e(J);s(J),s(C),$(U=>{i(I,` ${U??""} `),i(Vt,`(${n(M)??""})`)},[()=>n(k).toFixed(1)]),_(v,C)});var G=t(z,2),at=e(G,!0);s(G),s(y);var E=t(y,2),st=t(e(E),2),Ct=t(e(st),1,!0);s(st);var et=t(st,2),nt=e(et),It=e(nt);s(nt);var ft=t(nt,2);xt(ft,22,()=>a.authors,v=>v,(v,u,m)=>{var k=ca(),M=A(k),C=e(M,!0);s(M);var ct=t(M);{var H=I=>{var J=Yt(",");_(I,J)};w(ct,I=>{n(m)!==a.authors.length-1&&I(H)})}$(()=>i(C,u)),_(v,k)}),s(ft),s(et);var rt=t(et,2),Ft=t(e(rt),1,!0);s(rt);var it=t(rt,2),Nt=t(e(it),1,!0);s(it);var lt=t(it,2),Ot=t(e(lt),1,!0);s(lt);var ot=t(lt,2),vt=e(ot),zt=e(vt);s(vt);var Gt=t(vt,1,!0);s(ot);var gt=t(ot,2);{var Mt=v=>{var u=pa(),m=t(e(u),1,!0);s(u),$(k=>i(m,k),[()=>a.characters.join(", ")]),_(v,u)};w(gt,v=>{a.characters.length>0&&v(Mt)})}var ht=t(gt,2),Ut=t(e(ht),1,!0);s(ht),s(E),$((v,u,m,k)=>{i(p,a.title),L(G,"color",v),i(at,u),i(Ct,a.title),i(It,`Author${(a.authors.length===1?"":"s")??""}:`),i(Ft,a.isbn),i(Nt,a.pageCount),i(Ot,a.publishDate),i(zt,`Publisher${(a.publishers.length===1?"":"s")??""}:`),i(Gt,m),i(Ut,k)},[()=>b().textDull,()=>Pt(a.description),()=>a.publishers.join(", "),()=>a.genres.join(", ")]),_(r,l)},St=r=>{var l=Q(),y=A(l);{var x=g=>{var p=Q(),f=A(p);yt(f,()=>Bt,null,(j,q)=>{var z=Q(),G=A(z);xt(G,17,()=>n(q),Xt,(at,E)=>{na(at,{get post(){return n(E)}})}),_(j,z)}),_(g,p)};w(y,g=>{n(d)==="discussion"&&g(x)},!0)}_(r,l)};w(dt,r=>{n(d)==="info"?r($t):r(St,!1)})}var wt=t(dt,2);{var Tt=r=>{var l=Q(),y=A(l);{var x=p=>{var f=_a();f.__click=[la,a],_(p,f)},g=p=>{var f=da();f.__click=[ia,a],$(j=>L(f,"background",j),[ta]),_(p,f)};w(y,p=>{n(Dt)?p(x):p(g,!1)})}_(r,l)};w(wt,r=>{F()&&r(Tt)})}s(tt),Qt(tt,r=>X=r,()=>X),$((r,l,y,x,g,p,f,j)=>{L(O,"background",r),L(o,"color",l),i(h,a.title),L(Y,"color",y),i(Rt,x),L(V,"color",g),L(V,"border-bottom-color",p),L(Z,"color",f),L(Z,"border-bottom-color",j)},[()=>b().backgroundDark,()=>b().textBright,()=>b().textDim,()=>a.authors.join(", "),()=>n(d)==="info"?b().textBright:b().textDull,()=>n(d)==="info"?b().accent:"transparent",()=>n(d)==="discussion"?b().textBright:b().textDull,()=>n(d)==="discussion"?b().accent:"transparent"]),_(c,P)},$$slots:{default:!0}}),Kt()}Zt(["click"]);export{$a as component,Aa as universal};
