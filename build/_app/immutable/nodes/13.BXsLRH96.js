import"../chunks/Bg9kRutz.js";import{p as _e,al as b,f as C,t as D,g as ge,I as t,ab as v,s as o,e as k,r as x,ak as T}from"../chunks/ZzbjMaxL.js";import{s as U}from"../chunks/DfWBJXpw.js";import{i as O}from"../chunks/DPZ8gRHv.js";import{e as he,i as be}from"../chunks/SjV7uEaf.js";import{a as f,t as y,c as ke}from"../chunks/DNWF8ubz.js";import{B as xe,t as n,b as a,r as W}from"../chunks/B0emLdTm.js";import{d as ye,b as qe}from"../chunks/DNSqyUr2.js";import{b as z}from"../chunks/BsU-R_-9.js";import{p as I}from"../chunks/zrPdNk7G.js";import{g as Be}from"../chunks/BH4cheHN.js";import{h as Pe,i as je,u as X}from"../chunks/C2RLqV5n.js";import{P as we}from"../chunks/YcGVEFUA.js";import{F as Ce}from"../chunks/DPnCo1nZ.js";import{B as Y}from"../chunks/DJXBSyL2.js";const De=({params:_})=>_,Ye=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));function Oe(_,q){_.key==="Enter"&&q()}var Re=y('<span class="error svelte-qtsnrh"> </span>'),Ee=y('<span class="error svelte-qtsnrh"> </span>'),Se=y('<h1 class="svelte-qtsnrh">Choose a book to rate</h1> <div class="book-search svelte-qtsnrh"><input id="search" type="text" class="svelte-qtsnrh"> <!></div> <div class="search-results svelte-qtsnrh"><!></div> <h2 class="body-name svelte-qtsnrh">Rating</h2> <div class="stars svelte-qtsnrh"><input id="rating" class="svelte-qtsnrh"> <!></div>',1),Fe=y('<!> <h2 class="body-name svelte-qtsnrh"></h2> <textarea id="body" class="svelte-qtsnrh"></textarea> <button class="post-button svelte-qtsnrh">Post</button> <!>',1),Ne=y("<!> <!>",1);function Ze(_,q){_e(q,!0);let{type:R}=q.data,Z={general:"Post Body",rating:"Review (Optional)",update:"Comments",reply:null}[R],E,p=b(null),B,L=b(I([])),S=b("");async function ee(){v(L,I(await je(t(S))))}function te(){if(M(),V(),t(d)||t(m))return;let i={type:R,body:E};t(p)&&(i=Object.assign(i,{books:[t(p).isbn],rating:Number(B)})),Pe(i),Be("/profile")}function re(i){return function(){v(p,I(i)),V()}}let d=b(""),m=b("");function M(){/^\d(\.\d)?$/.test(B)?v(d,""):v(d,"Value must be between 0 and 10, to at most one decimal place.")}function V(){t(p)?v(m,""):v(m,"Choose a book to rate.")}var $=Ne(),A=C($);xe(A,{});var ae=o(A,2);we(ae,{class:"new-post-page",children:(i,Te)=>{var G=Fe(),H=C(G);{var oe=l=>{var j=Se(),w=C(j),h=o(w,2),s=k(h);W(s),s.__keyup=[Oe,ee];var ne=o(s,2);{var ie=e=>{var r=Re(),u=k(r,!0);x(r),D(()=>U(u,t(m))),f(e,r)};O(ne,e=>{t(m)&&e(ie)})}x(h);var N=o(h,2),le=k(N);{var ce=e=>{const r=T(X);Y(e,{get book(){return t(p)},get user(){return t(r)}})},ue=e=>{var r=ke(),u=C(r);he(u,17,()=>t(L),be,(de,Q)=>{const me=T(X),fe=T(()=>re(t(Q)));Y(de,{get book(){return t(Q)},get user(){return t(me)},get onclick(){return t(fe)}})}),f(e,r)};O(le,e=>{t(p)?e(ce):e(ue,!1)})}x(N);var J=o(N,2),K=o(J,2),c=k(K);W(c),c.__input=M;var ve=o(c,2);{var pe=e=>{var r=Ee(),u=k(r,!0);x(r),D(()=>U(u,t(d))),f(e,r)};O(ve,e=>{t(d)&&e(pe)})}x(K),D((e,r,u)=>{a(w,"color",e),a(s,"background",r),a(s,"color",e),a(s,"outline",t(m)?"2px solid #f38ba8":"none"),a(J,"color",u),a(c,"background",r),a(c,"color",e),a(c,"outline",t(d)?"2px solid #f38ba8":"none")},[()=>n().text,()=>n().backgroundDark,()=>n().textDull]),z(s,()=>t(S),e=>v(S,e)),z(c,()=>B,e=>B=e),f(l,j)};O(H,l=>{R==="rating"&&l(oe)})}var F=o(H,2);F.textContent=Z;var g=o(F,2);qe(g);var P=o(g,2);P.__click=te;var se=o(P,2);Ce(se,{selected:"profile"}),D((l,j,w,h,s)=>{a(F,"color",l),a(g,"color",j),a(g,"background",w),a(P,"color",h),a(P,"background-image",s)},[()=>n().textDull,()=>n().text,()=>n().backgroundDark,()=>n().background,()=>`linear-gradient(${n().accent}, ${n().accent2})`]),z(g,()=>E,l=>E=l),f(i,G)},$$slots:{default:!0}}),f(_,$),ge()}ye(["keyup","input","click"]);export{Ze as component,Ye as universal};
