import"../chunks/Bg9kRutz.js";import{s as r,j as l,r as o,t as D,p as wt,ae as m,g as t,a as Dt,af as T,f as Y,X as Rt,aD as St,d as xt}from"../chunks/BKc628eD.js";import{s as M}from"../chunks/B5CGVe3C.js";import{a as Tt}from"../chunks/Tz89-DA6.js";import{p as st,i as I}from"../chunks/C8FwvXbo.js";import{e as ft,i as Bt}from"../chunks/CS_7v10S.js";import{E as Ot,h as At}from"../chunks/DbSacRr3.js";import{a as p,n as Gt,t as b,c as Lt}from"../chunks/aB18zCBe.js";import{a as Vt,s as nt,t as e,b as a,B as Ft,F as It,r as yt,G as Mt,w as Nt}from"../chunks/5HA2uAEG.js";import{d as jt,b as qt}from"../chunks/DKN0qxhB.js";import{b as mt}from"../chunks/u1ANI_dt.js";import{g as zt}from"../chunks/Bs0ZgzjR.js";import{P as Ut}from"../chunks/EjXlVpWZ.js";import{F as Xt}from"../chunks/BnibLXhw.js";import{b as Ht}from"../chunks/BZ3Nx4FG.js";import{r as Jt,p as Kt}from"../chunks/B1k3M35K.js";import{o as Qt}from"../chunks/Chf9Xw7W.js";import{B as Wt}from"../chunks/BV2U8vf9.js";import{T as Yt}from"../chunks/fktZRJ4I.js";const Zt=({params:B})=>B,Me=Object.freeze(Object.defineProperty({__proto__:null,load:Zt},Symbol.toStringTag,{value:"Module"}));var $t=Gt('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M10 7L15 12L10 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function te(B,d){let O=Jt(d,["$$slots","$$events","$$legacy","stroke"]);var f=$t();let i;var V=r(l(f),2),h=l(V);o(V),o(f),D(()=>{i=Vt(f,i,{...O,width:"256px",height:"256px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0),nt(h,"stroke",d.stroke)}),p(B,f)}var ee=(B,d)=>m(d,!t(d)),ae=(B,d,O,f)=>{d(t(O)),m(f,!1)},re=b('<button class="option svelte-1o9drnu"> </button>'),oe=b('<div class="select svelte-1o9drnu"><button class="value svelte-1o9drnu"> <!></button> <div class="options svelte-1o9drnu"></div></div>');function se(B,d){wt(d,!0);let O=Kt(d,"value",15),f=T(!1),i;Qt(()=>{document.addEventListener("click",A=>{A.composedPath().includes(i)||m(f,!1)})});var V=oe(),h=l(V);h.__click=[ee,f];var F=l(h),at=r(F);te(at,{get stroke(){return e().text},style:"width: 1rem; height: 1rem;"}),o(h);var k=r(h,2);ft(k,21,()=>d.options,Bt,(A,N)=>{var R=re();R.__click=[ae,O,N,f];var rt=l(R,!0);o(R),D((lt,it,vt)=>{a(R,"--gray",lt),a(R,"--base-color",it),a(R,"color",vt),M(rt,t(N))},[()=>e().textDark,()=>e().backgroundDark,()=>e().text]),p(A,R)}),o(k),o(V),Ht(V,A=>i=A,()=>i),D((A,N,R)=>{a(h,"color",A),a(h,"background",N),M(F,`${O()??""} `),a(k,"border-color",R),a(k,"display",t(f)?"flex":"none")},[()=>e().text,()=>e().backgroundDark,()=>e().textDark]),p(B,V),Dt()}jt(["click"]);function ne(B,d){B.key==="Enter"&&d()}var le=b('<span class="error svelte-vdn7lm"> </span>'),ie=b('<div class="book search-book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div></div>'),ve=b('<h2 class="body-name svelte-vdn7lm"> </h2> <div class="book-search svelte-vdn7lm"><input id="search" type="text" class="svelte-vdn7lm"> <!></div> <div class="search-results svelte-vdn7lm"></div>',1),de=b('<div class="book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div> <button class="close svelte-vdn7lm"><!></button></div>'),ce=b('<div class="books"></div>'),ue=b('<span class="error svelte-vdn7lm"> </span>'),_e=b('<!> <h2 class="body-name svelte-vdn7lm">Rating</h2> <div class="stars svelte-vdn7lm"><input id="rating" class="svelte-vdn7lm"> <!></div>',1),pe=b('<h2 class="body-name svelte-vdn7lm">Update Type</h2> <!> <!>',1),me=(B,d)=>m(d,!t(d)),fe=b('<div class="preview svelte-vdn7lm"><!></div>'),ge=b('<textarea id="body" class="svelte-vdn7lm"></textarea>'),be=b("<!> <!>",1),he=b('<span class="svelte-vdn7lm"><!> <h1 class="svelte-vdn7lm"></h1></span> <!> <!> <div class="body-header svelte-vdn7lm"><h2 class="body-name preview-body svelte-vdn7lm"></h2> <button><!></button></div> <!> <!> <button class="post-button svelte-vdn7lm">Post</button> <!>',1),ke=b("<!> <!>",1);function Ne(B,d){wt(d,!0);const O=(g,j)=>{let q=Rt(()=>St(j==null?void 0:j(),"Add a book"));var C=ve(),S=Y(C),z=l(S,!0);o(S);var G=r(S,2),x=l(G);yt(x),x.__keyup=[ne,R];var $=r(x,2);{var K=u=>{var _=le(),E=l(_,!0);o(_),D(()=>M(E,t(Z))),p(u,_)};I($,u=>{t(Z)&&u(K)})}o(G);var U=r(G,2);ft(U,21,()=>t(A),Bt,(u,_)=>{var E=ie(),X=xt(()=>vt(t(_)));E.__click=function(...s){var n;(n=t(X))==null||n.apply(this,s)};var L=l(E),tt=r(L,2),Q=l(tt),ct=l(Q,!0);o(Q);var H=r(Q,2),ut=l(H,!0);o(H),o(tt),o(E),D((s,n,c)=>{nt(L,"alt",`${t(_).title??""} cover`),nt(L,"src",t(_).cover),a(Q,"color",s),M(ct,t(_).title),a(H,"color",n),M(ut,c)},[()=>e().text,()=>e().textDull,()=>t(_).authors.join(",")]),p(u,E)}),o(U),D((u,_,E)=>{a(S,"color",u),M(z,t(q)),a(x,"background",_),a(x,"color",E),a(x,"outline",t(Z)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),mt(x,()=>t(N),u=>m(N,u)),p(g,C)},f=g=>{var j=ce();ft(j,21,()=>t(k),q=>q.isbn,(q,C)=>{var S=de(),z=l(S),G=r(z,2),x=l(G),$=l(x,!0);o(x);var K=r(x,2),U=l(K,!0);o(K),o(G);var u=r(G,2),_=xt(()=>Ct(t(C)));u.__click=function(...X){var L;(L=t(_))==null||L.apply(this,X)};var E=l(u);Yt(E,{stroke:"#f38ba8",style:"width: 1.25rem; height: 1.25rem;"}),o(u),o(S),D((X,L,tt)=>{nt(z,"alt",`${t(C).title??""} cover`),nt(z,"src",t(C).cover),a(x,"color",X),M($,t(C).title),a(K,"color",L),M(U,tt)},[()=>e().text,()=>e().textDull,()=>t(C).authors.join(",")]),p(q,S)}),o(j),p(g,j)};let{type:i}=d.data,V={general:"Post Body",rating:"Review (Optional)",update:"Comments (Optional)",reply:null}[i],h=T(""),F=T(null),at=T("start"),k=T(st([])),A=T(st([])),N=T("");async function R(){m(A,st(await Nt(t(N))))}let rt=T("");function lt(){i==="general"&&t(h).trim().length===0?m(rt,"Body cannot be empty"):m(rt,"")}function it(){if(i==="rating"&&gt(),(i==="rating"||i==="update")&&dt(),i==="general"&&lt(),t(J)||t(Z)||t(rt))return;let g={type:i,body:t(h),books:t(k).map(j=>j.isbn)};t(F)!==null&&(g=Object.assign(g,{rating:Number(t(F))})),i==="update"&&(g=Object.assign(g,{updateType:t(at)})),It(g),zt("/profile")}function vt(g){return function(){t(k).push(g),dt()}}function Ct(g){return function(){m(k,st(t(k).filter(j=>j.isbn!==g.isbn))),dt()}}let J=T(""),Z=T("");function gt(){if(i==="rating"){if(t(F)===null){m(J,"Add a rating value.");return}if(!/^\d(\.\d)?$/.test(t(F))){m(J,"Value must be between 0 and 10, to at most one decimal place.");return}}m(J,"")}function dt(){i==="rating"&&t(k).length===0?m(Z,"Choose a book to rate."):m(Z,"")}let bt=T(!1);var ht=ke(),kt=Y(ht);Ft(kt,{});var Et=r(kt,2);Ut(Et,{class:"new-post-page",children:(g,j)=>{var q=he(),C=Y(q),S=l(C);Wt(S,{});var z=r(S,2);z.textContent=`New ${i??""} Post`,o(C);var G=r(C,2);{var x=s=>{var n=_e(),c=Y(n);{var P=w=>{O(w,()=>"Choose a book")},W=w=>{f(w)};I(c,w=>{t(k).length===0?w(P):w(W,!1)})}var y=r(c,2),et=r(y,2),v=l(et);yt(v),v.__input=gt;var _t=r(v,2);{var Pt=w=>{var ot=ue(),pt=l(ot,!0);o(ot),D(()=>M(pt,t(J))),p(w,ot)};I(_t,w=>{t(J)&&w(Pt)})}o(et),D((w,ot,pt)=>{a(y,"color",w),a(v,"background",ot),a(v,"color",pt),a(v,"outline",t(J)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),mt(v,()=>t(F),w=>m(F,w)),p(s,n)};I(G,s=>{i==="rating"&&s(x)})}var $=r(G,2);{var K=s=>{var n=pe(),c=Y(n),P=r(c,2);se(P,{options:["start","finish","abandon"],get value(){return t(at)},set value(v){m(at,st(v))}});var W=r(P,2);{var y=v=>{O(v,()=>"Choose a book")},et=v=>{f(v)};I(W,v=>{t(k).length===0?v(y):v(et,!1)})}D(v=>a(c,"color",v),[()=>e().textDull]),p(s,n)};I($,s=>{i==="update"&&s(K)})}var U=r($,2),u=l(U);u.textContent=V;var _=r(u,2);_.__click=[me,bt];var E=l(_);Ot(E,{get stroke(){return e().textDull},style:"width: 1rem; height: 1rem;"}),o(_),o(U);var X=r(U,2);{var L=s=>{var n=Lt(),c=Y(n);Tt(c,()=>Mt(t(h)),null,(P,W)=>{var y=fe(),et=l(y);At(et,()=>t(W),!1,!1),o(y),D((v,_t)=>{a(y,"color",v),a(y,"background",_t)},[()=>e().text,()=>e().backgroundDark]),p(P,y)}),p(s,n)},tt=s=>{var n=ge();qt(n),D((c,P)=>{a(n,"color",c),a(n,"background",P)},[()=>e().text,()=>e().backgroundDark]),mt(n,()=>t(h),c=>m(h,c)),p(s,n)};I(X,s=>{t(bt)?s(L):s(tt,!1)})}var Q=r(X,2);{var ct=s=>{var n=be(),c=Y(n);{var P=y=>{f(y)};I(c,y=>{t(k).length!==0&&y(P)})}var W=r(c,2);O(W,()=>"Add a book"),p(s,n)};I(Q,s=>{i!=="rating"&&i!=="update"&&s(ct)})}var H=r(Q,2);H.__click=it;var ut=r(H,2);Xt(ut,{selected:"profile"}),D((s,n,c,P)=>{a(z,"color",s),a(u,"color",n),a(H,"color",c),a(H,"background-image",P)},[()=>e().text,()=>e().textDull,()=>e().background,()=>`linear-gradient(${e().accent}, ${e().accent2})`]),p(g,q)},$$slots:{default:!0}}),p(B,ht),Dt()}jt(["keyup","click","input"]);export{Ne as component,Me as universal};
