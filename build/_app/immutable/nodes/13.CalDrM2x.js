import"../chunks/Bg9kRutz.js";import{s as a,j as i,r as o,t as P,p as gt,ae as u,g as t,a as mt,af as V,f as et,X as Bt,aD as Dt,d as _t}from"../chunks/BKc628eD.js";import{s as N}from"../chunks/R2Zhwpgh.js";import{p as at,i as Q}from"../chunks/C8FwvXbo.js";import{e as dt,i as ht}from"../chunks/CS_7v10S.js";import{a as b,n as jt,t as B}from"../chunks/H8-2uB_g.js";import{a as Ct,s as rt,t as r,b as e,B as Pt,F as Rt,r as ft,y as St}from"../chunks/QXM6ucii.js";import{d as bt,b as Tt}from"../chunks/BQkRYWVv.js";import{b as vt}from"../chunks/DWJ5EWP3.js";import{g as Et}from"../chunks/B6mFCapi.js";import{P as Ot}from"../chunks/CZFjDx1V.js";import{F as Lt}from"../chunks/DLl-uS-N.js";import{b as Vt}from"../chunks/BZ3Nx4FG.js";import{r as At,p as Ft}from"../chunks/B1k3M35K.js";import{o as Gt}from"../chunks/Chf9Xw7W.js";import{B as Mt}from"../chunks/BOF16NrH.js";import{T as Nt}from"../chunks/BbIUwA9M.js";const It=({params:D})=>D,we=Object.freeze(Object.defineProperty({__proto__:null,load:It},Symbol.toStringTag,{value:"Module"}));var qt=jt('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M10 7L15 12L10 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function zt(D,d){let R=At(d,["$$slots","$$events","$$legacy","stroke"]);var _=qt();let s;var A=a(i(_),2),m=i(A);o(A),o(_),P(()=>{s=Ct(_,s,{...R,width:"256px",height:"256px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0),rt(m,"stroke",d.stroke)}),b(D,_)}var Ut=(D,d)=>u(d,!t(d)),Xt=(D,d,R,_)=>{d(t(R)),u(_,!1)},Ht=B('<button class="option svelte-1o9drnu"> </button>'),Jt=B('<div class="select svelte-1o9drnu"><button class="value svelte-1o9drnu"> <!></button> <div class="options svelte-1o9drnu"></div></div>');function Kt(D,d){gt(d,!0);let R=Ft(d,"value",15),_=V(!1),s;Gt(()=>{document.addEventListener("click",S=>{S.composedPath().includes(s)||u(_,!1)})});var A=Jt(),m=i(A);m.__click=[Ut,_];var F=i(m),Z=a(F);zt(Z,{get stroke(){return r().text},style:"width: 1rem; height: 1rem;"}),o(m);var h=a(m,2);dt(h,21,()=>d.options,ht,(S,I)=>{var j=Ht();j.__click=[Xt,R,I,_];var $=i(j,!0);o(j),P((ot,st,lt)=>{e(j,"--gray",ot),e(j,"--base-color",st),e(j,"color",lt),N($,t(I))},[()=>r().textDark,()=>r().backgroundDark,()=>r().text]),b(S,j)}),o(h),o(A),Vt(A,S=>s=S,()=>s),P((S,I,j)=>{e(m,"color",S),e(m,"background",I),N(F,`${R()??""} `),e(h,"border-color",j),e(h,"display",t(_)?"flex":"none")},[()=>r().text,()=>r().backgroundDark,()=>r().textDark]),b(D,A),mt()}bt(["click"]);function Qt(D,d){D.key==="Enter"&&d()}var Wt=B('<span class="error svelte-1dsrllo"> </span>'),Yt=B('<div class="book search-book svelte-1dsrllo"><img class="svelte-1dsrllo"> <div class="info svelte-1dsrllo"><span class="title"> </span> <span class="authors svelte-1dsrllo"> </span></div></div>'),Zt=B('<h2 class="body-name svelte-1dsrllo"> </h2> <div class="book-search svelte-1dsrllo"><input id="search" type="text" class="svelte-1dsrllo"> <!></div> <div class="search-results svelte-1dsrllo"></div>',1),$t=B('<div class="book svelte-1dsrllo"><img class="svelte-1dsrllo"> <div class="info svelte-1dsrllo"><span class="title"> </span> <span class="authors svelte-1dsrllo"> </span></div> <button class="close svelte-1dsrllo"><!></button></div>'),te=B('<div class="books"></div>'),ee=B('<span class="error svelte-1dsrllo"> </span>'),ae=B('<!> <h2 class="body-name svelte-1dsrllo">Rating</h2> <div class="stars svelte-1dsrllo"><input id="rating" class="svelte-1dsrllo"> <!></div>',1),re=B('<h2 class="body-name svelte-1dsrllo">Update Type</h2> <!> <!>',1),oe=B('<span class="svelte-1dsrllo"><!> <h1 class="svelte-1dsrllo"></h1></span> <!> <!> <h2 class="body-name svelte-1dsrllo"></h2> <textarea id="body" class="svelte-1dsrllo"></textarea> <!> <button class="post-button svelte-1dsrllo">Post</button> <!>',1),se=B("<!> <!>",1);function Be(D,d){gt(d,!0);const R=(p,k)=>{let q=Bt(()=>Dt(k==null?void 0:k(),"Add a book"));var x=Zt(),C=et(x),z=i(C,!0);o(C);var T=a(C,2),f=i(T);ft(f),f.__keyup=[Qt,j];var Y=a(f,2);{var J=v=>{var c=Wt(),y=i(c,!0);o(c),P(()=>N(y,t(W))),b(v,c)};Q(Y,v=>{t(W)&&v(J)})}o(T);var U=a(T,2);dt(U,21,()=>t(S),ht,(v,c)=>{var y=Yt(),E=_t(()=>lt(t(c)));y.__click=function(...X){var M;(M=t(E))==null||M.apply(this,X)};var O=i(y),l=a(O,2),w=i(l),G=i(w,!0);o(w);var L=a(w,2),K=i(L,!0);o(L),o(l),o(y),P((X,M,n)=>{rt(O,"alt",`${t(c).title??""} cover`),rt(O,"src",t(c).cover),e(w,"color",X),N(G,t(c).title),e(L,"color",M),N(K,n)},[()=>r().text,()=>r().textDull,()=>t(c).authors.join(",")]),b(v,y)}),o(U),P((v,c,y)=>{e(C,"color",v),N(z,t(q)),e(f,"background",c),e(f,"color",y),e(f,"outline",t(W)?"2px solid #f38ba8":"none")},[()=>r().textDull,()=>r().backgroundDark,()=>r().text]),vt(f,()=>t(I),v=>u(I,v)),b(p,x)},_=p=>{var k=te();dt(k,21,()=>t(h),q=>q.isbn,(q,x)=>{var C=$t(),z=i(C),T=a(z,2),f=i(T),Y=i(f,!0);o(f);var J=a(f,2),U=i(J,!0);o(J),o(T);var v=a(T,2),c=_t(()=>kt(t(x)));v.__click=function(...E){var O;(O=t(c))==null||O.apply(this,E)};var y=i(v);Nt(y,{stroke:"#f38ba8",style:"width: 1.25rem; height: 1.25rem;"}),o(v),o(C),P((E,O,l)=>{rt(z,"alt",`${t(x).title??""} cover`),rt(z,"src",t(x).cover),e(f,"color",E),N(Y,t(x).title),e(J,"color",O),N(U,l)},[()=>r().text,()=>r().textDull,()=>t(x).authors.join(",")]),b(q,C)}),o(k),b(p,k)};let{type:s}=d.data,A={general:"Post Body",rating:"Review (Optional)",update:"Comments (Optional)",reply:null}[s],m=V(""),F=V(null),Z=V("start"),h=V(at([])),S=V(at([])),I=V("");async function j(){u(S,at(await St(t(I))))}let $=V("");function ot(){s==="general"&&t(m).trim().length===0?u($,"Body cannot be empty"):u($,"")}function st(){if(s==="rating"&&ct(),(s==="rating"||s==="update")&&nt(),s==="general"&&ot(),t(H)||t(W)||t($))return;let p={type:s,body:t(m),books:t(h).map(k=>k.isbn)};t(F)!==null&&(p=Object.assign(p,{rating:Number(t(F))})),s==="update"&&(p=Object.assign(p,{updateType:t(Z)})),Rt(p),Et("/profile")}function lt(p){return function(){t(h).push(p),nt()}}function kt(p){return function(){u(h,at(t(h).filter(k=>k.isbn!==p.isbn))),nt()}}let H=V(""),W=V("");function ct(){if(s==="rating"){if(t(F)===null){u(H,"Add a rating value.");return}if(!/^\d(\.\d)?$/.test(t(F))){u(H,"Value must be between 0 and 10, to at most one decimal place.");return}}u(H,"")}function nt(){s==="rating"&&t(h).length===0?u(W,"Choose a book to rate."):u(W,"")}var ut=se(),pt=et(ut);Pt(pt,{});var xt=a(pt,2);Ot(xt,{class:"new-post-page",children:(p,k)=>{var q=oe(),x=et(q),C=i(x);Mt(C,{});var z=a(C,2);z.textContent=`New ${s??""} Post`,o(x);var T=a(x,2);{var f=l=>{var w=ae(),G=et(w);{var L=g=>{R(g,()=>"Choose a book")},K=g=>{_(g)};Q(G,g=>{t(h).length===0?g(L):g(K,!1)})}var X=a(G,2),M=a(X,2),n=i(M);ft(n),n.__input=ct;var yt=a(n,2);{var wt=g=>{var tt=ee(),it=i(tt,!0);o(tt),P(()=>N(it,t(H))),b(g,tt)};Q(yt,g=>{t(H)&&g(wt)})}o(M),P((g,tt,it)=>{e(X,"color",g),e(n,"background",tt),e(n,"color",it),e(n,"outline",t(H)?"2px solid #f38ba8":"none")},[()=>r().textDull,()=>r().backgroundDark,()=>r().text]),vt(n,()=>t(F),g=>u(F,g)),b(l,w)};Q(T,l=>{s==="rating"&&l(f)})}var Y=a(T,2);{var J=l=>{var w=re(),G=et(w),L=a(G,2);Kt(L,{options:["start","finish","abandon"],get value(){return t(Z)},set value(n){u(Z,at(n))}});var K=a(L,2);{var X=n=>{R(n,()=>"Choose a book")},M=n=>{_(n)};Q(K,n=>{t(h).length===0?n(X):n(M,!1)})}P(n=>e(G,"color",n),[()=>r().textDull]),b(l,w)};Q(Y,l=>{s==="update"&&l(J)})}var U=a(Y,2);U.textContent=A;var v=a(U,2);Tt(v);var c=a(v,2);{var y=l=>{R(l)};Q(c,l=>{s!=="rating"&&s!=="update"&&l(y)})}var E=a(c,2);E.__click=st;var O=a(E,2);Lt(O,{selected:"profile"}),P((l,w,G,L,K)=>{e(z,"color",l),e(U,"color",w),e(v,"color",l),e(v,"background",G),e(E,"color",L),e(E,"background-image",K)},[()=>r().text,()=>r().textDull,()=>r().backgroundDark,()=>r().background,()=>`linear-gradient(${r().accent}, ${r().accent2})`]),vt(v,()=>t(m),l=>u(m,l)),b(p,q)},$$slots:{default:!0}}),b(D,ut),mt()}bt(["keyup","click","input"]);export{Be as component,we as universal};
