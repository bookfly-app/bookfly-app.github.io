import"../chunks/Bg9kRutz.js";import{p as nt,j as q,r as b,s as n,t as w,g as t,a as lt,ae as v,af as y,f as E,d as K}from"../chunks/DiqXsxXx.js";import{s as A}from"../chunks/BuDD57Oe.js";import{p as z,i as F}from"../chunks/B8MhMNG7.js";import{e as it,i as ct}from"../chunks/CEg9CAyN.js";import{a as g,t as B,c as kt}from"../chunks/CBKY_uNu.js";import{t as s,b as a,B as xt,y as yt,D as qt,r as rt,u as ot}from"../chunks/uEAOx7Lv.js";import{d as vt,b as Bt}from"../chunks/C5FOHo4g.js";import{b as Q}from"../chunks/B9krz5El.js";import{g as Dt}from"../chunks/d-o4lLbY.js";import{P as jt}from"../chunks/Di7ugN6p.js";import{F as Ot}from"../chunks/FG3BQr2x.js";import{B as st}from"../chunks/CZwK-8pe.js";import{p as Pt}from"../chunks/DKOoKbnL.js";const Tt=({params:p})=>p,re=Object.freeze(Object.defineProperty({__proto__:null,load:Tt},Symbol.toStringTag,{value:"Module"}));var wt=(p,l)=>v(l,!t(l)),Ct=(p,l,i,D)=>{l(t(i)),v(D,!1)},Rt=B('<button class="option svelte-9ot8f3"> </button>'),St=B('<div class="select svelte-9ot8f3"><button class="value svelte-9ot8f3"> </button> <div class="options svelte-9ot8f3"></div></div>');function Et(p,l){nt(l,!0);let i=Pt(l,"value",15),D=y(!1);var j=St(),c=q(j);c.__click=[wt,D];var m=q(c,!0);b(c);var O=n(c,2);it(O,21,()=>l.options,ct,(C,h)=>{var f=Rt();f.__click=[Ct,i,h,D];var L=q(f,!0);b(f),w((M,_,k)=>{a(f,"--gray",M),a(f,"--base-color",_),a(f,"color",k),A(L,t(h))},[()=>s().textDark,()=>s().backgroundDark,()=>s().text]),g(C,f)}),b(O),b(j),w((C,h)=>{a(c,"color",C),a(c,"background",h),A(m,i()),a(O,"display",t(D)?"flex":"none")},[()=>s().text,()=>s().backgroundDark]),g(p,j),lt()}vt(["click"]);function Ft(p,l){p.key==="Enter"&&l()}var Nt=B('<span class="error svelte-qtsnrh"> </span>'),zt=B('<span class="error svelte-qtsnrh"> </span>'),At=B('<h2 class="body-name svelte-qtsnrh">Rating</h2> <div class="stars svelte-qtsnrh"><input id="rating" class="svelte-qtsnrh"> <!></div>',1),Lt=B('<h2 class="body-name svelte-qtsnrh">Update Type</h2> <!>',1),Mt=B('<h1 class="svelte-qtsnrh">Choose a book</h1> <div class="book-search svelte-qtsnrh"><input id="search" type="text" class="svelte-qtsnrh"> <!></div> <div class="search-results svelte-qtsnrh"><!></div> <!> <!> <h2 class="body-name svelte-qtsnrh"></h2> <textarea id="body" class="svelte-qtsnrh"></textarea> <button class="post-button svelte-qtsnrh">Post</button> <!>',1),Ut=B("<!> <!>",1);function oe(p,l){nt(l,!0);let{type:i}=l.data,D={general:"Post Body",rating:"Review (Optional)",update:"Comments",reply:null}[i],j,c=y(null),m=y(null),O=y("start"),C=y(z([])),h=y("");async function f(){v(C,z(await yt(t(h))))}function L(){if(i==="rating"&&(W(),X()),t(_)||t(k))return;let u={type:i,body:j};t(c)&&(u=Object.assign(u,{books:[t(c).isbn]})),t(m)!==null&&(u=Object.assign(u,{rating:Number(t(m))})),i==="update"&&(u=Object.assign(u,{updateType:t(O)})),qt(u),Dt("/profile")}function M(u){return function(){v(c,z(u)),X()}}let _=y(""),k=y("");function W(){if(i==="rating"){if(t(m)===null){v(_,"Add a rating value.");return}if(!/^\d(\.\d)?$/.test(t(m))){v(_,"Value must be between 0 and 10, to at most one decimal place.");return}}v(_,"")}function X(){i==="rating"&&!t(c)?v(k,"Choose a book to rate."):v(k,"")}var Y=Ut(),Z=E(Y);xt(Z,{});var ut=n(Z,2);jt(ut,{class:"new-post-page",children:(u,Vt)=>{var $=Mt(),tt=E($),U=n(tt,2),P=q(U);rt(P),P.__keyup=[Ft,f];var dt=n(P,2);{var pt=e=>{var r=Nt(),d=q(r,!0);b(r),w(()=>A(d,t(k))),g(e,r)};F(dt,e=>{t(k)&&e(pt)})}b(U);var V=n(U,2),ft=q(V);{var _t=e=>{const r=K(ot);st(e,{get book(){return t(c)},get user(){return t(r)}})},gt=e=>{var r=kt(),d=E(r);it(d,17,()=>t(C),ct,(x,o)=>{const H=K(ot),I=K(()=>M(t(o)));st(x,{get book(){return t(o)},get user(){return t(H)},get onclick(){return t(I)}})}),g(e,r)};F(ft,e=>{t(c)?e(_t):e(gt,!1)})}b(V);var et=n(V,2);{var bt=e=>{var r=At(),d=E(r),x=n(d,2),o=q(x);rt(o),o.__input=W;var H=n(o,2);{var I=T=>{var S=zt(),J=q(S,!0);b(S),w(()=>A(J,t(_))),g(T,S)};F(H,T=>{t(_)&&T(I)})}b(x),w((T,S,J)=>{a(d,"color",T),a(o,"background",S),a(o,"color",J),a(o,"outline",t(_)?"2px solid #f38ba8":"none")},[()=>s().textDull,()=>s().backgroundDark,()=>s().text]),Q(o,()=>t(m),T=>v(m,T)),g(e,r)};F(et,e=>{i==="rating"&&e(bt)})}var at=n(et,2);{var mt=e=>{var r=Lt(),d=E(r),x=n(d,2);Et(x,{options:["start","finish","abandon"],get value(){return t(O)},set value(o){v(O,z(o))}}),w(o=>a(d,"color",o),[()=>s().textDull]),g(e,r)};F(at,e=>{i==="update"&&e(mt)})}var G=n(at,2);G.textContent=D;var R=n(G,2);Bt(R);var N=n(R,2);N.__click=L;var ht=n(N,2);Ot(ht,{selected:"profile"}),w((e,r,d,x,o)=>{a(tt,"color",e),a(P,"background",r),a(P,"color",e),a(P,"outline",t(k)?"2px solid #f38ba8":"none"),a(G,"color",d),a(R,"color",e),a(R,"background",r),a(N,"color",x),a(N,"background-image",o)},[()=>s().text,()=>s().backgroundDark,()=>s().textDull,()=>s().background,()=>`linear-gradient(${s().accent}, ${s().accent2})`]),Q(P,()=>t(h),e=>v(h,e)),Q(R,()=>j,e=>j=e),g(u,$)},$$slots:{default:!0}}),g(p,Y),lt()}vt(["keyup","input","click"]);export{oe as component,re as universal};
