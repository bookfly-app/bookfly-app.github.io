import"../chunks/Bg9kRutz.js";import{p as _e,af as b,f as C,t as D,g as ge,H as t,ae as u,s as o,e as k,r as x,ad as T}from"../chunks/B60NIL-c.js";import{s as U}from"../chunks/WtNTA83C.js";import{p as z,i as O}from"../chunks/DYFtAg2Y.js";import{e as he,i as be}from"../chunks/BVGIpSUl.js";import{a as m,t as y,c as ke}from"../chunks/DyR6v0x8.js";import{B as xe,q as ye,t as n,b as r,r as W,v as qe,u as X}from"../chunks/b27God9X.js";import{d as Be,b as Pe}from"../chunks/crcT5ml2.js";import{b as H}from"../chunks/CSvhWgXl.js";import{g as je}from"../chunks/BrsKBTPS.js";import{P as we}from"../chunks/B6FtwBUj.js";import{F as Ce}from"../chunks/CmncCOfX.js";import{B as Y}from"../chunks/CS2mtfsX.js";const De=({params:_})=>_,We=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));function Oe(_,q){_.key==="Enter"&&q()}var Re=y('<span class="error svelte-qtsnrh"> </span>'),Ee=y('<span class="error svelte-qtsnrh"> </span>'),Se=y('<h1 class="svelte-qtsnrh">Choose a book to rate</h1> <div class="book-search svelte-qtsnrh"><input id="search" type="text" class="svelte-qtsnrh"> <!></div> <div class="search-results svelte-qtsnrh"><!></div> <h2 class="body-name svelte-qtsnrh">Rating</h2> <div class="stars svelte-qtsnrh"><input id="rating" class="svelte-qtsnrh"> <!></div>',1),Fe=y('<!> <h2 class="body-name svelte-qtsnrh"></h2> <textarea id="body" class="svelte-qtsnrh"></textarea> <button class="post-button svelte-qtsnrh">Post</button> <!>',1),Ne=y("<!> <!>",1);function Xe(_,q){_e(q,!0);let{type:R}=q.data,Z={general:"Post Body",rating:"Review (Optional)",update:"Comments",reply:null}[R],E,d=b(null),B,L=b(z([])),S=b("");async function ee(){u(L,z(await qe(t(S))))}function te(){if(M(),V(),t(p)||t(f))return;let i={type:R,body:E};t(d)&&(i=Object.assign(i,{books:[t(d).isbn],rating:Number(B)})),ye(i),je("/profile")}function ae(i){return function(){u(d,z(i)),V()}}let p=b(""),f=b("");function M(){/^\d(\.\d)?$/.test(B)?u(p,""):u(p,"Value must be between 0 and 10, to at most one decimal place.")}function V(){t(d)?u(f,""):u(f,"Choose a book to rate.")}var $=Ne(),A=C($);xe(A,{});var re=o(A,2);we(re,{class:"new-post-page",children:(i,Te)=>{var G=Fe(),I=C(G);{var oe=l=>{var j=Se(),w=C(j),h=o(w,2),s=k(h);W(s),s.__keyup=[Oe,ee];var ne=o(s,2);{var ie=e=>{var a=Re(),v=k(a,!0);x(a),D(()=>U(v,t(f))),m(e,a)};O(ne,e=>{t(f)&&e(ie)})}x(h);var N=o(h,2),le=k(N);{var ce=e=>{const a=T(X);Y(e,{get book(){return t(d)},get user(){return t(a)}})},ve=e=>{var a=ke(),v=C(a);he(v,17,()=>t(L),be,(pe,Q)=>{const fe=T(X),me=T(()=>ae(t(Q)));Y(pe,{get book(){return t(Q)},get user(){return t(fe)},get onclick(){return t(me)}})}),m(e,a)};O(le,e=>{t(d)?e(ce):e(ve,!1)})}x(N);var J=o(N,2),K=o(J,2),c=k(K);W(c),c.__input=M;var ue=o(c,2);{var de=e=>{var a=Ee(),v=k(a,!0);x(a),D(()=>U(v,t(p))),m(e,a)};O(ue,e=>{t(p)&&e(de)})}x(K),D((e,a,v)=>{r(w,"color",e),r(s,"background",a),r(s,"color",e),r(s,"outline",t(f)?"2px solid #f38ba8":"none"),r(J,"color",v),r(c,"background",a),r(c,"color",e),r(c,"outline",t(p)?"2px solid #f38ba8":"none")},[()=>n().text,()=>n().backgroundDark,()=>n().textDull]),H(s,()=>t(S),e=>u(S,e)),H(c,()=>B,e=>B=e),m(l,j)};O(I,l=>{R==="rating"&&l(oe)})}var F=o(I,2);F.textContent=Z;var g=o(F,2);Pe(g);var P=o(g,2);P.__click=te;var se=o(P,2);Ce(se,{selected:"profile"}),D((l,j,w,h,s)=>{r(F,"color",l),r(g,"color",j),r(g,"background",w),r(P,"color",h),r(P,"background-image",s)},[()=>n().textDull,()=>n().text,()=>n().backgroundDark,()=>n().background,()=>`linear-gradient(${n().accent}, ${n().accent2})`]),H(g,()=>E,l=>E=l),m(i,G)},$$slots:{default:!0}}),m(_,$),ge()}Be(["keyup","input","click"]);export{Xe as component,We as universal};
