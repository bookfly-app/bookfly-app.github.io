import"../chunks/Bg9kRutz.js";import{s as r,c as l,r as o,t as B,p as wt,a5 as m,g as t,a as Bt,a4 as T,f as Y,R as Pt,aF as St,d as xt}from"../chunks/BEuF9Aiu.js";import{s as M,b as Tt}from"../chunks/CIMMqX_l.js";import{t as e,s as a,F as Ot,C as At,a as Lt,H as Vt,E as Ft}from"../chunks/CVc447rH.js";import{r as Gt,a as It,p as st,i as I}from"../chunks/Dc0SBWOI.js";import{e as ft,i as Dt}from"../chunks/BLfhk5AQ.js";import{E as Mt,h as Nt}from"../chunks/nSJZ-H2Q.js";import{a as p,n as qt,t as h,c as zt}from"../chunks/DY2BR4sA.js";import{a as Ht,s as nt,r as yt}from"../chunks/5PfMkTiZ.js";import{d as Ct,a as Ut}from"../chunks/NdrWdQlm.js";import{b as mt}from"../chunks/7TVqqH3k.js";import{g as Jt}from"../chunks/DU9UGetc.js";import{B as Kt}from"../chunks/xPtz2Uzd.js";import{P as Qt}from"../chunks/fbTVcXp3.js";import{o as Wt}from"../chunks/DXIKV8-l.js";import{B as Xt}from"../chunks/INptXayj.js";import{T as Yt}from"../chunks/PdIdzfyJ.js";const Zt=({params:D})=>D,Ge=Object.freeze(Object.defineProperty({__proto__:null,load:Zt},Symbol.toStringTag,{value:"Module"}));var $t=qt('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M10 7L15 12L10 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function te(D,d){let O=Gt(d,["$$slots","$$events","$$legacy","stroke"]);var f=$t();let v;var F=r(l(f),2),b=l(F);o(F),o(f),B(()=>{v=Ht(f,v,{...O,width:"256px",height:"256px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0),nt(b,"stroke",d.stroke)}),p(D,f)}var ee=(D,d)=>m(d,!t(d)),ae=(D,d,O,f)=>{d(t(O)),m(f,!1)},re=h('<button class="option svelte-1o9drnu"> </button>'),oe=h('<div class="select svelte-1o9drnu"><button class="value svelte-1o9drnu"> <!></button> <div class="options svelte-1o9drnu"></div></div>');function se(D,d){wt(d,!0);let O=It(d,"value",15),f=T(!1),v;Wt(()=>{document.addEventListener("click",A=>{A.composedPath().includes(v)||m(f,!1)})});var F=oe(),b=l(F);b.__click=[ee,f];var G=l(b),at=r(G);te(at,{get stroke(){return e().text},style:"width: 1rem; height: 1rem;"}),o(b);var k=r(b,2);ft(k,21,()=>d.options,Dt,(A,N)=>{var P=re();P.__click=[ae,O,N,f];var rt=l(P,!0);o(P),B((lt,vt,it)=>{a(P,"--gray",lt),a(P,"--base-color",vt),a(P,"color",it),M(rt,t(N))},[()=>e().textDark,()=>e().backgroundDark,()=>e().text]),p(A,P)}),o(k),o(F),Tt(F,A=>v=A,()=>v),B((A,N,P)=>{a(b,"color",A),a(b,"background",N),M(G,`${O()??""} `),a(k,"border-color",P),a(k,"display",t(f)?"flex":"none")},[()=>e().text,()=>e().backgroundDark,()=>e().textDark]),p(D,F),Bt()}Ct(["click"]);function ne(D,d){D.key==="Enter"&&d()}var le=h('<span class="error svelte-vdn7lm"> </span>'),ve=h('<div class="book search-book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div></div>'),ie=h('<h2 class="body-name svelte-vdn7lm"> </h2> <div class="book-search svelte-vdn7lm"><input id="search" type="text" class="svelte-vdn7lm"> <!></div> <div class="search-results svelte-vdn7lm"></div>',1),de=h('<div class="book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div> <button class="close svelte-vdn7lm"><!></button></div>'),ce=h('<div class="books"></div>'),ue=h('<span class="error svelte-vdn7lm"> </span>'),_e=h('<!> <h2 class="body-name svelte-vdn7lm">Rating</h2> <div class="stars svelte-vdn7lm"><input id="rating" class="svelte-vdn7lm"> <!></div>',1),pe=h('<h2 class="body-name svelte-vdn7lm">Update Type</h2> <!> <!>',1),me=(D,d)=>m(d,!t(d)),fe=h('<div class="preview svelte-vdn7lm"><!></div>'),ge=h('<textarea id="body" class="svelte-vdn7lm"></textarea>'),he=h("<!> <!>",1),be=h('<span class="svelte-vdn7lm"><!> <h1 class="svelte-vdn7lm"></h1></span> <!> <!> <div class="body-header svelte-vdn7lm"><h2 class="body-name preview-body svelte-vdn7lm"></h2> <button><!></button></div> <!> <!> <button class="post-button svelte-vdn7lm">Post</button> <!>',1),ke=h("<!> <!>",1);function Ie(D,d){wt(d,!0);const O=(g,C)=>{let q=Pt(()=>St(C==null?void 0:C(),"Add a book"));var j=ie(),S=Y(j),z=l(S,!0);o(S);var L=r(S,2),x=l(L);yt(x),x.__keyup=[ne,P];var $=r(x,2);{var Q=u=>{var _=le(),E=l(_,!0);o(_),B(()=>M(E,t(Z))),p(u,_)};I($,u=>{t(Z)&&u(Q)})}o(L);var H=r(L,2);ft(H,21,()=>t(A),Dt,(u,_)=>{var E=ve(),U=xt(()=>it(t(_)));E.__click=function(...s){var n;(n=t(U))==null||n.apply(this,s)};var V=l(E),tt=r(V,2),W=l(tt),ct=l(W,!0);o(W);var J=r(W,2),ut=l(J,!0);o(J),o(tt),o(E),B((s,n,c)=>{nt(V,"alt",`${t(_).title??""} cover`),nt(V,"src",t(_).cover),a(W,"color",s),M(ct,t(_).title),a(J,"color",n),M(ut,c)},[()=>e().text,()=>e().textDull,()=>t(_).authors.join(",")]),p(u,E)}),o(H),B((u,_,E)=>{a(S,"color",u),M(z,t(q)),a(x,"background",_),a(x,"color",E),a(x,"outline",t(Z)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),mt(x,()=>t(N),u=>m(N,u)),p(g,j)},f=g=>{var C=ce();ft(C,21,()=>t(k),q=>q.isbn,(q,j)=>{var S=de(),z=l(S),L=r(z,2),x=l(L),$=l(x,!0);o(x);var Q=r(x,2),H=l(Q,!0);o(Q),o(L);var u=r(L,2),_=xt(()=>jt(t(j)));u.__click=function(...U){var V;(V=t(_))==null||V.apply(this,U)};var E=l(u);Yt(E,{stroke:"#f38ba8",style:"width: 1.25rem; height: 1.25rem;"}),o(u),o(S),B((U,V,tt)=>{nt(z,"alt",`${t(j).title??""} cover`),nt(z,"src",t(j).cover),a(x,"color",U),M($,t(j).title),a(Q,"color",V),M(H,tt)},[()=>e().text,()=>e().textDull,()=>t(j).authors.join(",")]),p(q,S)}),o(C),p(g,C)};let{type:v}=d.data,F={general:"Post Body",rating:"Review (Optional)",update:"Comments (Optional)",reply:null}[v],b=T(""),G=T(null),at=T("start"),k=T(st([])),A=T(st([])),N=T("");async function P(){m(A,st(await Ft(t(N))))}let rt=T("");function lt(){v==="general"&&t(b).trim().length===0?m(rt,"Body cannot be empty"):m(rt,"")}function vt(){if(v==="rating"&&gt(),(v==="rating"||v==="update")&&dt(),v==="general"&&lt(),t(K)||t(Z)||t(rt))return;let g={type:v,body:t(b),books:t(k).map(C=>C.isbn)};t(G)!==null&&(g=Object.assign(g,{rating:Number(t(G))})),v==="update"&&(g=Object.assign(g,{updateType:t(at)})),At(g),Jt("/profile")}function it(g){return function(){t(k).push(g),dt()}}function jt(g){return function(){m(k,st(t(k).filter(C=>C.isbn!==g.isbn))),dt()}}let K=T(""),Z=T("");function gt(){if(v==="rating"){if(t(G)===null){m(K,"Add a rating value.");return}if(!/^\d(\.\d)?$/.test(t(G))){m(K,"Value must be between 0 and 10, to at most one decimal place.");return}}m(K,"")}function dt(){v==="rating"&&t(k).length===0?m(Z,"Choose a book to rate."):m(Z,"")}let ht=T(!1);var bt=ke(),kt=Y(bt);Kt(kt);var Et=r(kt,2);Qt(Et,{class:"new-post-page",children:(g,C)=>{var q=be(),j=Y(q),S=l(j);Xt(S,{});var z=r(S,2);z.textContent=`New ${v??""} Post`,o(j);var L=r(j,2);{var x=s=>{var n=_e(),c=Y(n);{var R=w=>{O(w,()=>"Choose a book")},X=w=>{f(w)};I(c,w=>{t(k).length===0?w(R):w(X,!1)})}var y=r(c,2),et=r(y,2),i=l(et);yt(i),i.__input=gt;var _t=r(i,2);{var Rt=w=>{var ot=ue(),pt=l(ot,!0);o(ot),B(()=>M(pt,t(K))),p(w,ot)};I(_t,w=>{t(K)&&w(Rt)})}o(et),B((w,ot,pt)=>{a(y,"color",w),a(i,"background",ot),a(i,"color",pt),a(i,"outline",t(K)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),mt(i,()=>t(G),w=>m(G,w)),p(s,n)};I(L,s=>{v==="rating"&&s(x)})}var $=r(L,2);{var Q=s=>{var n=pe(),c=Y(n),R=r(c,2);se(R,{options:["start","finish","abandon"],get value(){return t(at)},set value(i){m(at,st(i))}});var X=r(R,2);{var y=i=>{O(i,()=>"Choose a book")},et=i=>{f(i)};I(X,i=>{t(k).length===0?i(y):i(et,!1)})}B(i=>a(c,"color",i),[()=>e().textDull]),p(s,n)};I($,s=>{v==="update"&&s(Q)})}var H=r($,2),u=l(H);u.textContent=F;var _=r(u,2);_.__click=[me,ht];var E=l(_);Mt(E,{get stroke(){return e().textDull},style:"width: 1rem; height: 1rem;"}),o(_),o(H);var U=r(H,2);{var V=s=>{var n=zt(),c=Y(n);Lt(c,()=>Vt(t(b)),null,(R,X)=>{var y=fe(),et=l(y);Nt(et,()=>t(X),!1,!1),o(y),B((i,_t)=>{a(y,"color",i),a(y,"background",_t)},[()=>e().text,()=>e().backgroundDark]),p(R,y)}),p(s,n)},tt=s=>{var n=ge();Ut(n),B((c,R)=>{a(n,"color",c),a(n,"background",R)},[()=>e().text,()=>e().backgroundDark]),mt(n,()=>t(b),c=>m(b,c)),p(s,n)};I(U,s=>{t(ht)?s(V):s(tt,!1)})}var W=r(U,2);{var ct=s=>{var n=he(),c=Y(n);{var R=y=>{f(y)};I(c,y=>{t(k).length!==0&&y(R)})}var X=r(c,2);O(X,()=>"Add a book"),p(s,n)};I(W,s=>{v!=="rating"&&v!=="update"&&s(ct)})}var J=r(W,2);J.__click=vt;var ut=r(J,2);Ot(ut,{selected:"profile"}),B((s,n,c,R)=>{a(z,"color",s),a(u,"color",n),a(J,"color",c),a(J,"background-image",R)},[()=>e().text,()=>e().textDull,()=>e().background,()=>`linear-gradient(${e().accent}, ${e().accent2})`]),p(g,q)},$$slots:{default:!0}}),p(D,bt),Bt()}Ct(["keyup","click","input"]);export{Ie as component,Ge as universal};
