import"../chunks/Bg9kRutz.js";import{s as o,c as l,r,t as D,p as yt,a5 as m,i as t,a as wt,ab as L,f as $,k as ht,R as Rt,aF as Et}from"../chunks/i-Dxzh4-.js";import{r as Pt,p as St,s as H,b as Tt,i as U}from"../chunks/GNpwh-9T.js";import{P as Lt,a as bt}from"../chunks/CfszLjNa.js";import{e as mt,i as Dt}from"../chunks/Da2w85Gb.js";import{E as Ot,h as At}from"../chunks/DTQehSfp.js";import{a as _,n as Vt,t as b,c as kt}from"../chunks/CjOfaZex.js";import{a as Gt,s as lt,r as xt}from"../chunks/DVEdGfhw.js";import{d as Bt,r as It}from"../chunks/AeTdaPAh.js";import{t as e,s as a}from"../chunks/C3MWGuYO.js";import{b as pt}from"../chunks/x60r2LJ0.js";import{p as nt}from"../chunks/CHAJi5Dc.js";import{g as Mt}from"../chunks/DIQVoU_8.js";import{r as Nt,x as qt,v as zt}from"../chunks/dyZAUeH2.js";import{o as Ft}from"../chunks/Dxhw3p0l.js";import{B as Ut}from"../chunks/BncN0TPR.js";import{T as Ht}from"../chunks/D3-IoVbG.js";const Jt=({params:C})=>C,Te=Object.freeze(Object.defineProperty({__proto__:null,load:Jt},Symbol.toStringTag,{value:"Module"}));var Kt=Vt('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M10 7L15 12L10 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Qt(C,d){let O=Pt(d,["$$slots","$$events","$$legacy","stroke"]);var g=Kt();let v;var N=o(l(g),2),k=l(N);r(N),r(g),D(()=>{v=Gt(g,v,{...O,width:"256px",height:"256px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0),lt(k,"stroke",d.stroke)}),_(C,g)}var Wt=(C,d)=>m(d,!t(d)),Xt=(C,d,O,g)=>{d(t(O)),m(g,!1)},Yt=b('<button class="option svelte-1o9drnu"> </button>'),Zt=b('<div class="select svelte-1o9drnu"><button class="value svelte-1o9drnu"> <!></button> <div class="options svelte-1o9drnu"></div></div>');function $t(C,d){yt(d,!0);let O=St(d,"value",15),g=L(!1),v;Ft(()=>{document.addEventListener("click",A=>{A.composedPath().includes(v)||m(g,!1)})});var N=Zt(),k=l(N);k.__click=[Wt,g];var q=l(k),rt=o(q);Qt(rt,{get stroke(){return e().text},style:"width: 1rem; height: 1rem;"}),r(k);var x=o(k,2);mt(x,21,()=>d.options,Dt,(A,J)=>{var P=Yt();P.__click=[Xt,O,J,g];var ot=l(P,!0);r(P),D((vt,it,dt)=>{a(P,"--gray",vt),a(P,"--base-color",it),a(P,"color",dt),H(ot,t(J))},[()=>e().textDark,()=>e().backgroundDark,()=>e().text]),_(A,P)}),r(x),r(N),Tt(N,A=>v=A,()=>v),D((A,J,P)=>{a(k,"color",A),a(k,"background",J),H(q,`${O()??""} `),a(x,"border-color",P),a(x,"display",t(g)?"flex":"none")},[()=>e().text,()=>e().backgroundDark,()=>e().textDark]),_(C,N),wt()}Bt(["click"]);function te(C,d){C.key==="Enter"&&d()}var ee=b('<span class="error svelte-vdn7lm"> </span>'),ae=b('<div class="book search-book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div></div>'),re=b('<div class="book search-book svelte-vdn7lm"><img alt="Book cover" src="" class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title">Loading Title...</span> <span class="authors svelte-vdn7lm">Loading authors...</span></div></div>'),oe=b('<h2 class="body-name svelte-vdn7lm"> </h2> <div class="book-search svelte-vdn7lm"><input id="search" type="text" class="svelte-vdn7lm"> <!></div> <div class="search-results svelte-vdn7lm"></div>',1),se=b('<div class="book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div> <button class="close svelte-vdn7lm"><!></button></div>'),ne=b('<div class="books"></div>'),le=b('<span class="error svelte-vdn7lm"> </span>'),ve=b('<!> <h2 class="body-name svelte-vdn7lm">Rating</h2> <div class="stars svelte-vdn7lm"><input id="rating" class="svelte-vdn7lm"> <!></div>',1),ie=b('<h2 class="body-name svelte-vdn7lm">Update Type</h2> <!> <!>',1),de=(C,d)=>m(d,!t(d)),ce=b('<div class="preview svelte-vdn7lm"><!></div>'),ue=b('<textarea id="body" class="svelte-vdn7lm"></textarea>'),_e=b("<!> <!>",1),pe=b('<span class="svelte-vdn7lm"><!> <h1 class="svelte-vdn7lm"></h1></span> <!> <!> <div class="body-header svelte-vdn7lm"><h2 class="body-name preview-body svelte-vdn7lm"></h2> <button><!></button></div> <!> <!> <button class="post-button svelte-vdn7lm">Post</button>',1);function Le(C,d){yt(d,!0);const O=(h,R)=>{let K=Rt(()=>Et(R==null?void 0:R(),"Add a book"));var E=oe(),S=$(E),Q=l(S,!0);r(S);var V=o(S,2),y=l(V);xt(y),y.__keyup=[te,P];var et=o(y,2);{var Z=p=>{var B=ee(),G=l(B,!0);r(B),D(()=>H(G,t(tt))),_(p,B)};U(et,p=>{t(tt)&&p(Z)})}r(V);var W=o(V,2);mt(W,21,()=>t(A),Dt,(p,B)=>{var G=kt(),X=$(G);bt(X,()=>t(B),I=>{var j=re(),M=o(l(j),2),at=l(M),z=o(at,2);r(M),r(j),D((n,s)=>{a(at,"color",n),a(z,"color",s)},[()=>e().text,()=>e().textDull]),_(I,j)},(I,j)=>{var M=ae(),at=ht(()=>dt(t(j)));M.__click=function(...u){var T;(T=t(at))==null||T.apply(this,u)};var z=l(M),n=o(z,2),s=l(n),c=l(s,!0);r(s);var f=o(s,2),F=l(f,!0);r(f),r(n),r(M),D((u,T,i)=>{lt(z,"alt",`${t(j).title??""} cover`),lt(z,"src",t(j).cover),a(s,"color",u),H(c,t(j).title),a(f,"color",T),H(F,i)},[()=>e().text,()=>e().textDull,()=>t(j).authors.join(",")]),_(I,M)}),_(p,G)}),r(W),D((p,B,G)=>{a(S,"color",p),H(Q,t(K)),a(y,"background",B),a(y,"color",G),a(y,"outline",t(tt)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),pt(y,()=>t(J),p=>m(J,p)),_(h,E)},g=h=>{var R=ne();mt(R,21,()=>t(x),K=>K.isbn,(K,E)=>{var S=se(),Q=l(S),V=o(Q,2),y=l(V),et=l(y,!0);r(y);var Z=o(y,2),W=l(Z,!0);r(Z),r(V);var p=o(V,2),B=ht(()=>jt(t(E)));p.__click=function(...X){var I;(I=t(B))==null||I.apply(this,X)};var G=l(p);Ht(G,{stroke:"#f38ba8",style:"width: 1.25rem; height: 1.25rem;"}),r(p),r(S),D((X,I,j)=>{lt(Q,"alt",`${t(E).title??""} cover`),lt(Q,"src",t(E).cover),a(y,"color",X),H(et,t(E).title),a(Z,"color",I),H(W,j)},[()=>e().text,()=>e().textDull,()=>t(E).authors.join(",")]),_(K,S)}),r(R),_(h,R)};let{type:v}=d.data,N={general:"Post Body",rating:"Review (Optional)",update:"Comments (Optional)",reply:null}[v],k=L(""),q=L(null),rt=L("start"),x=L(nt([])),A=L(nt([])),J=L("");async function P(){m(A,nt(await zt(t(J))))}let ot=L("");function vt(){v==="general"&&t(k).trim().length===0?m(ot,"Body cannot be empty"):m(ot,"")}function it(){if(v==="rating"&&ft(),(v==="rating"||v==="update")&&ct(),v==="general"&&vt(),t(Y)||t(tt)||t(ot))return;let h={type:v,body:t(k),books:t(x).map(R=>R.isbn)};t(q)!==null&&(h=Object.assign(h,{rating:Number(t(q))})),v==="update"&&(h=Object.assign(h,{updateType:t(rt)})),Nt(h),Mt("/profile")}function dt(h){return function(){t(x).push(h),ct()}}function jt(h){return function(){m(x,nt(t(x).filter(R=>R.isbn!==h.isbn))),ct()}}let Y=L(""),tt=L("");function ft(){if(v==="rating"){if(t(q)===null){m(Y,"Add a rating value.");return}if(!/^\d(\.\d)?$/.test(t(q))){m(Y,"Value must be between 0 and 10, to at most one decimal place.");return}}m(Y,"")}function ct(){v==="rating"&&t(x).length===0?m(tt,"Choose a book to rate."):m(tt,"")}let gt=L(!1);Lt(C,{class:"new-post-page",children:(h,R)=>{var K=pe(),E=$(K),S=l(E);Ut(S,{});var Q=o(S,2);Q.textContent=`New ${v??""} Post`,r(E);var V=o(E,2);{var y=n=>{var s=ve(),c=$(s);{var f=w=>{O(w,()=>"Choose a book")},F=w=>{g(w)};U(c,w=>{t(x).length===0?w(f):w(F,!1)})}var u=o(c,2),T=o(u,2),i=l(T);xt(i),i.__input=ft;var ut=o(i,2);{var Ct=w=>{var st=le(),_t=l(st,!0);r(st),D(()=>H(_t,t(Y))),_(w,st)};U(ut,w=>{t(Y)&&w(Ct)})}r(T),D((w,st,_t)=>{a(u,"color",w),a(i,"background",st),a(i,"color",_t),a(i,"outline",t(Y)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),pt(i,()=>t(q),w=>m(q,w)),_(n,s)};U(V,n=>{v==="rating"&&n(y)})}var et=o(V,2);{var Z=n=>{var s=ie(),c=$(s),f=o(c,2);$t(f,{options:["start","finish","abandon"],get value(){return t(rt)},set value(i){m(rt,nt(i))}});var F=o(f,2);{var u=i=>{O(i,()=>"Choose a book")},T=i=>{g(i)};U(F,i=>{t(x).length===0?i(u):i(T,!1)})}D(i=>a(c,"color",i),[()=>e().textDull]),_(n,s)};U(et,n=>{v==="update"&&n(Z)})}var W=o(et,2),p=l(W);p.textContent=N;var B=o(p,2);B.__click=[de,gt];var G=l(B);Ot(G,{get stroke(){return e().textDull},style:"width: 1rem; height: 1rem;"}),r(B),r(W);var X=o(W,2);{var I=n=>{var s=kt(),c=$(s);bt(c,()=>qt(t(k)),null,(f,F)=>{var u=ce(),T=l(u);At(T,()=>t(F),!1,!1),r(u),D((i,ut)=>{a(u,"color",i),a(u,"background",ut)},[()=>e().text,()=>e().backgroundDark]),_(f,u)}),_(n,s)},j=n=>{var s=ue();It(s),D((c,f)=>{a(s,"color",c),a(s,"background",f)},[()=>e().text,()=>e().backgroundDark]),pt(s,()=>t(k),c=>m(k,c)),_(n,s)};U(X,n=>{t(gt)?n(I):n(j,!1)})}var M=o(X,2);{var at=n=>{var s=_e(),c=$(s);{var f=u=>{g(u)};U(c,u=>{t(x).length!==0&&u(f)})}var F=o(c,2);O(F,()=>"Add a book"),_(n,s)};U(M,n=>{v!=="rating"&&v!=="update"&&n(at)})}var z=o(M,2);z.__click=it,D((n,s,c,f)=>{a(Q,"color",n),a(p,"color",s),a(z,"color",c),a(z,"background-image",f)},[()=>e().text,()=>e().textDull,()=>e().background,()=>`linear-gradient(${e().accent}, ${e().accent2})`]),_(h,K)},$$slots:{default:!0}}),wt()}Bt(["keyup","click","input"]);export{Le as component,Te as universal};
