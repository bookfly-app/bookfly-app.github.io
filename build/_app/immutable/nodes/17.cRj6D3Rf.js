import"../chunks/Bg9kRutz.js";import{s as o,c as n,r,t as B,p as kt,a5 as p,i as t,a as xt,ab as T,f as et,R as Ct,aF as jt,k as ht}from"../chunks/i-Dxzh4-.js";import{r as Rt,p as Et,s as N,b as Pt,i as M}from"../chunks/C2UmEeKx.js";import{y as St,a as Tt,C as Ot,A as At}from"../chunks/CCkeDGYs.js";import{e as mt,i as yt}from"../chunks/Da2w85Gb.js";import{E as Lt,h as Vt}from"../chunks/DV_pmR5n.js";import{a as m,n as Gt,t as D,c as It}from"../chunks/CjOfaZex.js";import{a as Mt,s as nt,r as bt}from"../chunks/BrRXOXDQ.js";import{d as wt,a as Nt}from"../chunks/_7rhGYst.js";import{t as e,s as a}from"../chunks/C3MWGuYO.js";import{b as pt}from"../chunks/ONGQm3i5.js";import{p as st}from"../chunks/CHAJi5Dc.js";import{g as qt}from"../chunks/om-sBzeu.js";import{P as zt}from"../chunks/BjLDt-mT.js";import{o as Ft}from"../chunks/Dxhw3p0l.js";import{B as Ut}from"../chunks/CpO97peS.js";import{T as Ht}from"../chunks/DTtB6SG9.js";const Jt=({params:C})=>C,Se=Object.freeze(Object.defineProperty({__proto__:null,load:Jt},Symbol.toStringTag,{value:"Module"}));var Kt=Gt('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M10 7L15 12L10 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Qt(C,c){let O=Rt(c,["$$slots","$$events","$$legacy","stroke"]);var f=Kt();let l;var G=o(n(f),2),h=n(G);r(G),r(f),B(()=>{l=Mt(f,l,{...O,width:"256px",height:"256px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0),nt(h,"stroke",c.stroke)}),m(C,f)}var Wt=(C,c)=>p(c,!t(c)),Xt=(C,c,O,f)=>{c(t(O)),p(f,!1)},Yt=D('<button class="option svelte-1o9drnu"> </button>'),Zt=D('<div class="select svelte-1o9drnu"><button class="value svelte-1o9drnu"> <!></button> <div class="options svelte-1o9drnu"></div></div>');function $t(C,c){kt(c,!0);let O=Et(c,"value",15),f=T(!1),l;Ft(()=>{document.addEventListener("click",A=>{A.composedPath().includes(l)||p(f,!1)})});var G=Zt(),h=n(G);h.__click=[Wt,f];var I=n(h),at=o(I);Qt(at,{get stroke(){return e().text},style:"width: 1rem; height: 1rem;"}),r(h);var b=o(h,2);mt(b,21,()=>c.options,yt,(A,q)=>{var P=Yt();P.__click=[Xt,O,q,f];var rt=n(P,!0);r(P),B((lt,it,vt)=>{a(P,"--gray",lt),a(P,"--base-color",it),a(P,"color",vt),N(rt,t(q))},[()=>e().textDark,()=>e().backgroundDark,()=>e().text]),m(A,P)}),r(b),r(G),Pt(G,A=>l=A,()=>l),B((A,q,P)=>{a(h,"color",A),a(h,"background",q),N(I,`${O()??""} `),a(b,"border-color",P),a(b,"display",t(f)?"flex":"none")},[()=>e().text,()=>e().backgroundDark,()=>e().textDark]),m(C,G),xt()}wt(["click"]);function te(C,c){C.key==="Enter"&&c()}var ee=D('<span class="error svelte-vdn7lm"> </span>'),ae=D('<div class="book search-book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div></div>'),re=D('<h2 class="body-name svelte-vdn7lm"> </h2> <div class="book-search svelte-vdn7lm"><input id="search" type="text" class="svelte-vdn7lm"> <!></div> <div class="search-results svelte-vdn7lm"></div>',1),oe=D('<div class="book svelte-vdn7lm"><img class="svelte-vdn7lm"> <div class="info svelte-vdn7lm"><span class="title"> </span> <span class="authors svelte-vdn7lm"> </span></div> <button class="close svelte-vdn7lm"><!></button></div>'),se=D('<div class="books"></div>'),ne=D('<span class="error svelte-vdn7lm"> </span>'),le=D('<!> <h2 class="body-name svelte-vdn7lm">Rating</h2> <div class="stars svelte-vdn7lm"><input id="rating" class="svelte-vdn7lm"> <!></div>',1),ie=D('<h2 class="body-name svelte-vdn7lm">Update Type</h2> <!> <!>',1),ve=(C,c)=>p(c,!t(c)),de=D('<div class="preview svelte-vdn7lm"><!></div>'),ce=D('<textarea id="body" class="svelte-vdn7lm"></textarea>'),ue=D("<!> <!>",1),_e=D('<span class="svelte-vdn7lm"><!> <h1 class="svelte-vdn7lm"></h1></span> <!> <!> <div class="body-header svelte-vdn7lm"><h2 class="body-name preview-body svelte-vdn7lm"></h2> <button><!></button></div> <!> <!> <button class="post-button svelte-vdn7lm">Post</button>',1);function Te(C,c){kt(c,!0);const O=(g,j)=>{let z=Ct(()=>jt(j==null?void 0:j(),"Add a book"));var R=re(),S=et(R),F=n(S,!0);r(S);var L=o(S,2),k=n(L);bt(k),k.__keyup=[te,P];var Z=o(k,2);{var K=u=>{var _=ee(),E=n(_,!0);r(_),B(()=>N(E,t(Y))),m(u,_)};M(Z,u=>{t(Y)&&u(K)})}r(L);var U=o(L,2);mt(U,21,()=>t(A),yt,(u,_)=>{var E=ae(),H=ht(()=>vt(t(_)));E.__click=function(...s){var v;(v=t(H))==null||v.apply(this,s)};var V=n(E),$=o(V,2),Q=n($),ct=n(Q,!0);r(Q);var W=o(Q,2),i=n(W,!0);r(W),r($),r(E),B((s,v,x)=>{nt(V,"alt",`${t(_).title??""} cover`),nt(V,"src",t(_).cover),a(Q,"color",s),N(ct,t(_).title),a(W,"color",v),N(i,x)},[()=>e().text,()=>e().textDull,()=>t(_).authors.join(",")]),m(u,E)}),r(U),B((u,_,E)=>{a(S,"color",u),N(F,t(z)),a(k,"background",_),a(k,"color",E),a(k,"outline",t(Y)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),pt(k,()=>t(q),u=>p(q,u)),m(g,R)},f=g=>{var j=se();mt(j,21,()=>t(b),z=>z.isbn,(z,R)=>{var S=oe(),F=n(S),L=o(F,2),k=n(L),Z=n(k,!0);r(k);var K=o(k,2),U=n(K,!0);r(K),r(L);var u=o(L,2),_=ht(()=>Dt(t(R)));u.__click=function(...H){var V;(V=t(_))==null||V.apply(this,H)};var E=n(u);Ht(E,{stroke:"#f38ba8",style:"width: 1.25rem; height: 1.25rem;"}),r(u),r(S),B((H,V,$)=>{nt(F,"alt",`${t(R).title??""} cover`),nt(F,"src",t(R).cover),a(k,"color",H),N(Z,t(R).title),a(K,"color",V),N(U,$)},[()=>e().text,()=>e().textDull,()=>t(R).authors.join(",")]),m(z,S)}),r(j),m(g,j)};let{type:l}=c.data,G={general:"Post Body",rating:"Review (Optional)",update:"Comments (Optional)",reply:null}[l],h=T(""),I=T(null),at=T("start"),b=T(st([])),A=T(st([])),q=T("");async function P(){p(A,st(await At(t(q))))}let rt=T("");function lt(){l==="general"&&t(h).trim().length===0?p(rt,"Body cannot be empty"):p(rt,"")}function it(){if(l==="rating"&&ft(),(l==="rating"||l==="update")&&dt(),l==="general"&&lt(),t(J)||t(Y)||t(rt))return;let g={type:l,body:t(h),books:t(b).map(j=>j.isbn)};t(I)!==null&&(g=Object.assign(g,{rating:Number(t(I))})),l==="update"&&(g=Object.assign(g,{updateType:t(at)})),St(g),qt("/profile")}function vt(g){return function(){t(b).push(g),dt()}}function Dt(g){return function(){p(b,st(t(b).filter(j=>j.isbn!==g.isbn))),dt()}}let J=T(""),Y=T("");function ft(){if(l==="rating"){if(t(I)===null){p(J,"Add a rating value.");return}if(!/^\d(\.\d)?$/.test(t(I))){p(J,"Value must be between 0 and 10, to at most one decimal place.");return}}p(J,"")}function dt(){l==="rating"&&t(b).length===0?p(Y,"Choose a book to rate."):p(Y,"")}let gt=T(!1);zt(C,{class:"new-post-page",children:(g,j)=>{var z=_e(),R=et(z),S=n(R);Ut(S,{});var F=o(S,2);F.textContent=`New ${l??""} Post`,r(R);var L=o(R,2);{var k=i=>{var s=le(),v=et(s);{var x=w=>{O(w,()=>"Choose a book")},X=w=>{f(w)};M(v,w=>{t(b).length===0?w(x):w(X,!1)})}var y=o(v,2),tt=o(y,2),d=n(tt);bt(d),d.__input=ft;var ut=o(d,2);{var Bt=w=>{var ot=ne(),_t=n(ot,!0);r(ot),B(()=>N(_t,t(J))),m(w,ot)};M(ut,w=>{t(J)&&w(Bt)})}r(tt),B((w,ot,_t)=>{a(y,"color",w),a(d,"background",ot),a(d,"color",_t),a(d,"outline",t(J)?"2px solid #f38ba8":"none")},[()=>e().textDull,()=>e().backgroundDark,()=>e().text]),pt(d,()=>t(I),w=>p(I,w)),m(i,s)};M(L,i=>{l==="rating"&&i(k)})}var Z=o(L,2);{var K=i=>{var s=ie(),v=et(s),x=o(v,2);$t(x,{options:["start","finish","abandon"],get value(){return t(at)},set value(d){p(at,st(d))}});var X=o(x,2);{var y=d=>{O(d,()=>"Choose a book")},tt=d=>{f(d)};M(X,d=>{t(b).length===0?d(y):d(tt,!1)})}B(d=>a(v,"color",d),[()=>e().textDull]),m(i,s)};M(Z,i=>{l==="update"&&i(K)})}var U=o(Z,2),u=n(U);u.textContent=G;var _=o(u,2);_.__click=[ve,gt];var E=n(_);Lt(E,{get stroke(){return e().textDull},style:"width: 1rem; height: 1rem;"}),r(_),r(U);var H=o(U,2);{var V=i=>{var s=It(),v=et(s);Tt(v,()=>Ot(t(h)),null,(x,X)=>{var y=de(),tt=n(y);Vt(tt,()=>t(X),!1,!1),r(y),B((d,ut)=>{a(y,"color",d),a(y,"background",ut)},[()=>e().text,()=>e().backgroundDark]),m(x,y)}),m(i,s)},$=i=>{var s=ce();Nt(s),B((v,x)=>{a(s,"color",v),a(s,"background",x)},[()=>e().text,()=>e().backgroundDark]),pt(s,()=>t(h),v=>p(h,v)),m(i,s)};M(H,i=>{t(gt)?i(V):i($,!1)})}var Q=o(H,2);{var ct=i=>{var s=ue(),v=et(s);{var x=y=>{f(y)};M(v,y=>{t(b).length!==0&&y(x)})}var X=o(v,2);O(X,()=>"Add a book"),m(i,s)};M(Q,i=>{l!=="rating"&&l!=="update"&&i(ct)})}var W=o(Q,2);W.__click=it,B((i,s,v,x)=>{a(F,"color",i),a(u,"color",s),a(W,"color",v),a(W,"background-image",x)},[()=>e().text,()=>e().textDull,()=>e().background,()=>`linear-gradient(${e().accent}, ${e().accent2})`]),m(g,z)},$$slots:{default:!0}}),xt()}wt(["keyup","click","input"]);export{Te as component,Se as universal};
