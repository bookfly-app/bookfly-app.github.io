import{a as d,t as u}from"../chunks/gFbpwaTI.js";import{p as Sa,ab as n,aa as w,f as fa,t as f,a as Ea,g as r,d as Na,s as e,j as c,r as p}from"../chunks/DBPlaF8E.js";import{s as Ra}from"../chunks/Chu0jhlY.js";import{d as M,c as J,e as Ta,f as ja,t as i,s as t,h as La,i as xa}from"../chunks/BgaTf3pO.js";import{a as x,i as R}from"../chunks/BW7aK-Zr.js";import{e as Ua,i as qa}from"../chunks/HJfK_IHA.js";import{r as K,b as Aa}from"../chunks/CitSOB86.js";import{d as Ga,b as Ha}from"../chunks/CThlKSBW.js";import{b as T}from"../chunks/DW4Ndp52.js";import{b as Ja}from"../chunks/CVPpxQ3u.js";import{g as Ka}from"../chunks/u5BWqktV.js";import{E as ga}from"../chunks/CytjiqgV.js";import{B as Ma}from"../chunks/BOJk_Knn.js";import{F as Oa}from"../chunks/BMyVZsPx.js";import{I as ha}from"../chunks/1wIR1uVA.js";import{P as Qa}from"../chunks/CQaUlW_D.js";import{R as N}from"../chunks/D6NCEoh0.js";function Va(j,z){n(z,!1)}async function ya(j,z,v,k,b,g,h,m,I){if(!(r(z).length>0)){if(r(v)!==(await M).username&&await Ta(r(v))){n(k,!0);return}await ja({displayName:r(b),bio:r(g),username:r(v),pronouns:r(h),picture:r(m),banner:r(I)}),await Ka("/profile"),location.reload()}}var Wa=u('<label for="set-banner" class="banner svelte-k21cxk"><div class="overlay svelte-k21cxk"></div> <!></label>'),Xa=u('<label for="set-profile-picture" class="profile-picture svelte-k21cxk"><div class="overlay svelte-k21cxk"></div> <!></label>'),Ya=u('<span class="error svelte-k21cxk"> </span>'),Za=u('<span class="error svelte-k21cxk">Username already taken</span>'),$a=u('<span class="badge-line svelte-k21cxk">Show developer badge <!></span>'),ae=u('<span class="badge-line svelte-k21cxk">Show moderator badge <!></span>'),ee=u('<span class="badge-line svelte-k21cxk">Show moderator badge <!></span>'),re=u('<!> <!> <div class="profile svelte-k21cxk"><div><!> <!> <button class="save svelte-k21cxk">Save</button></div> <label for="display-name" class="svelte-k21cxk">Display Name</label> <input type="text" id="display-name" class="svelte-k21cxk"> <label for="username" class="svelte-k21cxk">Username</label> <div class="username svelte-k21cxk"><span class="at svelte-k21cxk">@</span> <input type="text" id="username" class="svelte-k21cxk"></div> <!> <!> <hr class="svelte-k21cxk"> <label for="pronouns" class="svelte-k21cxk">Pronouns</label> <input type="text" id="pronouns" class="svelte-k21cxk"> <span class="radio-input svelte-k21cxk"><label for="display-pronouns" class="svelte-k21cxk">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-k21cxk"><label for="display-post-pronouns" class="svelte-k21cxk">Display pronouns on your posts</label> <!></span> <hr class="svelte-k21cxk"> <label for="bio" class="svelte-k21cxk">Bio</label> <textarea class="bio svelte-k21cxk" id="bio"></textarea> <hr class="svelte-k21cxk"> <label class="svelte-k21cxk">Badges</label> <!> <!> <!></div>',1),se=u('<!> <!> <button class="save-bottom svelte-k21cxk">Save</button> <!>',1);function ye(j,z){Sa(z,!0),M.then(_=>{n(v,x(_.displayName)),n(b,x(_.username)),n(g,x(_.bio)),n(h,x(_.pronouns)),n(m,x(_.picture)),n(k,x(_.banner))});let v=w(""),k=w(""),b=w(""),g=w(""),h=w(""),m=w(""),I=Na(()=>La(r(b))),O,F=w(!1);Qa(j,{children:(_,te)=>{var Q=se(),V=fa(Q);Ma(V,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var W=e(V,2);J(W,()=>M,null,(U,D)=>{var X=re(),Y=fa(X);J(Y,()=>xa(r(k)),null,(a,o)=>{var s=Wa(),l=e(c(s),2);ga(l,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),p(s),f(()=>t(s,"background-image",`url('${r(o)??""}')`)),d(a,s)});var Z=e(Y,2);ha(Z,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return r(k)},set imageId(a){n(k,x(a))}});var $=e(Z,2),q=c($),aa=c(q);J(aa,()=>xa(r(m)),null,(a,o)=>{var s=Xa(),l=e(c(s),2);ga(l,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),p(s),f(y=>{t(s,"border-color",y),t(s,"background-image",`url('${r(o)??""}')`)},[()=>i().background]),d(a,s)});var ea=e(aa,2);ha(ea,{id:"set-profile-picture",aspectRatio:1/1,get imageId(){return r(m)},set imageId(a){n(m,x(a))}});var ra=e(ea,2);ra.__click=[ya,I,b,F,v,g,h,m,k],p(q);var sa=e(q,2),B=e(sa,2);K(B);var ta=e(B,2),P=e(ta,2),oa=c(P),S=e(oa,2);K(S),S.__input=[Va,F],Ja(S,a=>O=a,()=>O),p(P);var la=e(P,2);Ua(la,17,()=>r(I),qa,(a,o)=>{var s=Ya(),l=c(s,!0);p(s),f(()=>Ra(l,r(o))),d(a,s)});var na=e(la,2);{var Ia=a=>{var o=Za();d(a,o)};R(na,a=>{r(F)&&a(Ia)})}var ia=e(na,2),ca=e(ia,2),E=e(ca,2);K(E);var A=e(E,2),pa=c(A),Da=e(pa,2);N(Da,{id:"display-pronouns",size:.7}),p(A);var G=e(A,2),va=c(G),Ca=e(va,2);N(Ca,{id:"display-post-pronouns",size:.7}),p(G);var da=e(G,2),ua=e(da,2),C=e(ua,2);Ha(C);var ka=e(C,2),ba=e(ka,2),ma=e(ba,2);{var za=a=>{var o=$a(),s=e(c(o));N(s,{size:.6}),p(o),f(l=>t(o,"color",l),[()=>i().textDull]),d(a,o)};R(ma,a=>{r(D).tags.includes("dev")&&a(za)})}var _a=e(ma,2);{var Fa=a=>{var o=ae(),s=e(c(o));N(s,{size:.6}),p(o),f(l=>t(o,"color",l),[()=>i().textDull]),d(a,o)};R(_a,a=>{r(D).tags.includes("mod")&&a(Fa)})}var Ba=e(_a,2);{var Pa=a=>{var o=ee(),s=e(c(o));N(s,{size:.6}),p(o),f(l=>t(o,"color",l),[()=>i().textDull]),d(a,o)};R(Ba,a=>{r(D).tags.includes("developer")&&a(Pa)})}p($),f((a,o,s,l,y,H)=>{t(ra,"background",`linear-gradient(${a??""}, ${o??""})`),t(sa,"color",s),t(B,"background",l),t(B,"color",y),t(ta,"color",s),t(P,"outline",r(F)||r(I).length>0?"2px solid indianred":"none"),t(P,"background",l),t(oa,"color",y),t(S,"color",y),t(ia,"background",H),t(ca,"color",s),t(E,"background",l),t(E,"color",y),t(pa,"color",s),t(va,"color",s),t(da,"background",H),t(ua,"color",s),Aa(C,`				${r(D).bio??""}
			`),t(C,"color",y),t(C,"background",l),t(ka,"background",H),t(ba,"color",s)},[()=>i().accent,()=>i().accent2,()=>i().textDull,()=>i().backgroundDark,()=>i().text,()=>i().textDark]),T(B,()=>r(v),a=>n(v,a)),T(S,()=>r(b),a=>n(b,a)),T(E,()=>r(h),a=>n(h,a)),T(C,()=>r(g),a=>n(g,a)),d(U,X)});var L=e(W,2);L.__click=[ya,I,b,F,v,g,h,m,k];var wa=e(L,2);Oa(wa,{selected:"profile"}),f((U,D)=>t(L,"background",`linear-gradient(${U??""}, ${D??""})`),[()=>i().accent,()=>i().accent2]),d(_,Q)},$$slots:{default:!0}}),Ea()}Ga(["click","input"]);export{ye as component};
