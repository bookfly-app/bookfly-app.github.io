import{a as d,t as u}from"../chunks/gFbpwaTI.js";import{p as Ra,ab as n,aa as y,f as M,t as w,a as Ta,g as s,d as ja,s as e,j as c,r as p}from"../chunks/DBPlaF8E.js";import{s as La}from"../chunks/Chu0jhlY.js";import{d as Q,c as xa,e as qa,f as Aa,t as i,s as r,h as Ga,i as Ha}from"../chunks/BgaTf3pO.js";import{a as _,i as T}from"../chunks/BW7aK-Zr.js";import{e as Ja,i as Ka}from"../chunks/HJfK_IHA.js";import{r as O,b as Ma}from"../chunks/CitSOB86.js";import{d as Oa,b as Qa}from"../chunks/CThlKSBW.js";import{b as j}from"../chunks/DW4Ndp52.js";import{b as Ua}from"../chunks/CVPpxQ3u.js";import{g as Va}from"../chunks/C_Uv-_Xa.js";import{E as ha}from"../chunks/CytjiqgV.js";import{B as Wa}from"../chunks/CSh035H_.js";import{B as Xa}from"../chunks/BV7adXHU.js";import{F as Ya}from"../chunks/BMyVZsPx.js";import{I as ya}from"../chunks/CHLdS-v6.js";import{P as Za}from"../chunks/CJReyDMJ.js";import{R as E}from"../chunks/D6NCEoh0.js";function $a(L,D){n(D,!1)}async function wa(L,D,v,C,k,f,g,m){if(!(s(D).length>0)){if(s(v)!==(await Q).username&&await qa(s(v))){n(C,!0);return}await Aa({displayName:s(k),bio:s(f),username:s(v),pronouns:s(g),picture:s(m)}),await Va("/profile"),location.reload()}}var ae=u('<label for="set-profile-picture" class="profile-picture svelte-k21cxk"><div class="overlay svelte-k21cxk"></div> <!></label>'),ee=u('<span class="error svelte-k21cxk"> </span>'),re=u('<span class="error svelte-k21cxk">Username already taken</span>'),se=u('<span class="badge-line svelte-k21cxk">Show developer badge <!></span>'),oe=u('<span class="badge-line svelte-k21cxk">Show moderator badge <!></span>'),te=u('<span class="badge-line svelte-k21cxk">Show moderator badge <!></span>'),le=u('<label for="set-banner" class="banner svelte-k21cxk"><div class="overlay svelte-k21cxk"></div> <!></label> <!> <div class="profile svelte-k21cxk"><div><!> <!> <button class="save svelte-k21cxk">Save</button></div> <label for="display-name" class="svelte-k21cxk">Display Name</label> <input type="text" id="display-name" class="svelte-k21cxk"> <label for="username" class="svelte-k21cxk">Username</label> <div class="username svelte-k21cxk"><span class="at svelte-k21cxk">@</span> <input type="text" id="username" class="svelte-k21cxk"></div> <!> <!> <hr class="svelte-k21cxk"> <label for="pronouns" class="svelte-k21cxk">Pronouns</label> <input type="text" id="pronouns" class="svelte-k21cxk"> <span class="radio-input svelte-k21cxk"><label for="display-pronouns" class="svelte-k21cxk">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-k21cxk"><label for="display-post-pronouns" class="svelte-k21cxk">Display pronouns on your posts</label> <!></span> <hr class="svelte-k21cxk"> <label for="bio" class="svelte-k21cxk">Bio</label> <textarea class="bio svelte-k21cxk" id="bio"></textarea> <hr class="svelte-k21cxk"> <label class="svelte-k21cxk">Badges</label> <!> <!> <!></div>',1),ne=u('<!> <!> <button class="save-bottom svelte-k21cxk">Save</button> <!>',1),ie=u("<!> <!>",1);function Be(L,D){Ra(D,!0),Q.then(b=>{n(v,_(b.displayName)),n(k,_(b.username)),n(f,_(b.bio)),n(g,_(b.pronouns)),n(m,_(b.picture)),n(C,_(b.banner))});let v=y(""),C=y(""),k=y(""),f=y(""),g=y(""),m=y(""),N=ja(()=>Ga(s(k))),U,z=y(!1);var V=ie(),W=M(V);Xa(W);var Ia=e(W,2);Za(Ia,{children:(b,ce)=>{var X=ne(),Y=M(X);Wa(Y,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var Z=e(Y,2);xa(Z,()=>Q,null,(A,x)=>{var $=le(),R=M($),Ca=e(c(R),2);ha(Ca,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),p(R);var aa=e(R,2);ya(aa,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return s(C)},set imageId(a){n(C,_(a))}});var ea=e(aa,2),G=c(ea),ra=c(G);xa(ra,()=>Ha(s(m)),null,(a,t)=>{var o=ae(),l=e(c(o),2);ha(l,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),p(o),w(h=>{r(o,"border-color",h),r(o,"background-image",`url('${s(t)??""}')`)},[()=>i().background]),d(a,o)});var sa=e(ra,2);ya(sa,{id:"set-profile-picture",aspectRatio:1/1,get imageId(){return s(m)},set imageId(a){n(m,_(a))}});var oa=e(sa,2);oa.__click=[wa,N,k,z,v,f,g,m],p(G);var ta=e(G,2),B=e(ta,2);O(B);var la=e(B,2),F=e(la,2),na=c(F),P=e(na,2);O(P),P.__input=[$a,z],Ua(P,a=>U=a,()=>U),p(F);var ia=e(F,2);Ja(ia,17,()=>s(N),Ka,(a,t)=>{var o=ee(),l=c(o,!0);p(o),w(()=>La(l,s(t))),d(a,o)});var ca=e(ia,2);{var za=a=>{var t=re();d(a,t)};T(ca,a=>{s(z)&&a(za)})}var pa=e(ca,2),va=e(pa,2),S=e(va,2);O(S);var H=e(S,2),da=c(H),Ba=e(da,2);E(Ba,{id:"display-pronouns",size:.7}),p(H);var J=e(H,2),ua=c(J),Fa=e(ua,2);E(Fa,{id:"display-post-pronouns",size:.7}),p(J);var ka=e(J,2),ma=e(ka,2),I=e(ma,2);Qa(I);var ba=e(I,2),_a=e(ba,2),fa=e(_a,2);{var Pa=a=>{var t=se(),o=e(c(t));E(o,{size:.6}),p(t),w(l=>r(t,"color",l),[()=>i().textDull]),d(a,t)};T(fa,a=>{s(x).tags.includes("dev")&&a(Pa)})}var ga=e(fa,2);{var Sa=a=>{var t=oe(),o=e(c(t));E(o,{size:.6}),p(t),w(l=>r(t,"color",l),[()=>i().textDull]),d(a,t)};T(ga,a=>{s(x).tags.includes("mod")&&a(Sa)})}var Ea=e(ga,2);{var Na=a=>{var t=te(),o=e(c(t));E(o,{size:.6}),p(t),w(l=>r(t,"color",l),[()=>i().textDull]),d(a,t)};T(Ea,a=>{s(x).tags.includes("developer")&&a(Na)})}p(ea),w((a,t,o,l,h,K)=>{r(R,"background-image",`url('${s(x).banner??""}')`),r(oa,"background",`linear-gradient(${a??""}, ${t??""})`),r(ta,"color",o),r(B,"background",l),r(B,"color",h),r(la,"color",o),r(F,"outline",s(z)||s(N).length>0?"2px solid indianred":"none"),r(F,"background",l),r(na,"color",h),r(P,"color",h),r(pa,"background",K),r(va,"color",o),r(S,"background",l),r(S,"color",h),r(da,"color",o),r(ua,"color",o),r(ka,"background",K),r(ma,"color",o),Ma(I,`				${s(x).bio??""}
			`),r(I,"color",h),r(I,"background",l),r(ba,"background",K),r(_a,"color",o)},[()=>i().accent,()=>i().accent2,()=>i().textDull,()=>i().backgroundDark,()=>i().text,()=>i().textDark]),j(B,()=>s(v),a=>n(v,a)),j(P,()=>s(k),a=>n(k,a)),j(S,()=>s(g),a=>n(g,a)),j(I,()=>s(f),a=>n(f,a)),d(A,$)});var q=e(Z,2);q.__click=[wa,N,k,z,v,f,g,m];var Da=e(q,2);Ya(Da,{selected:"profile"}),w((A,x)=>r(q,"background",`linear-gradient(${A??""}, ${x??""})`),[()=>i().accent,()=>i().accent2]),d(b,X)},$$slots:{default:!0}}),d(L,V),Ta()}Oa(["click","input"]);export{Be as component};
