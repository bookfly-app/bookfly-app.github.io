import{a as r,t as u,c as E}from"../chunks/gFbpwaTI.js";import{h as we,j as c,r as s,p as Ve,aa as O,f as N,g as e,t as y,a as Ye,ab as T,s as a,d as ie}from"../chunks/DBPlaF8E.js";import{s as Pe}from"../chunks/Chu0jhlY.js";import{B as qe,C as ze,D as Ge,u as De,t as o,s as i,c as H,i as He}from"../chunks/BWtWgn92.js";import{a as M,i as R}from"../chunks/BW7aK-Zr.js";import{e as ce,i as pe}from"../chunks/HJfK_IHA.js";import{c as ne,r as Je,a as J}from"../chunks/o2l4qZHV.js";import{d as Ke}from"../chunks/CThlKSBW.js";import{b as Qe}from"../chunks/BEmAISS_.js";import{b as Ne}from"../chunks/CVPpxQ3u.js";import{o as Xe}from"../chunks/CBxwvAny.js";import{g as Le}from"../chunks/DYlwJe7p.js";import{S as Ze,F as et}from"../chunks/BBAWapf1.js";import"../chunks/wwMgno94.js";import{W as We}from"../chunks/BYu-USOU.js";import{P as tt,S as at,a as rt}from"../chunks/COdcIwaF.js";import{A as st}from"../chunks/5UU8o6SF.js";import{U as ot}from"../chunks/B0G0yVQT.js";function _e(n,_,L){var V=n.__className,l=lt(_,L);we&&n.className===l?n.__className=l:(V!==l||we&&n.className!==l)&&(n.className=l,n.__className=l)}function lt(n,_){return(n??"")+(" "+_)}var vt=u('<div class="svelte-162e39x"><!></div>');function Se(n){var _=vt(),L=c(_);We(L,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),s(_),r(n,_)}function it(n,_,L){n.key==="Enter"?(e(_)&&clearTimeout(e(_)),L()):(e(_)&&clearTimeout(e(_)),T(_,M(setTimeout(L,3e3))))}var ct=u('<img alt="Your profile" class="profile-link svelte-pt9cp0">'),pt=u('<div class="loading svelte-pt9cp0"><h1 class="svelte-pt9cp0">No posts found</h1> <p class="svelte-pt9cp0">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),nt=u("<!> <!>",1),_t=u('<div class="loading svelte-pt9cp0"><h1 class="svelte-pt9cp0">Loading posts...</h1> <p class="svelte-pt9cp0">We promise Wallflower will be faster soon.</p> <!></div>'),dt=u('<div class="loading svelte-pt9cp0"><h1 class="svelte-pt9cp0">No books found</h1> <p class="svelte-pt9cp0">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),ft=u('<img class="cover svelte-pt9cp0">'),mt=u('<div class="nocover svelte-pt9cp0">?</div>'),ut=u('<a class="book svelte-pt9cp0"><div class="book-info svelte-pt9cp0"><h1 class="svelte-pt9cp0"> </h1> <h2 class="svelte-pt9cp0"> </h2></div> <!></a>'),ht=u('<!> <div class="books svelte-pt9cp0"></div>',1),gt=u('<div class="loading svelte-pt9cp0"><h1 class="svelte-pt9cp0">Loading books...</h1> <p class="svelte-pt9cp0">We promise Wallflower will be faster soon.</p> <!></div>'),bt=u('<div class="loading svelte-pt9cp0"><h1 class="svelte-pt9cp0">No users found</h1> <p class="svelte-pt9cp0">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),kt=u('<!> <div class="people"></div>',1),xt=u('<div class="loading svelte-pt9cp0"><h1 class="svelte-pt9cp0">Loading accounts...</h1> <p class="svelte-pt9cp0">We promise Wallflower will be faster soon.</p></div>'),yt=u('<nav class="svelte-pt9cp0"><div class="banner svelte-pt9cp0"><button aria-label="Open sidebar" class="svelte-pt9cp0"><!></button> <button class="svelte-pt9cp0"><!></button> <a class="search svelte-pt9cp0" href="/search"><!></a></div></nav> <section class="svelte-pt9cp0"><input type="text" class="svelte-pt9cp0"> <div class="views svelte-pt9cp0"><button>Posts</button> <button>Books</button> <button>People</button></div></section> <!> <!> <!>',1);function Ot(n,_){Ve(_,!0);let L,V,l=O(M(new URLSearchParams(window.location.search).get("view")??"posts")),S=O("");async function de(){const I=new URLSearchParams({term:e(S),view:e(l)});Le(`/search?${I}`),e(l)==="posts"&&T(fe,M(qe(e(S)))),e(l)==="books"&&T(me,M(ze(e(S)))),e(l)==="people"&&T(ue,M(Ge(e(S))))}Xe(()=>{e(S)&&de()});let Ue=O(null),fe=O(M(Promise.resolve([]))),me=O(M(Promise.resolve([]))),ue=O(M(Promise.resolve([])));function K(I){return function(){const Q=new URLSearchParams({view:I});e(S)&&Q.set("term",e(S)),Le(`/search?${Q}`),T(l,M(I))}}tt(n,{children:(I,Q)=>{var he=yt(),X=N(he),ge=c(X),z=c(ge);z.__click=()=>V.show();var $e=c(z);{var Be=t=>{var p=E(),q=N(p);H(q,()=>He(De().picture),null,(j,w)=>{var d=ct();y(()=>J(d,"src",e(w))),r(j,d)}),r(t,p)},Me=t=>{rt(t,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};R($e,t=>{De()?t(Be):t(Me,!1)})}s(z);var Z=a(z,2),Fe=c(Z);We(Fe,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),s(Z);var be=a(Z,2),Re=c(be);Ze(Re,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),s(be),s(ge),s(X);var ee=a(X,2),Y=c(ee);Je(Y),Y.__keyup=[it,Ue,de],Ne(Y,t=>L=t,()=>L);var te=a(Y,2),ae=c(te),je=ie(()=>K("posts"));ae.__click=function(...t){var p;(p=e(je))==null||p.apply(this,t)};var re=a(ae,2),Ae=ie(()=>K("books"));re.__click=function(...t){var p;(p=e(Ae))==null||p.apply(this,t)};var ke=a(re,2),Ce=ie(()=>K("people"));ke.__click=function(...t){var p;(p=e(Ce))==null||p.apply(this,t)},s(te),s(ee);var xe=a(ee,2);{var Ie=t=>{var p=E(),q=N(p);H(q,()=>e(fe),j=>{var w=_t(),d=c(w),x=a(d,2),A=a(x,2);Se(A,{}),s(w),y((W,v)=>{i(d,"color",W),i(x,"color",v)},[()=>o().text,()=>o().textDull]),r(j,w)},(j,w)=>{var d=nt(),x=N(d);{var A=v=>{var h=pt(),P=c(h),U=a(P,2);s(h),y((g,f)=>{i(P,"color",g),i(U,"color",f)},[()=>o().text,()=>o().textDull]),r(v,h)};R(x,v=>{e(w).length===0&&v(A)})}var W=a(x,2);ce(W,17,()=>e(w),pe,(v,h)=>{st(v,{get post(){return e(h)}})}),r(j,d)}),r(t,p)},Ee=t=>{var p=E(),q=N(p);{var j=d=>{var x=E(),A=N(x);H(A,()=>e(me),W=>{var v=gt(),h=c(v),P=a(h,2),U=a(P,2);Se(U,{}),s(v),y((g,f)=>{i(h,"color",g),i(P,"color",f)},[()=>o().text,()=>o().textDull]),r(W,v)},(W,v)=>{var h=ht(),P=N(h);{var U=f=>{var m=dt(),b=c(m),D=a(b,2);s(m),y((k,$)=>{i(b,"color",k),i(D,"color",$)},[()=>o().text,()=>o().textDull]),r(f,m)};R(P,f=>{e(v).length===0&&f(U)})}var g=a(P,2);ce(g,21,()=>e(v),pe,(f,m)=>{var b=ut(),D=c(b),k=c(D),$=c(k,!0);s(k);var C=a(k,2),G=c(C,!0);s(C),s(D);var se=a(D,2);{var oe=F=>{var B=ft();y(()=>{J(B,"alt",`Cover for ${e(m).title}`),J(B,"src",e(m).cover)}),r(F,B)},Te=F=>{var B=mt();y((le,ve)=>{i(B,"background-image",le),i(B,"color",ve)},[()=>`linear-gradient(${o().accent}, ${o().accent2})`,()=>o().backgroundDark]),r(F,B)};R(se,F=>{e(m).cover?F(oe):F(Te,!1)})}s(b),y((F,B,le,ve)=>{J(b,"href",`/book/${e(m).isbn}`),i(b,"border-color",F),i(k,"color",B),Pe($,e(m).title),i(C,"color",le),Pe(G,ve)},[()=>o().textDark,()=>o().textBright,()=>o().textDim,()=>e(m).authors.join(", ")]),r(f,b)}),s(g),r(W,h)}),r(d,x)},w=d=>{var x=E(),A=N(x);{var W=v=>{var h=E(),P=N(h);H(P,()=>e(ue),U=>{var g=xt(),f=c(g),m=a(f,2);s(g),y((b,D)=>{i(f,"color",b),i(m,"color",D)},[()=>o().text,()=>o().textDull]),r(U,g)},(U,g)=>{var f=kt(),m=N(f);{var b=k=>{var $=bt(),C=c($),G=a(C,2);s($),y((se,oe)=>{i(C,"color",se),i(G,"color",oe)},[()=>o().text,()=>o().textDull]),r(k,$)};R(m,k=>{e(g).length===0&&k(b)})}var D=a(m,2);ce(D,21,()=>e(g),pe,(k,$,C,G)=>{ot(k,{get user(){return e($)}})}),s(D),r(U,f)}),r(v,h)};R(A,v=>{e(l)==="people"&&v(W)},!0)}r(d,x)};R(q,d=>{e(l)==="books"?d(j):d(w,!1)},!0)}r(t,p)};R(xe,t=>{e(l)==="posts"?t(Ie):t(Ee,!1)})}var ye=a(xe,2);et(ye,{selected:"search"});var Oe=a(ye,2);Ne(at(Oe,{}),t=>V=t,()=>V),y(t=>{i(te,"border-color",t),_e(ae,ne(e(l)==="posts"?"selected":""),"svelte-pt9cp0"),_e(re,ne(e(l)==="books"?"selected":""),"svelte-pt9cp0"),_e(ke,ne(e(l)==="people"?"selected":""),"svelte-pt9cp0")},[()=>o().textDark]),Qe(Y,()=>e(S),t=>T(S,t)),r(I,he)},$$slots:{default:!0}}),Ye()}Ke(["click","keyup"]);export{Ot as component};
