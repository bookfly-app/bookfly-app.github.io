import"../chunks/Bg9kRutz.js";import{m as Dr,c as n,r as l,p as Or,a4 as H,a as Vr,g as r,f as D,s as t,t as w,a5 as O,d as er}from"../chunks/BEuF9Aiu.js";import{s as Pr}from"../chunks/CIMMqX_l.js";import{u as Nr,S as Yr,F as zr,t as s,s as o,D as Hr,E as Jr,G as Kr,a as ar,b as Qr}from"../chunks/CVc447rH.js";import{p as F,i as B}from"../chunks/Dc0SBWOI.js";import{e as ur,i as hr}from"../chunks/BLfhk5AQ.js";import{a as e,t as d,c as j}from"../chunks/DY2BR4sA.js";import{s as Q,c as tr,r as Xr}from"../chunks/5PfMkTiZ.js";import{d as Zr,e as $r}from"../chunks/NdrWdQlm.js";import{b as re}from"../chunks/7TVqqH3k.js";import{o as ee}from"../chunks/DXIKV8-l.js";import{g as Sr}from"../chunks/DU9UGetc.js";import"../chunks/69_IOA4Y.js";import{W as Lr}from"../chunks/kUB4lFNI.js";import{P as ae,a as te}from"../chunks/fbTVcXp3.js";import{A as se}from"../chunks/BV3gILk7.js";import{U as oe}from"../chunks/Dtb3Cita.js";function sr(g,P,L){var b=g.__className,v=le(P,L);Dr&&g.className===v?g.__className=v:(b!==v||Dr&&g.className!==v)&&(g.className=v,g.__className=v)}function le(g,P){return(g??"")+(" "+P)}var ve=d('<div class="svelte-162e39x"><!></div>');function Er(g){var P=ve(),L=n(P);Lr(L,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),l(P),e(g,P)}function ie(g,P,L){g.key==="Enter"?P():(r(L)&&clearTimeout(r(L)),O(L,F(setTimeout(P,3e3))))}var ne=d('<img alt="Your profile" class="profile-link svelte-1fxrrq5">'),ce=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Search for a post</h1> <p class="svelte-1fxrrq5">Enter your search term to find relevant posts.</p></div>'),fe=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">No posts found</h1> <p class="svelte-1fxrrq5">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),_e=d("<!> <!>",1),de=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Loading posts...</h1> <p class="svelte-1fxrrq5">We promise Wallflower will be faster soon.</p> <!></div>'),pe=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Search for a book</h1> <p class="svelte-1fxrrq5">Enter your search term to find relevant books.</p></div>'),ue=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">No books found</h1> <p class="svelte-1fxrrq5">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),he=d('<img class="cover svelte-1fxrrq5">'),me=d('<div class="nocover svelte-1fxrrq5">?</div>'),xe=d('<a class="book svelte-1fxrrq5"><div class="book-info svelte-1fxrrq5"><h1 class="svelte-1fxrrq5"> </h1> <h2 class="svelte-1fxrrq5"> </h2></div> <!></a>'),ge=d('<!> <div class="books svelte-1fxrrq5"></div>',1),be=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Loading books...</h1> <p class="svelte-1fxrrq5">We promise Wallflower will be faster soon.</p> <!></div>'),qe=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Search for a user</h1> <p class="svelte-1fxrrq5">Enter your search term to find relevant users.</p></div>'),ke=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">No users found</h1> <p class="svelte-1fxrrq5">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),ye=d('<!> <div class="people"></div>',1),we=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Loading accounts...</h1> <p class="svelte-1fxrrq5">We promise Wallflower will be faster soon.</p></div>'),De=d('<nav class="svelte-1fxrrq5"><div class="banner svelte-1fxrrq5"><button aria-label="Open sidebar" class="svelte-1fxrrq5"><!></button> <button class="svelte-1fxrrq5"><!></button> <a class="search svelte-1fxrrq5" href="/search"><!></a></div></nav> <section class="svelte-1fxrrq5"><input type="text" class="svelte-1fxrrq5"> <div class="views svelte-1fxrrq5"><button>Posts</button> <button>Books</button> <button>Authors</button> <button>Users</button></div></section> <!> <!>',1);function Oe(g,P){Or(P,!0);let L,b=H(F(new URLSearchParams(window.location.search).get("view")??"posts")),v=H("");async function or(){r(X)&&clearTimeout(r(X)),O(X,null),O(v,F(r(v).trim()));const C=new URLSearchParams({term:r(v),view:r(b)});Sr(`/search?${C}`),r(b)==="posts"&&O(mr,F(Hr(r(v)))),r(b)==="books"&&O(xr,F(Jr(r(v)))),r(b)==="people"&&O(gr,F(Kr(r(v))))}ee(()=>{r(v)&&or()});let X=H(null),mr=H(F(Promise.resolve([]))),xr=H(F(Promise.resolve([]))),gr=H(F(Promise.resolve([])));function Z(C){return function(){const lr=new URLSearchParams({view:C});r(v)&&lr.set("term",r(v)),Sr(`/search?${lr}`),O(b,F(C))}}ae(g,{get sidebar(){return L},set sidebar(C){L=C},children:(C,lr)=>{var br=De(),vr=D(br),qr=n(vr),$=n(qr);$.__click=()=>L.show();var Wr=n($);{var Ur=a=>{var c=j(),J=D(c);ar(J,()=>Qr(Nr().picture),null,(V,M)=>{var q=ne();w(()=>Q(q,"src",r(M))),e(V,q)}),e(a,c)},Br=a=>{te(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};B(Wr,a=>{Nr()?a(Ur):a(Br,!1)})}l($);var ir=t($,2),Mr=n(ir);Lr(Mr,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),l(ir);var kr=t(ir,2),Ar=n(kr);Yr(Ar,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),l(kr),l(qr),l(vr);var nr=t(vr,2),z=n(nr);Xr(z),z.__keyup=[ie,or,X];var cr=t(z,2),fr=n(cr),Fr=er(()=>Z("posts"));fr.__click=function(...a){var c;(c=r(Fr))==null||c.apply(this,a)};var _r=t(fr,2),Ir=er(()=>Z("books"));_r.__click=function(...a){var c;(c=r(Ir))==null||c.apply(this,a)};var dr=t(_r,2),Rr=er(()=>Z("authors"));dr.__click=function(...a){var c;(c=r(Rr))==null||c.apply(this,a)};var yr=t(dr,2),Tr=er(()=>Z("people"));yr.__click=function(...a){var c;(c=r(Tr))==null||c.apply(this,a)},l(cr),l(nr);var wr=t(nr,2);{var jr=a=>{var c=j(),J=D(c);ar(J,()=>r(mr),V=>{var M=de(),q=n(M),W=t(q,2),Y=t(W,2);Er(Y,{}),l(M),w((I,k)=>{o(q,"color",I),o(W,"color",k)},[()=>s().text,()=>s().textDull]),e(V,M)},(V,M)=>{var q=_e(),W=D(q);{var Y=p=>{var u=ce(),N=n(u),y=t(N,2);l(u),w((h,_)=>{o(N,"color",h),o(y,"color",_)},[()=>s().text,()=>s().textDull]),e(p,u)},I=p=>{var u=j(),N=D(u);{var y=h=>{var _=fe(),f=n(_),m=t(f,2);l(_),w((S,i)=>{o(f,"color",S),o(m,"color",i)},[()=>s().text,()=>s().textDull]),e(h,_)};B(N,h=>{r(M).length===0&&h(y)},!0)}e(p,u)};B(W,p=>{r(v)==""?p(Y):p(I,!1)})}var k=t(W,2);ur(k,17,()=>r(M),hr,(p,u)=>{se(p,{get post(){return r(u)}})}),e(V,q)}),e(a,c)},Cr=a=>{var c=j(),J=D(c);{var V=q=>{var W=j(),Y=D(W);ar(Y,()=>r(xr),I=>{var k=be(),p=n(k),u=t(p,2),N=t(u,2);Er(N,{}),l(k),w((y,h)=>{o(p,"color",y),o(u,"color",h)},[()=>s().text,()=>s().textDull]),e(I,k)},(I,k)=>{var p=ge(),u=D(p);{var N=_=>{var f=pe(),m=n(f),S=t(m,2);l(f),w((i,x)=>{o(m,"color",i),o(S,"color",x)},[()=>s().text,()=>s().textDull]),e(_,f)},y=_=>{var f=j(),m=D(f);{var S=i=>{var x=ue(),E=n(x),G=t(E,2);l(x),w((R,T)=>{o(E,"color",R),o(G,"color",T)},[()=>s().text,()=>s().textDull]),e(i,x)};B(m,i=>{r(k).length===0&&i(S)},!0)}e(_,f)};B(u,_=>{r(v)==""?_(N):_(y,!1)})}var h=t(u,2);ur(h,21,()=>r(k),hr,(_,f)=>{var m=xe(),S=n(m),i=n(S),x=n(i,!0);l(i);var E=t(i,2),G=n(E,!0);l(E),l(S);var R=t(S,2);{var T=A=>{var U=he();w(()=>{Q(U,"alt",`Cover for ${r(f).title}`),Q(U,"src",r(f).cover)}),e(A,U)},rr=A=>{var U=me();w((K,pr)=>{o(U,"background-image",K),o(U,"color",pr)},[()=>`linear-gradient(${s().accent}, ${s().accent2})`,()=>s().backgroundDark]),e(A,U)};B(R,A=>{r(f).cover?A(T):A(rr,!1)})}l(m),w((A,U,K,pr)=>{Q(m,"href",`/book/${r(f).isbn}`),o(m,"border-color",A),o(i,"color",U),Pr(x,r(f).title),o(E,"color",K),Pr(G,pr)},[()=>s().textDark,()=>s().textBright,()=>s().textDim,()=>r(f).authors.join(", ")]),e(_,m)}),l(h),e(I,p)}),e(q,W)},M=q=>{var W=j(),Y=D(W);{var I=k=>{var p=j(),u=D(p);ar(u,()=>r(gr),N=>{var y=we(),h=n(y),_=t(h,2);l(y),w((f,m)=>{o(h,"color",f),o(_,"color",m)},[()=>s().text,()=>s().textDull]),e(N,y)},(N,y)=>{var h=ye(),_=D(h);{var f=i=>{var x=qe(),E=n(x),G=t(E,2);l(x),w((R,T)=>{o(E,"color",R),o(G,"color",T)},[()=>s().text,()=>s().textDull]),e(i,x)},m=i=>{var x=j(),E=D(x);{var G=R=>{var T=ke(),rr=n(T),A=t(rr,2);l(T),w((U,K)=>{o(rr,"color",U),o(A,"color",K)},[()=>s().text,()=>s().textDull]),e(R,T)};B(E,R=>{r(y).length===0&&R(G)},!0)}e(i,x)};B(_,i=>{r(v)==""?i(f):i(m,!1)})}var S=t(_,2);ur(S,21,()=>r(y),hr,(i,x,E,G)=>{oe(i,{get user(){return r(x)}})}),l(S),e(N,h)}),e(k,p)};B(Y,k=>{r(b)==="people"&&k(I)},!0)}e(q,W)};B(J,q=>{r(b)==="books"?q(V):q(M,!1)},!0)}e(a,c)};B(wr,a=>{r(b)==="posts"?a(jr):a(Cr,!1)})}var Gr=t(wr,2);zr(Gr,{selected:"search"}),w(a=>{Q(z,"placeholder",{books:"Enter a title or ISBN",posts:"Enter some keywords",authors:"Enter an author's name",people:"Enter a username"}[r(b)]),o(cr,"border-color",a),sr(fr,tr(r(b)==="posts"?"selected":""),"svelte-1fxrrq5"),sr(_r,tr(r(b)==="books"?"selected":""),"svelte-1fxrrq5"),sr(dr,tr(r(b)==="authors"?"selected":""),"svelte-1fxrrq5"),sr(yr,tr(r(b)==="people"?"selected":""),"svelte-1fxrrq5")},[()=>s().textDark]),$r("blur",z,or),re(z,()=>r(v),a=>O(v,a)),e(C,br)},$$slots:{default:!0}}),Vr()}Zr(["click","keyup"]);export{Oe as component};
