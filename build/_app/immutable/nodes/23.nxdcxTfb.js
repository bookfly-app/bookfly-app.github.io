import"../chunks/Bg9kRutz.js";import{p as Pa,a5 as n,ab as w,a as Sa,f as fa,s as e,t as f,i as r,k as Ea,c,r as p}from"../chunks/i-Dxzh4-.js";import{b as Na,s as Ra,i as R}from"../chunks/GNpwh-9T.js";import{P as Ta,a as H,g as xa}from"../chunks/CfszLjNa.js";import{e as La,i as Ua}from"../chunks/Da2w85Gb.js";import{a as d,t as u}from"../chunks/CjOfaZex.js";import{r as J,b as ja}from"../chunks/DVEdGfhw.js";import{d as qa,r as Aa}from"../chunks/AeTdaPAh.js";import{t as i,s as t}from"../chunks/C3MWGuYO.js";import{b as T}from"../chunks/x60r2LJ0.js";import{p as x}from"../chunks/CHAJi5Dc.js";import{g as Ga}from"../chunks/DIQVoU_8.js";import{b as K,c as Ha,d as Ja,e as Ka}from"../chunks/dyZAUeH2.js";import{E as ga}from"../chunks/CXBFcFvI.js";import{B as Ma}from"../chunks/BncN0TPR.js";import{I as ya}from"../chunks/qGOBCuKK.js";import{R as N}from"../chunks/gVNx0nug.js";function Oa(L,z){n(z,!1)}async function ha(L,z,v,k,b,g,y,m,I){if(!(r(z).length>0)){if(r(v)!==(await K).username&&await Ha(r(v))){n(k,!0);return}await Ja({displayName:r(b),bio:r(g),username:r(v),pronouns:r(y),picture:r(m),banner:r(I)}),await Ga("/profile"),location.reload()}}var Qa=u('<label for="set-banner" class="banner svelte-k21cxk"><div class="overlay svelte-k21cxk"></div> <!></label>'),Va=u('<label for="set-profile-picture" class="profile-picture svelte-k21cxk"><div class="overlay svelte-k21cxk"></div> <!></label>'),Wa=u('<span class="error svelte-k21cxk"> </span>'),Xa=u('<span class="error svelte-k21cxk">Username already taken</span>'),Ya=u('<span class="badge-line svelte-k21cxk">Show developer badge <!></span>'),Za=u('<span class="badge-line svelte-k21cxk">Show moderator badge <!></span>'),$a=u('<span class="badge-line svelte-k21cxk">Show moderator badge <!></span>'),ae=u('<!> <!> <div class="profile svelte-k21cxk"><div><!> <!> <button class="save svelte-k21cxk">Save</button></div> <label for="display-name" class="svelte-k21cxk">Display Name</label> <input type="text" id="display-name" class="svelte-k21cxk"> <label for="username" class="svelte-k21cxk">Username</label> <div class="username svelte-k21cxk"><span class="at svelte-k21cxk">@</span> <input type="text" id="username" class="svelte-k21cxk"></div> <!> <!> <hr class="svelte-k21cxk"> <label for="pronouns" class="svelte-k21cxk">Pronouns</label> <input type="text" id="pronouns" class="svelte-k21cxk"> <span class="radio-input svelte-k21cxk"><label for="display-pronouns" class="svelte-k21cxk">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-k21cxk"><label for="display-post-pronouns" class="svelte-k21cxk">Display pronouns on your posts</label> <!></span> <hr class="svelte-k21cxk"> <label for="bio" class="svelte-k21cxk">Bio</label> <textarea class="bio svelte-k21cxk" id="bio"></textarea> <hr class="svelte-k21cxk"> <label class="svelte-k21cxk">Badges</label> <!> <!> <!></div>',1),ee=u('<!> <!> <button class="save-bottom svelte-k21cxk">Save</button>',1);function ge(L,z){Pa(z,!0),K.then(_=>{n(v,x(_.displayName)),n(b,x(_.username)),n(g,x(_.bio)),n(y,x(_.pronouns)),n(m,x(_.picture)),n(k,x(_.banner))});let v=w(""),k=w(""),b=w(""),g=w(""),y=w(""),m=w(""),I=Ea(()=>Ka(r(b))),M,B=w(!1);Ta(L,{type:"profile",children:(_,re)=>{var O=ee(),Q=fa(O);Ma(Q,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var V=e(Q,2);H(V,()=>K,null,(U,D)=>{var X=ae(),Y=fa(X);H(Y,()=>xa(r(k)),null,(a,o)=>{var s=Qa(),l=e(c(s),2);ga(l,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),p(s),f(()=>t(s,"background-image",`url('${r(o)??""}')`)),d(a,s)});var Z=e(Y,2);ya(Z,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return r(k)},set imageId(a){n(k,x(a))}});var $=e(Z,2),j=c($),aa=c(j);H(aa,()=>xa(r(m)),null,(a,o)=>{var s=Va(),l=e(c(s),2);ga(l,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),p(s),f(h=>{t(s,"border-color",h),t(s,"background-image",`url('${r(o)??""}')`)},[()=>i().background]),d(a,s)});var ea=e(aa,2);ya(ea,{id:"set-profile-picture",aspectRatio:1/1,get imageId(){return r(m)},set imageId(a){n(m,x(a))}});var ra=e(ea,2);ra.__click=[ha,I,b,B,v,g,y,m,k],p(j);var sa=e(j,2),F=e(sa,2);J(F);var ta=e(F,2),P=e(ta,2),oa=c(P),S=e(oa,2);J(S),S.__input=[Oa,B],Na(S,a=>M=a,()=>M),p(P);var la=e(P,2);La(la,17,()=>r(I),Ua,(a,o)=>{var s=Wa(),l=c(s,!0);p(s),f(()=>Ra(l,r(o))),d(a,s)});var na=e(la,2);{var wa=a=>{var o=Xa();d(a,o)};R(na,a=>{r(B)&&a(wa)})}var ia=e(na,2),ca=e(ia,2),E=e(ca,2);J(E);var q=e(E,2),pa=c(q),Ia=e(pa,2);N(Ia,{id:"display-pronouns",size:.7}),p(q);var A=e(q,2),va=c(A),Da=e(va,2);N(Da,{id:"display-post-pronouns",size:.7}),p(A);var da=e(A,2),ua=e(da,2),C=e(ua,2);Aa(C);var ka=e(C,2),ba=e(ka,2),ma=e(ba,2);{var Ca=a=>{var o=Ya(),s=e(c(o));N(s,{size:.6}),p(o),f(l=>t(o,"color",l),[()=>i().textDull]),d(a,o)};R(ma,a=>{r(D).tags.includes("dev")&&a(Ca)})}var _a=e(ma,2);{var za=a=>{var o=Za(),s=e(c(o));N(s,{size:.6}),p(o),f(l=>t(o,"color",l),[()=>i().textDull]),d(a,o)};R(_a,a=>{r(D).tags.includes("mod")&&a(za)})}var Ba=e(_a,2);{var Fa=a=>{var o=$a(),s=e(c(o));N(s,{size:.6}),p(o),f(l=>t(o,"color",l),[()=>i().textDull]),d(a,o)};R(Ba,a=>{r(D).tags.includes("developer")&&a(Fa)})}p($),f((a,o,s,l,h,G)=>{t(ra,"background",`linear-gradient(${a??""}, ${o??""})`),t(sa,"color",s),t(F,"background",l),t(F,"color",h),t(ta,"color",s),t(P,"outline",r(B)||r(I).length>0?"2px solid indianred":"none"),t(P,"background",l),t(oa,"color",h),t(S,"color",h),t(ia,"background",G),t(ca,"color",s),t(E,"background",l),t(E,"color",h),t(pa,"color",s),t(va,"color",s),t(da,"background",G),t(ua,"color",s),ja(C,`				${r(D).bio??""}
			`),t(C,"color",h),t(C,"background",l),t(ka,"background",G),t(ba,"color",s)},[()=>i().accent,()=>i().accent2,()=>i().textDull,()=>i().backgroundDark,()=>i().text,()=>i().textDark]),T(F,()=>r(v),a=>n(v,a)),T(S,()=>r(b),a=>n(b,a)),T(E,()=>r(y),a=>n(y,a)),T(C,()=>r(g),a=>n(g,a)),d(U,X)});var W=e(V,2);W.__click=[ha,I,b,B,v,g,y,m,k],f((U,D)=>t(W,"background",`linear-gradient(${U??""}, ${D??""})`),[()=>i().accent,()=>i().accent2]),d(_,O)},$$slots:{default:!0}}),Sa()}qa(["click","input"]);export{ge as component};
