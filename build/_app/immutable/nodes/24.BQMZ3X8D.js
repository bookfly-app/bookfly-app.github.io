import"../chunks/Bg9kRutz.js";import{m as wr,c as n,r as l,p as Fr,ab as H,a as Or,i as r,f as P,s,t as w,a5 as O,k as er}from"../chunks/i-Dxzh4-.js";import{i as B,s as Pr}from"../chunks/C2UmEeKx.js";import{u as Dr,z as Vr,A as Yr,B as Gr,a as ar,b as Hr,P as Jr}from"../chunks/CCkeDGYs.js";import{e as ur,i as hr}from"../chunks/Da2w85Gb.js";import{a as e,t as d,c as z}from"../chunks/CjOfaZex.js";import{s as Q,c as tr,r as Kr}from"../chunks/BrRXOXDQ.js";import{d as Qr,e as Xr}from"../chunks/_7rhGYst.js";import{t,s as o}from"../chunks/C3MWGuYO.js";import{b as Zr}from"../chunks/ONGQm3i5.js";import{p as I}from"../chunks/CHAJi5Dc.js";import{o as $r}from"../chunks/Dxhw3p0l.js";import{g as Nr}from"../chunks/om-sBzeu.js";import{P as re,S as ee}from"../chunks/BjLDt-mT.js";import"../chunks/69_IOA4Y.js";import{W as Er}from"../chunks/BgKfOSdL.js";import{A as ae}from"../chunks/B8K69v1z.js";import{U as te}from"../chunks/DLzimD5Q.js";function sr(g,D,L){var b=g.__className,v=se(D,L);wr&&g.className===v?g.__className=v:(b!==v||wr&&g.className!==v)&&(g.className=v,g.__className=v)}function se(g,D){return(g??"")+(" "+D)}var oe=d('<div class="svelte-162e39x"><!></div>');function Sr(g){var D=oe(),L=n(D);Er(L,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),l(D),e(g,D)}function le(g,D,L){g.key==="Enter"?D():(r(L)&&clearTimeout(r(L)),O(L,I(setTimeout(D,3e3))))}var ve=d('<img alt="Your profile" class="profile-link svelte-1fxrrq5">'),ie=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Search for a post</h1> <p class="svelte-1fxrrq5">Enter your search term to find relevant posts.</p></div>'),ne=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">No posts found</h1> <p class="svelte-1fxrrq5">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),ce=d("<!> <!>",1),fe=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Loading posts...</h1> <p class="svelte-1fxrrq5">We promise Wallflower will be faster soon.</p> <!></div>'),_e=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Search for a book</h1> <p class="svelte-1fxrrq5">Enter your search term to find relevant books.</p></div>'),de=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">No books found</h1> <p class="svelte-1fxrrq5">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),pe=d('<img class="cover svelte-1fxrrq5">'),ue=d('<div class="nocover svelte-1fxrrq5">?</div>'),he=d('<a class="book svelte-1fxrrq5"><div class="book-info svelte-1fxrrq5"><h1 class="svelte-1fxrrq5"> </h1> <h2 class="svelte-1fxrrq5"> </h2></div> <!></a>'),me=d('<!> <div class="books svelte-1fxrrq5"></div>',1),xe=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Loading books...</h1> <p class="svelte-1fxrrq5">We promise Wallflower will be faster soon.</p> <!></div>'),ge=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Search for a user</h1> <p class="svelte-1fxrrq5">Enter your search term to find relevant users.</p></div>'),be=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">No users found</h1> <p class="svelte-1fxrrq5">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),qe=d('<!> <div class="people"></div>',1),ke=d('<div class="loading svelte-1fxrrq5"><h1 class="svelte-1fxrrq5">Loading accounts...</h1> <p class="svelte-1fxrrq5">We promise Wallflower will be faster soon.</p></div>'),ye=d('<nav class="svelte-1fxrrq5"><div class="banner svelte-1fxrrq5"><button aria-label="Open sidebar" class="svelte-1fxrrq5"><!></button> <button class="svelte-1fxrrq5"><!></button> <a class="search svelte-1fxrrq5" href="/search"><!></a></div></nav> <section class="svelte-1fxrrq5"><input type="text" class="svelte-1fxrrq5"> <div class="views svelte-1fxrrq5"><button>Posts</button> <button>Books</button> <button>Authors</button> <button>Users</button></div></section> <!>',1);function Fe(g,D){Fr(D,!0);let L,b=H(I(new URLSearchParams(window.location.search).get("view")??"posts")),v=H("");async function or(){r(X)&&clearTimeout(r(X)),O(X,null),O(v,I(r(v).trim()));const C=new URLSearchParams({term:r(v),view:r(b)});Nr(`/search?${C}`),r(b)==="posts"&&O(mr,I(Vr(r(v)))),r(b)==="books"&&O(xr,I(Yr(r(v)))),r(b)==="people"&&O(gr,I(Gr(r(v))))}$r(()=>{r(v)&&or()});let X=H(null),mr=H(I(Promise.resolve([]))),xr=H(I(Promise.resolve([]))),gr=H(I(Promise.resolve([])));function Z(C){return function(){const lr=new URLSearchParams({view:C});r(v)&&lr.set("term",r(v)),Nr(`/search?${lr}`),O(b,I(C))}}re(g,{type:"search",get sidebar(){return L},set sidebar(C){L=C},children:(C,lr)=>{var br=ye(),vr=P(br),qr=n(vr),$=n(qr);$.__click=()=>L.show();var Lr=n($);{var Wr=a=>{var c=z(),J=P(c);ar(J,()=>Hr(Dr().picture),null,(V,A)=>{var q=ve();w(()=>Q(q,"src",r(A))),e(V,q)}),e(a,c)},Ur=a=>{Jr(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};B(Lr,a=>{Dr()?a(Wr):a(Ur,!1)})}l($);var ir=s($,2),Br=n(ir);Er(Br,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),l(ir);var kr=s(ir,2),Ar=n(kr);ee(Ar,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),l(kr),l(qr),l(vr);var nr=s(vr,2),G=n(nr);Kr(G),G.__keyup=[le,or,X];var cr=s(G,2),fr=n(cr),Mr=er(()=>Z("posts"));fr.__click=function(...a){var c;(c=r(Mr))==null||c.apply(this,a)};var _r=s(fr,2),Ir=er(()=>Z("books"));_r.__click=function(...a){var c;(c=r(Ir))==null||c.apply(this,a)};var dr=s(_r,2),Rr=er(()=>Z("authors"));dr.__click=function(...a){var c;(c=r(Rr))==null||c.apply(this,a)};var yr=s(dr,2),Tr=er(()=>Z("people"));yr.__click=function(...a){var c;(c=r(Tr))==null||c.apply(this,a)},l(cr),l(nr);var jr=s(nr,2);{var zr=a=>{var c=z(),J=P(c);ar(J,()=>r(mr),V=>{var A=fe(),q=n(A),W=s(q,2),Y=s(W,2);Sr(Y,{}),l(A),w((R,k)=>{o(q,"color",R),o(W,"color",k)},[()=>t().text,()=>t().textDull]),e(V,A)},(V,A)=>{var q=ce(),W=P(q);{var Y=p=>{var u=ie(),N=n(u),y=s(N,2);l(u),w((h,_)=>{o(N,"color",h),o(y,"color",_)},[()=>t().text,()=>t().textDull]),e(p,u)},R=p=>{var u=z(),N=P(u);{var y=h=>{var _=ne(),f=n(_),m=s(f,2);l(_),w((S,i)=>{o(f,"color",S),o(m,"color",i)},[()=>t().text,()=>t().textDull]),e(h,_)};B(N,h=>{r(A).length===0&&h(y)},!0)}e(p,u)};B(W,p=>{r(v)==""?p(Y):p(R,!1)})}var k=s(W,2);ur(k,17,()=>r(A),hr,(p,u)=>{ae(p,{get post(){return r(u)}})}),e(V,q)}),e(a,c)},Cr=a=>{var c=z(),J=P(c);{var V=q=>{var W=z(),Y=P(W);ar(Y,()=>r(xr),R=>{var k=xe(),p=n(k),u=s(p,2),N=s(u,2);Sr(N,{}),l(k),w((y,h)=>{o(p,"color",y),o(u,"color",h)},[()=>t().text,()=>t().textDull]),e(R,k)},(R,k)=>{var p=me(),u=P(p);{var N=_=>{var f=_e(),m=n(f),S=s(m,2);l(f),w((i,x)=>{o(m,"color",i),o(S,"color",x)},[()=>t().text,()=>t().textDull]),e(_,f)},y=_=>{var f=z(),m=P(f);{var S=i=>{var x=de(),E=n(x),F=s(E,2);l(x),w((T,j)=>{o(E,"color",T),o(F,"color",j)},[()=>t().text,()=>t().textDull]),e(i,x)};B(m,i=>{r(k).length===0&&i(S)},!0)}e(_,f)};B(u,_=>{r(v)==""?_(N):_(y,!1)})}var h=s(u,2);ur(h,21,()=>r(k),hr,(_,f)=>{var m=he(),S=n(m),i=n(S),x=n(i,!0);l(i);var E=s(i,2),F=n(E,!0);l(E),l(S);var T=s(S,2);{var j=M=>{var U=pe();w(()=>{Q(U,"alt",`Cover for ${r(f).title}`),Q(U,"src",r(f).cover)}),e(M,U)},rr=M=>{var U=ue();w((K,pr)=>{o(U,"background-image",K),o(U,"color",pr)},[()=>`linear-gradient(${t().accent}, ${t().accent2})`,()=>t().backgroundDark]),e(M,U)};B(T,M=>{r(f).cover?M(j):M(rr,!1)})}l(m),w((M,U,K,pr)=>{Q(m,"href",`/book/${r(f).isbn}`),o(m,"border-color",M),o(i,"color",U),Pr(x,r(f).title),o(E,"color",K),Pr(F,pr)},[()=>t().textDark,()=>t().textBright,()=>t().textDim,()=>r(f).authors.join(", ")]),e(_,m)}),l(h),e(R,p)}),e(q,W)},A=q=>{var W=z(),Y=P(W);{var R=k=>{var p=z(),u=P(p);ar(u,()=>r(gr),N=>{var y=ke(),h=n(y),_=s(h,2);l(y),w((f,m)=>{o(h,"color",f),o(_,"color",m)},[()=>t().text,()=>t().textDull]),e(N,y)},(N,y)=>{var h=qe(),_=P(h);{var f=i=>{var x=ge(),E=n(x),F=s(E,2);l(x),w((T,j)=>{o(E,"color",T),o(F,"color",j)},[()=>t().text,()=>t().textDull]),e(i,x)},m=i=>{var x=z(),E=P(x);{var F=T=>{var j=be(),rr=n(j),M=s(rr,2);l(j),w((U,K)=>{o(rr,"color",U),o(M,"color",K)},[()=>t().text,()=>t().textDull]),e(T,j)};B(E,T=>{r(y).length===0&&T(F)},!0)}e(i,x)};B(_,i=>{r(v)==""?i(f):i(m,!1)})}var S=s(_,2);ur(S,21,()=>r(y),hr,(i,x,E,F)=>{te(i,{get user(){return r(x)}})}),l(S),e(N,h)}),e(k,p)};B(Y,k=>{r(b)==="people"&&k(R)},!0)}e(q,W)};B(J,q=>{r(b)==="books"?q(V):q(A,!1)},!0)}e(a,c)};B(jr,a=>{r(b)==="posts"?a(zr):a(Cr,!1)})}w(a=>{Q(G,"placeholder",{books:"Enter a title or ISBN",posts:"Enter some keywords",authors:"Enter an author's name",people:"Enter a username"}[r(b)]),o(cr,"border-color",a),sr(fr,tr(r(b)==="posts"?"selected":""),"svelte-1fxrrq5"),sr(_r,tr(r(b)==="books"?"selected":""),"svelte-1fxrrq5"),sr(dr,tr(r(b)==="authors"?"selected":""),"svelte-1fxrrq5"),sr(yr,tr(r(b)==="people"?"selected":""),"svelte-1fxrrq5")},[()=>t().textDark]),Xr("blur",G,or),Zr(G,()=>r(v),a=>O(v,a)),e(C,br)},$$slots:{default:!0}}),Or()}Qr(["click","keyup"]);export{Fe as component};
