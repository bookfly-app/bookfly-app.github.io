import"../chunks/Bg9kRutz.js";import{m as Se,c as n,r as v,p as Ge,ab as z,a as He,g as e,a5 as F,f as P,s,t as N,k as ae}from"../chunks/pkGNK3NG.js";import{i as B,s as Ee}from"../chunks/Bn2adsp5.js";import{P as Je,S as Ke,a as Q,g as Qe,b as Xe}from"../chunks/BgBOm0Eo.js";import{e as me,i as ke}from"../chunks/DfOdsPlP.js";import{a,t as p,c as T}from"../chunks/D66Go1WX.js";import{s as we,c as re,r as Ze}from"../chunks/Ctg0qLZn.js";import{d as $e,e as ea}from"../chunks/Bh3Z7n3o.js";import{t as r,s as t}from"../chunks/DIVgqEhC.js";import{b as aa}from"../chunks/2VVpG1al.js";import{p as M}from"../chunks/CjTTMtIM.js";import{o as ra}from"../chunks/BSAyFCWD.js";import{g as Le}from"../chunks/MFMTe_7B.js";import{u as We,t as oa,v as ta,w as sa}from"../chunks/BDWQaBNk.js";import"../chunks/69_IOA4Y.js";import{W as Be}from"../chunks/BZrAVATK.js";import{A as la}from"../chunks/Bs8-b7x1.js";import{U as va}from"../chunks/cXcUYC3f.js";import{B as ia}from"../chunks/oCoc8utF.js";function oe(f,x,W){var w=f.__className,i=na(x,W);Se&&f.className===i?f.__className=i:(w!==i||Se&&f.className!==i)&&(f.className=i,f.__className=i)}function na(f,x){return(f??"")+(" "+x)}var da=p('<div class="svelte-162e39x"><!></div>');function Ue(f){var x=da(),W=n(x);Be(W,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),v(x),a(f,x)}function ca(f,x,W){f.key==="Enter"?x():(e(W)&&clearTimeout(e(W)),F(W,M(setTimeout(x,3e3))))}var _a=(f,x)=>e(x).show(),pa=p('<img alt="Your profile" class="profile-link svelte-kldow">'),ua=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">Search for a post</h1> <p class="svelte-kldow">Enter your search term to find relevant posts.</p></div>'),fa=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">No posts found</h1> <p class="svelte-kldow">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),ha=p("<!> <!>",1),ma=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">Loading posts...</h1> <p class="svelte-kldow">We promise Wallflower will be faster soon.</p> <!></div>'),ka=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">Search for a book</h1> <p class="svelte-kldow">Enter your search term to find relevant books.</p></div>'),wa=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">No books found</h1> <p class="svelte-kldow">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),ga=p('<div class="nocover svelte-kldow">?</div>'),ba=p('<a class="book svelte-kldow"><div class="book-info svelte-kldow"><h1 class="svelte-kldow"> </h1> <h2 class="svelte-kldow"> </h2></div> <!></a>'),xa=p('<div class="book svelte-kldow"><div class="book-info svelte-kldow"><div class="loading-title svelte-kldow"></div> <div class="loading-authors svelte-kldow"></div></div> <div class="loading-cover svelte-kldow"></div></div>'),ya=p('<!> <div class="books svelte-kldow"></div>',1),Da=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">Loading books...</h1> <p class="svelte-kldow">We promise Wallflower will be faster soon.</p> <!></div>'),Pa=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">Search for a user</h1> <p class="svelte-kldow">Enter your search term to find relevant users.</p></div>'),Na=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">No users found</h1> <p class="svelte-kldow">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),Sa=p('<!> <div class="people"></div>',1),Ea=p('<div class="loading svelte-kldow"><h1 class="svelte-kldow">Loading accounts...</h1> <p class="svelte-kldow">We promise Wallflower will be faster soon.</p></div>'),La=p('<nav class="svelte-kldow"><div class="banner svelte-kldow"><button aria-label="Open sidebar" class="svelte-kldow"><!></button> <button class="svelte-kldow"><!></button> <a class="search svelte-kldow" href="/search"><!></a></div></nav> <section class="svelte-kldow"><input type="text" class="svelte-kldow"> <div class="views svelte-kldow"><button>Posts</button> <button>Books</button> <button>Authors</button> <button>Users</button></div></section> <!>',1);function Ka(f,x){Ge(x,!0);let W=z(null),w=z(M(new URLSearchParams(window.location.search).get("view")??"posts")),i=z("");async function X(){e(Z)&&clearTimeout(e(Z)),F(Z,null),F(i,M(e(i).trim()));const O=new URLSearchParams({term:e(i),view:e(w)});Le(`/search?${O}`),e(w)==="posts"?F(ge,M(oa(e(i)))):e(w)==="books"?F(be,M(ta(e(i)))):e(w)==="people"&&F(xe,M(sa(e(i))))}ra(()=>{e(i)&&X()});let Z=z(null),ge=z(M(Promise.resolve([]))),be=z(M(Promise.resolve([]))),xe=z(M(Promise.resolve([])));function $(O){return function(){const te=new URLSearchParams({view:O});e(i)&&te.set("term",e(i)),Le(`/search?${te}`),F(w,M(O)),X()}}Je(f,{type:"search",get sidebar(){return e(W)},set sidebar(O){F(W,M(O))},children:(O,te)=>{var ye=La(),se=P(ye),De=n(se),ee=n(De);ee.__click=[_a,W];var Me=n(ee);{var Ae=o=>{var d=T(),J=P(d);Q(J,()=>Qe(We().picture),null,(Y,A)=>{var g=pa();N(()=>we(g,"src",e(A))),a(Y,g)}),a(o,d)},Ie=o=>{Xe(o,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};B(Me,o=>{We()?o(Ae):o(Ie,!1)})}v(ee);var le=s(ee,2),Re=n(le);Be(Re,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),v(le);var Pe=s(le,2),Te=n(Pe);Ke(Te,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),v(Pe),v(De),v(se);var ve=s(se,2),G=n(ve);Ze(G),G.__keyup=[ca,X,Z];var ie=s(G,2),ne=n(ie),je=ae(()=>$("posts"));ne.__click=function(...o){var d;(d=e(je))==null||d.apply(this,o)};var de=s(ne,2),Ce=ae(()=>$("books"));de.__click=function(...o){var d;(d=e(Ce))==null||d.apply(this,o)};var ce=s(de,2),Fe=ae(()=>$("authors"));ce.__click=function(...o){var d;(d=e(Fe))==null||d.apply(this,o)};var Ne=s(ce,2),Oe=ae(()=>$("people"));Ne.__click=function(...o){var d;(d=e(Oe))==null||d.apply(this,o)},v(ie),v(ve);var Ve=s(ve,2);{var Ye=o=>{var d=T(),J=P(d);Q(J,()=>e(ge),Y=>{var A=ma(),g=n(A),U=s(g,2),q=s(U,2);Ue(q,{}),v(A),N((j,y)=>{t(g,"color",j),t(U,"color",y)},[()=>r().text,()=>r().textDull]),a(Y,A)},(Y,A)=>{var g=ha(),U=P(g);{var q=u=>{var h=ua(),E=n(h),D=s(E,2);v(h),N((m,_)=>{t(E,"color",m),t(D,"color",_)},[()=>r().text,()=>r().textDull]),a(u,h)},j=u=>{var h=T(),E=P(h);{var D=m=>{var _=fa(),b=n(_),S=s(b,2);v(_),N((I,c)=>{t(b,"color",I),t(S,"color",c)},[()=>r().text,()=>r().textDull]),a(m,_)};B(E,m=>{e(A).length===0&&m(D)},!0)}a(u,h)};B(U,u=>{e(i)==""?u(q):u(j,!1)})}var y=s(U,2);me(y,17,()=>e(A),ke,(u,h)=>{la(u,{get post(){return e(h)}})}),a(Y,g)}),a(o,d)},qe=o=>{var d=T(),J=P(d);{var Y=g=>{var U=T(),q=P(U);Q(q,()=>e(be),j=>{var y=Da(),u=n(y),h=s(u,2),E=s(h,2);Ue(E,{}),v(y),N((D,m)=>{t(u,"color",D),t(h,"color",m)},[()=>r().text,()=>r().textDull]),a(j,y)},(j,y)=>{var u=ya(),h=P(u);{var E=_=>{var b=ka(),S=n(b),I=s(S,2);v(b),N((c,l)=>{t(S,"color",c),t(I,"color",l)},[()=>r().text,()=>r().textDull]),a(_,b)},D=_=>{var b=T(),S=P(b);{var I=c=>{var l=wa(),k=n(l),R=s(k,2);v(l),N((L,C)=>{t(k,"color",L),t(R,"color",C)},[()=>r().text,()=>r().textDull]),a(c,l)};B(S,c=>{e(y).length===0&&c(I)},!0)}a(_,b)};B(h,_=>{e(i)==""?_(E):_(D,!1)})}var m=s(h,2);me(m,21,()=>e(y),ke,(_,b)=>{var S=T(),I=P(S);Q(I,()=>e(b),c=>{var l=xa();N(k=>t(l,"border-color",k),[()=>r().textDark]),a(c,l)},(c,l)=>{var k=ba(),R=n(k),L=n(R),C=n(L,!0);v(L);var H=s(L,2),_e=n(H,!0);v(H),v(R);var pe=s(R,2);{var ue=V=>{ia(V,{get book(){return e(l)},style:"width: 3.5rem; margin-left: auto;"})},ze=V=>{var K=ga();N((fe,he)=>{t(K,"background-image",fe),t(K,"color",he)},[()=>`linear-gradient(${r().accent}, ${r().accent2})`,()=>r().backgroundDark]),a(V,K)};B(pe,V=>{e(l).cover?V(ue):V(ze,!1)})}v(k),N((V,K,fe,he)=>{we(k,"href",`/book/${e(l).isbn}`),t(k,"border-color",V),t(L,"color",K),Ee(C,e(l).title),t(H,"color",fe),Ee(_e,he)},[()=>r().textDark,()=>r().textBright,()=>r().textDim,()=>e(l).authors.join(", ")]),a(c,k)}),a(_,S)}),v(m),a(j,u)}),a(g,U)},A=g=>{var U=T(),q=P(U);{var j=y=>{var u=T(),h=P(u);Q(h,()=>e(xe),E=>{var D=Ea(),m=n(D),_=s(m,2);v(D),N((b,S)=>{t(m,"color",b),t(_,"color",S)},[()=>r().text,()=>r().textDull]),a(E,D)},(E,D)=>{var m=Sa(),_=P(m);{var b=c=>{var l=Pa(),k=n(l),R=s(k,2);v(l),N((L,C)=>{t(k,"color",L),t(R,"color",C)},[()=>r().text,()=>r().textDull]),a(c,l)},S=c=>{var l=T(),k=P(l);{var R=L=>{var C=Na(),H=n(C),_e=s(H,2);v(C),N((pe,ue)=>{t(H,"color",pe),t(_e,"color",ue)},[()=>r().text,()=>r().textDull]),a(L,C)};B(k,L=>{e(D).length===0&&L(R)},!0)}a(c,l)};B(_,c=>{e(i)==""?c(b):c(S,!1)})}var I=s(_,2);me(I,21,()=>e(D),ke,(c,l,k,R)=>{va(c,{get user(){return e(l)}})}),v(I),a(E,m)}),a(y,u)};B(q,y=>{e(w)==="people"&&y(j)},!0)}a(g,U)};B(J,g=>{e(w)==="books"?g(Y):g(A,!1)},!0)}a(o,d)};B(Ve,o=>{e(w)==="posts"?o(Ye):o(qe,!1)})}N(o=>{we(G,"placeholder",{books:"Enter a title or ISBN",posts:"Enter some keywords",authors:"Enter an author's name",people:"Enter a username"}[e(w)]),t(ie,"border-color",o),oe(ne,re(e(w)==="posts"?"selected":""),"svelte-kldow"),oe(de,re(e(w)==="books"?"selected":""),"svelte-kldow"),oe(ce,re(e(w)==="authors"?"selected":""),"svelte-kldow"),oe(Ne,re(e(w)==="people"?"selected":""),"svelte-kldow")},[()=>r().textDark]),ea("blur",G,X),aa(G,()=>e(i),o=>F(i,o)),a(O,ye)},$$slots:{default:!0}}),He()}$e(["click","keyup"]);export{Ka as component};
