import{A as vt,C as _t,B as ut,t as l,u as b,b as d,s as X,c as gt,f as Z}from"../chunks/B94z8WIK.js";import"../chunks/Bg9kRutz.js";import{Y as mt,ax as kt,at as bt,p as pt,u as ht,f as R,t as G,a as jt,ae as $,af as xt,s as f,j as _,g as u,d as Lt,r as g}from"../chunks/BQwp8B-n.js";import{s as U}from"../chunks/DxxCBu0P.js";import{a as wt}from"../chunks/DAejWSS6.js";import{i as Y}from"../chunks/CHzKE6ju.js";import{e as yt,i as St}from"../chunks/BO3qsMJ0.js";import{a as k,t as A,c as q}from"../chunks/DtkSo16Z.js";import{d as Bt}from"../chunks/B_YATYbX.js";import{b as Dt}from"../chunks/CI7wC_ja.js";import{S as Rt,F as At}from"../chunks/B0XqYRMn.js";import{P as Ot,S as Pt}from"../chunks/CeEfX_Jh.js";import{A as Tt}from"../chunks/ChZHrx95.js";const Mt=[];function Ct(t,e=!1){return C(t,new Map,"",Mt)}function C(t,e,s,n,x=null){if(typeof t=="object"&&t!==null){var L=e.get(t);if(L!==void 0)return L;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(mt(t)){var o=Array(t.length);e.set(t,o),x!==null&&e.set(x,o);for(var p=0;p<t.length;p+=1){var O=t[p];p in t&&(o[p]=C(O,e,s,n))}return o}if(kt(t)===bt){o={},e.set(t,o),x!==null&&e.set(x,o);for(var B in t)o[B]=C(t[B],e,s,n);return o}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return C(t.toJSON(),e,s,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}const Ft=async({params:t})=>({book:await vt(t.slug)}),ae=Object.freeze(Object.defineProperty({__proto__:null,load:Ft},Symbol.toStringTag,{value:"Module"}));async function It(t,e){var n;const s=b().readingList;Z({readingList:[...s,e.isbn]}),(n=b())==null||n.readingList.push(e.isbn)}async function Jt(t,e){console.log("Removing");const s=b().readingList.filter(n=>n!==e.isbn);Z({readingList:s}),b().readingList=s,console.log(b().readingList)}var Nt=(t,e)=>$(e,"info"),zt=(t,e)=>$(e,"discussion"),Et=A('<div class="book-info svelte-kn64jk"><img class="cover svelte-kn64jk"> <p class="description svelte-kn64jk"> </p></div>'),Gt=A('<button id="add-to-reading-list" class="remove-from-reading-list svelte-kn64jk">Remove from Reading List</button>'),Ut=A('<button id="add-to-reading-list" class="svelte-kn64jk">Add to Reading List</button>'),Yt=A('<nav class="svelte-kn64jk"><div class="banner svelte-kn64jk"><button aria-label="Open sidebar" class="svelte-kn64jk"></button> <div class="book-name svelte-kn64jk"><h1 class="svelte-kn64jk"> </h1> <h2 class="svelte-kn64jk"> </h2></div> <!></div></nav> <section class="svelte-kn64jk"><div class="views svelte-kn64jk"><button class="svelte-kn64jk">Info</button> <button class="svelte-kn64jk">Discussion</button></div> <!> <!></section> <!> <!>',1),qt=A("<!> <!>",1);function oe(t,e){pt(e,!0);let s=e.data.book,n=xt("info"),x=_t(s.isbn),L,o=Lt(()=>{var i;return((i=b())==null?void 0:i.readingList.includes(s.isbn))??!1});ht(()=>{var i;console.log(Ct((i=b())==null?void 0:i.readingList))});function p(i,K=3){i=i.replaceAll("--","â€”");let w=i.split(/([.!?])\s*/),m=[];for(let c=0;c<w.length;c+=2)m.push(w[c]+w[c+1]);return m.map((c,y)=>(y+1)%K===0&&y!==m.length-1?c+`

`:c).join("")}var O=qt(),B=R(O);ut(B,{});var H=f(B,2);Ot(H,{style:"overflow-y: hidden;",children:(i,K)=>{var w=Yt(),m=R(w),F=_(m),c=_(F);c.__click=()=>L.show();var y=f(c,2),P=_(y),tt=_(P,!0);g(P);var I=f(P,2),et=_(I,!0);g(I),g(y);var rt=f(y,2);Rt(rt,{style:"width: 2rem; height: 2rem;",get stroke(){return l().textBright}}),g(F),g(m);var J=f(m,2),T=_(J),M=_(T);M.__click=[Nt,n];var N=f(M,2);N.__click=[zt,n],g(T);var Q=f(T,2);{var st=r=>{var a=Et(),v=_(a),h=f(v,2),j=_(h,!0);g(h),g(a),G((S,D)=>{X(v,"alt",`${s.title} cover`),X(v,"src",s.cover),d(h,"color",S),U(j,D)},[()=>l().textDull,()=>p(s.description)]),k(r,a)},nt=r=>{var a=q(),v=R(a);{var h=j=>{var S=q(),D=R(S);wt(D,()=>x,null,(z,E)=>{var W=q(),lt=R(W);yt(lt,17,()=>u(E),St,(dt,ft)=>{Tt(dt,{get post(){return u(ft)}})}),k(z,W)}),k(j,S)};Y(v,j=>{u(n)==="discussion"&&j(h)},!0)}k(r,a)};Y(Q,r=>{u(n)==="info"?r(st):r(nt,!1)})}var at=f(Q,2);{var ot=r=>{var a=Gt();a.__click=[Jt,s],k(r,a)},it=r=>{var a=Ut();a.__click=[It,s],G(v=>d(a,"background",v),[gt]),k(r,a)};Y(at,r=>{u(o)?r(ot):r(it,!1)})}g(J);var V=f(J,2);At(V,{selected:"search"});var ct=f(V,2);Dt(Pt(ct,{}),r=>L=r,()=>L),G((r,a,v,h,j,S,D,z,E)=>{d(m,"background",r),d(c,"background-image",a),d(P,"color",v),U(tt,s.title),d(I,"color",h),U(et,j),d(T,"background-color",r),d(M,"color",S),d(M,"border-bottom-color",D),d(N,"color",z),d(N,"border-bottom-color",E)},[()=>l().backgroundDark,()=>{var r;return`url("${((r=b())==null?void 0:r.picture)??""}")`},()=>l().textBright,()=>l().textDim,()=>s.authors.join(", "),()=>u(n)==="info"?l().textBright:l().textDull,()=>u(n)==="info"?l().accent:"transparent",()=>u(n)==="discussion"?l().textBright:l().textDull,()=>u(n)==="discussion"?l().accent:"transparent"]),k(i,w)},$$slots:{default:!0}}),k(t,O),jt()}Bt(["click"]);export{oe as component,ae as universal};
