import{n as nt,o as lt,B as dt,t as s,u as z,f as ct,c as vt,b as r,s as J}from"../chunks/QXM6ucii.js";import"../chunks/Bg9kRutz.js";import{p as ut,f as B,t as K,a as _t,ae as Q,af as mt,s as o,j as l,g as u,r as d}from"../chunks/BKc628eD.js";import{s as I}from"../chunks/R2Zhwpgh.js";import{a as ft}from"../chunks/Tz89-DA6.js";import{i as N}from"../chunks/C8FwvXbo.js";import{e as bt,i as gt}from"../chunks/CS_7v10S.js";import{a as x,t as G,c as $}from"../chunks/H8-2uB_g.js";import{d as pt}from"../chunks/BQkRYWVv.js";import{b as ht}from"../chunks/BZ3Nx4FG.js";import{S as xt,F as kt}from"../chunks/DLl-uS-N.js";import{P as yt,S as Bt}from"../chunks/CZFjDx1V.js";import{A as wt}from"../chunks/CQIPtP2Q.js";const Dt=async({params:b})=>({book:await nt(b.slug)}),Jt=Object.freeze(Object.defineProperty({__proto__:null,load:Dt},Symbol.toStringTag,{value:"Module"}));async function Lt(b,i){var e;const n=z().readingList;ct({readingList:[...n,i.isbn]}),(e=z())==null||e.readingList.push(i.isbn)}var St=(b,i)=>Q(i,"info"),jt=(b,i)=>Q(i,"discussion"),At=G('<div class="book-info svelte-dayxdu"><img class="cover svelte-dayxdu"> <p class="description svelte-dayxdu"> </p></div>'),Pt=G('<nav class="svelte-dayxdu"><div class="banner svelte-dayxdu"><button aria-label="Open sidebar" class="svelte-dayxdu"></button> <div class="book-name svelte-dayxdu"><h1 class="svelte-dayxdu"> </h1> <h2 class="svelte-dayxdu"> </h2></div> <!></div></nav> <section class="svelte-dayxdu"><div class="views svelte-dayxdu"><button class="svelte-dayxdu">Info</button> <button class="svelte-dayxdu">Discussion</button></div> <!> <button id="add-to-reading-list" class="svelte-dayxdu">Add to Reading List</button></section> <!> <!>',1),Tt=G("<!> <!>",1);function Kt(b,i){ut(i,!0);let n=i.data.book,e=mt("info"),V=lt(n.isbn),j;function W(k,q=3){k=k.replaceAll("--","â€”");let g=k.split(/([.!?])\s*/),c=[];for(let a=0;a<g.length;a+=2)c.push(g[a]+g[a+1]);return c.map((a,p)=>(p+1)%q===0&&p!==c.length-1?a+`

`:a).join("")}var M=Tt(),U=B(M);dt(U,{});var X=o(U,2);yt(X,{style:"overflow-y: hidden;",children:(k,q)=>{var g=Pt(),c=B(g),A=l(c),a=l(A);a.__click=()=>j.show();var p=o(a,2),w=l(p),Y=l(w,!0);d(w);var P=o(w,2),Z=l(P,!0);d(P),d(p);var tt=o(p,2);xt(tt,{style:"width: 2rem; height: 2rem;",get stroke(){return s().textBright}}),d(A),d(c);var T=o(c,2),D=l(T),L=l(D);L.__click=[St,e];var O=o(L,2);O.__click=[jt,e],d(D);var C=o(D,2);{var et=t=>{var v=At(),_=l(v),m=o(_,2),f=l(m,!0);d(m),d(v),K((h,y)=>{J(_,"alt",`${n.title} cover`),J(_,"src",n.cover),r(m,"color",h),I(f,y)},[()=>s().textDull,()=>W(n.description)]),x(t,v)},at=t=>{var v=$(),_=B(v);{var m=f=>{var h=$(),y=B(h);ft(y,()=>V,null,(R,F)=>{var S=$(),rt=B(S);bt(rt,17,()=>u(F),gt,(ot,it)=>{wt(ot,{get post(){return u(it)}})}),x(R,S)}),x(f,h)};N(_,f=>{u(e)==="discussion"&&f(m)},!0)}x(t,v)};N(C,t=>{u(e)==="info"?t(et):t(at,!1)})}var E=o(C,2);E.__click=[Lt,n],d(T);var H=o(T,2);kt(H,{selected:"search"});var st=o(H,2);ht(Bt(st,{}),t=>j=t,()=>j),K((t,v,_,m,f,h,y,R,F,S)=>{r(c,"background",t),r(a,"background-image",v),r(w,"color",_),I(Y,n.title),r(P,"color",m),I(Z,f),r(D,"background-color",t),r(L,"color",h),r(L,"border-bottom-color",y),r(O,"color",R),r(O,"border-bottom-color",F),r(E,"background",S)},[()=>s().backgroundDark,()=>{var t;return`url("${((t=z())==null?void 0:t.picture)??""}")`},()=>s().textBright,()=>s().textDim,()=>n.authors.join(", "),()=>u(e)==="info"?s().textBright:s().textDull,()=>u(e)==="info"?s().accent:"transparent",()=>u(e)==="discussion"?s().textBright:s().textDull,()=>u(e)==="discussion"?s().accent:"transparent",vt]),x(k,g)},$$slots:{default:!0}}),x(b,M),_t()}pt(["click"]);export{Kt as component,Jt as universal};
