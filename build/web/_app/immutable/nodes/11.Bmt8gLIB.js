import{m as Ve,n as Ee,o as Ge,u as $,f as xe}from"../chunks/CNXCd5Iu.js";import"../chunks/Bg9kRutz.js";import{p as He,a as Je,j as r,g as ge,f as L,s as e,t as A,a5 as he,c as s,r as t,a6 as B}from"../chunks/DpL-zfgl.js";import{i as P,b as Ke,s as o}from"../chunks/BdjlEak8.js";import{P as Qe,s as H,a as be}from"../chunks/4xhgHt_c.js";import{e as ze,i as We}from"../chunks/BzvN9xHF.js";import{a as p,t as b,c as J,e as Xe}from"../chunks/DitkTsWA.js";import{d as Ye}from"../chunks/DHveY-33.js";import{p as qe}from"../chunks/D9Rqb9Mt.js";import{B as Ze}from"../chunks/DyFv1nTa.js";import{B as ea,S as aa,A as ta}from"../chunks/C_zcqE6L.js";const sa=async({params:S})=>({book:await Ve(S.isbn)}),La=Object.freeze(Object.defineProperty({__proto__:null,load:sa},Symbol.toStringTag,{value:"Module"}));async function ra(S,z){var u;const a=$().readingList;xe({readingList:[...a,z.isbn]}),(u=$())==null||u.readingList.push(z.isbn)}async function na(S,z){const a=$().readingList.filter(u=>u!==z.isbn);xe({readingList:a}),$().readingList=a}var oa=b('<h2 class="svelte-ezdcmq"> </h2>'),la=b('<button class="rating svelte-ezdcmq"><!> <span class="count svelte-ezdcmq"> </span></button>'),ia=b('<button id="add-to-reading-list" class="remove-from-reading-list svelte-ezdcmq">Remove from Reading List</button>'),va=b('<button id="add-to-reading-list" class="svelte-ezdcmq">Add to Reading List</button>'),ca=b('<a href="/author" class="svelte-ezdcmq"> </a><!>',1),da=b('<span class="svelte-ezdcmq"><span class="svelte-ezdcmq">Characters:</span> </span>'),pa=b('<div class="book-info svelte-ezdcmq"><div class="title svelte-ezdcmq"><h1 class="svelte-ezdcmq"> </h1> <!></div> <!> <!> <p class="description svelte-ezdcmq"> </p></div> <!> <div class="product-info svelte-ezdcmq"><h2 class="svelte-ezdcmq">Product Information</h2> <span class="svelte-ezdcmq"><span class="svelte-ezdcmq">Title:</span> </span> <span class="svelte-ezdcmq"><span class="svelte-ezdcmq"> </span> <span class="svelte-ezdcmq"></span></span> <span class="svelte-ezdcmq"><span class="svelte-ezdcmq">ISBN-13:</span> </span> <span class="svelte-ezdcmq"><span class="svelte-ezdcmq">Page Count:</span> </span> <span class="svelte-ezdcmq"><span class="svelte-ezdcmq">Publish Date:</span> </span> <span class="svelte-ezdcmq"><span class="svelte-ezdcmq"> </span> </span> <!> <span class="svelte-ezdcmq"><span class="svelte-ezdcmq">Tags:</span> </span></div>',1),ua=b('<!> <nav class="svelte-ezdcmq"><div class="book-name svelte-ezdcmq"><h1 class="svelte-ezdcmq"> </h1> <h2 class="svelte-ezdcmq"> </h2></div> <div class="views svelte-ezdcmq"><button class="svelte-ezdcmq">Info</button> <button class="svelte-ezdcmq">Discussion</button></div></nav> <section class="svelte-ezdcmq"><!></section>',1);function Ba(S,z){He(z,!0);let a=z.data.book,u=he("info");function K(i){return function(){ge(u,qe(i)),Q.scrollTop=0}}let ke=Ee(a.isbn),ve=he(null),ye=B(()=>{var i;return((i=$())==null?void 0:i.readingList.includes(a.isbn))??!1});function Le(i,ce=3){i=i.replaceAll("--","â€”"),i=i.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`);let q=i.split(/([.!?])\s*/);const R=[];for(let v=0;v<q.length;v+=2){const f=v<q.length-1?q[v+1]:"";R.push(q[v]+f)}let x=R.map((v,f)=>(f+1)%ce===0&&f!==R.length-1?v+`

`:v).join("");return x=x.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`),x}let Q;Qe(S,{type:"search",get sidebar(){return r(ve)},set sidebar(i){ge(ve,qe(i))},children:(i,ce)=>{var q=ua(),R=L(q);Ze(R,{style:"position: fixed; top: 1rem; left: 1rem;"});var I=e(R,2),x=s(I),v=s(x),f=s(v,!0);t(v);var de=e(v,2),Be=s(de,!0);t(de),t(x);var pe=e(x,2),F=s(pe),Pe=B(()=>K("info"));F.__click=function(...c){var m;(m=r(Pe))==null||m.apply(this,c)};var W=e(F,2),Re=B(()=>K("discussion"));W.__click=function(...c){var m;(m=r(Re))==null||m.apply(this,c)},t(pe),t(I);var X=e(I,2),je=s(X);{var Ae=c=>{var m=pa(),w=L(m),T=s(w),k=s(T),N=s(k,!0);t(k);var Y=e(k,2);{var Z=n=>{var l=oa(),_=s(l,!0);t(l),A(()=>o(_,a.authors[0])),p(n,l)};P(Y,n=>{a.authors.length>0&&n(Z)})}t(T);var O=e(T,2);ea(O,{book:a,style:"width: 10rem"});var C=e(O,2);be(C,()=>Ge(a.isbn),null,(n,l)=>{var _=B(()=>{var{rating:D,count:G}=r(l);return{rating:D,count:G}}),g=B(()=>r(_).rating),y=B(()=>r(_).count),d=la(),h=B(()=>K("discussion"));d.__click=function(...D){var G;(G=r(h))==null||G.apply(this,D)};var V=s(d);aa(V,{get rating(){return r(g)}});var j=e(V),E=e(j),Ue=s(E);t(E),t(d),A(D=>{o(j,` ${D??""} `),o(Ue,`(${r(y)??""})`)},[()=>r(g).toFixed(1)]),p(n,d)});var M=e(C,2),ee=s(M,!0);t(M),t(w);var U=e(w,2);{var Se=n=>{var l=J(),_=L(l);{var g=d=>{var h=ia();h.__click=[na,a],p(d,h)},y=d=>{var h=va();h.__click=[ra,a],p(d,h)};P(_,d=>{r(ye)?d(g):d(y,!1)})}p(n,l)};P(U,n=>{$()&&n(Se)})}var ue=e(U,2),ae=e(s(ue),2),we=e(s(ae),1,!0);t(ae);var te=e(ae,2),se=s(te),Te=s(se);t(se);var _e=e(se,2);ze(_e,22,()=>a.authors,n=>n,(n,l,_)=>{var g=ca(),y=L(g),d=s(y,!0);t(y);var h=e(y);{var V=j=>{var E=Xe(",");p(j,E)};P(h,j=>{r(_)!==a.authors.length-1&&j(V)})}A(()=>o(d,l)),p(n,g)}),t(_e),t(te);var re=e(te,2),Ce=e(s(re),1,!0);t(re);var ne=e(re,2),De=e(s(ne),1,!0);t(ne);var oe=e(ne,2),Ie=e(s(oe),1,!0);t(oe);var le=e(oe,2),ie=s(le),Fe=s(ie);t(ie);var Ne=e(ie,1,!0);t(le);var me=e(le,2);{var Oe=n=>{var l=da(),_=e(s(l),1,!0);t(l),A(g=>o(_,g),[()=>a.characters.join(", ")]),p(n,l)};P(me,n=>{a.characters.length>0&&n(Oe)})}var fe=e(me,2),Me=e(s(fe),1,!0);t(fe),t(ue),A((n,l,_)=>{o(N,a.title),o(ee,n),o(we,a.title),o(Te,`Author${(a.authors.length===1?"":"s")??""}:`),o(Ce,a.isbn),o(De,a.pageCount),o(Ie,a.publishDate),o(Fe,`Publisher${(a.publishers.length===1?"":"s")??""}:`),o(Ne,l),o(Me,_)},[()=>Le(a.description),()=>a.publishers.join(", "),()=>a.genres.join(", ")]),p(c,m)},$e=c=>{var m=J(),w=L(m);{var T=k=>{var N=J(),Y=L(N);be(Y,()=>ke,null,(Z,O)=>{var C=J(),M=L(C);ze(M,17,()=>r(O),We,(ee,U)=>{ta(ee,{get post(){return r(U)}})}),p(Z,C)}),p(k,N)};P(w,k=>{r(u)==="discussion"&&k(T)},!0)}p(c,m)};P(je,c=>{r(u)==="info"?c(Ae):c($e,!1)})}t(X),Ke(X,c=>Q=c,()=>Q),A(c=>{o(f,a.title),o(Be,c),H(F,"color",r(u)==="info"?"var(--text)":"var(--overlay-1)"),H(F,"border-bottom-color",r(u)==="info"?"var(--lavender)":"transparent"),H(W,"color",r(u)==="discussion"?"var(--text)":"var(--overlay-1)"),H(W,"border-bottom-color",r(u)==="discussion"?"var(--lavender)":"transparent")},[()=>a.authors.join(", ")]),p(i,q)},$$slots:{default:!0}}),Je()}Ye(["click"]);export{Ba as component,La as universal};
