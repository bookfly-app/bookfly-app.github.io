import{j as qa,k as Ea,m as Ga,u as S,f as ya}from"../chunks/BLMG8hH5.js";import"../chunks/Bg9kRutz.js";import{p as Ha,a as Ja,j as r,g as ga,f as R,s as t,t as A,a5 as ma,c as e,r as s,a6 as $}from"../chunks/BSx8zodA.js";import{i as j,b as Ka,s as l}from"../chunks/3C7nCtCU.js";import{P as Qa,s as J,a as ha}from"../chunks/qLhV5uGT.js";import{e as xa,i as Wa}from"../chunks/DG1UTaEd.js";import{a as p,t as h,c as K,b as Xa}from"../chunks/DM033ULQ.js";import{d as Ya}from"../chunks/KeSscphj.js";import{p as ka}from"../chunks/CvnQNCwn.js";import{g as Za}from"../chunks/CRhC-C7N.js";import{B as at}from"../chunks/CePYsWzd.js";import{B as tt,S as st,A as et}from"../chunks/B6MGUbT6.js";const rt=async({params:T})=>({book:await qa(T.isbn)}),jt=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"}));async function nt(T,x){var b;const a=S().readingList;ya({readingList:[...a,x.isbn]}),(b=S())==null||b.readingList.push(x.isbn)}async function lt(T,x){const a=S().readingList.filter(b=>b!==x.isbn);ya({readingList:a}),S().readingList=a}var ot=h('<h2 class="svelte-lbbu88"> </h2>'),it=h('<button class="rating svelte-lbbu88"><!> <span class="count svelte-lbbu88"> </span></button>'),vt=h('<button id="add-to-reading-list" class="remove-from-reading-list svelte-lbbu88">Remove from Reading List</button>'),ut=h('<button id="add-to-reading-list" class="svelte-lbbu88">Add to Reading List</button>'),bt=h('<a href="/author" class="svelte-lbbu88"> </a><!>',1),ct=h('<span class="svelte-lbbu88"><span class="svelte-lbbu88">Characters:</span> </span>'),pt=h('<div class="book-info svelte-lbbu88"><div class="title svelte-lbbu88"><h1 class="svelte-lbbu88"> </h1> <!></div> <!> <!> <p class="description svelte-lbbu88"> </p></div> <!> <div class="product-info svelte-lbbu88"><h2 class="svelte-lbbu88">Product Information</h2> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Title:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88"> </span> <span class="svelte-lbbu88"></span></span> <span class="svelte-lbbu88"><span class="svelte-lbbu88">ISBN-13:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Page Count:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Publish Date:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88"> </span> </span> <!> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Tags:</span> </span></div>',1),_t=h('<!> <nav class="svelte-lbbu88"><div class="book-name svelte-lbbu88"><h1 class="svelte-lbbu88"> </h1> <h2 class="svelte-lbbu88"> </h2></div> <div class="views svelte-lbbu88"><button class="svelte-lbbu88">Info</button> <button class="svelte-lbbu88">Discussion</button></div></nav> <section class="svelte-lbbu88"><!></section>',1);function Bt(T,x){Ha(x,!0);let a=x.data.book,b=ma("info");function Q(i){return function(){ga(b,ka(i)),W.scrollTop=0;const N=new URLSearchParams({view:r(b)});Za(`/book/${a.isbn}?${N}`)}}let La=Ea(a.isbn),ua=ma(null),Pa=$(()=>{var i;return((i=S())==null?void 0:i.readingList.includes(a.isbn))??!1});function Ra(i,N=3){i=i.replaceAll("--","â€”"),i=i.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`);let k=i.split(/([.!?])\s*/);const B=[];for(let v=0;v<k.length;v+=2){const f=v<k.length-1?k[v+1]:"";B.push(k[v]+f)}let y=B.map((v,f)=>(f+1)%N===0&&f!==B.length-1?v+`

`:v).join("");return y=y.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`),y}let W;Qa(T,{type:"search",get sidebar(){return r(ua)},set sidebar(i){ga(ua,ka(i))},children:(i,N)=>{var k=_t(),B=R(k);at(B,{style:"position: fixed; top: 1rem; left: 1rem;"});var O=t(B,2),y=e(O),v=e(y),f=e(v,!0);s(v);var ba=t(v,2),$a=e(ba,!0);s(ba),s(y);var ca=t(y,2),U=e(ca),ja=$(()=>Q("info"));U.__click=function(...u){var d;(d=r(ja))==null||d.apply(this,u)};var X=t(U,2),Ba=$(()=>Q("discussion"));X.__click=function(...u){var d;(d=r(Ba))==null||d.apply(this,u)},s(ca),s(O);var Y=t(O,2),wa=e(Y);{var Aa=u=>{var d=pt(),C=R(d),D=e(C),L=e(D),z=e(L,!0);s(L);var Z=t(L,2);{var aa=n=>{var o=ot(),_=e(o,!0);s(o),A(()=>l(_,a.authors[0])),p(n,o)};j(Z,n=>{a.authors.length>0&&n(aa)})}s(D);var M=t(D,2);tt(M,{book:a,style:"width: 10rem"});var I=t(M,2);ha(I,()=>Ga(a.isbn),null,(n,o)=>{var _=$(()=>{var{rating:F,count:H}=r(o);return{rating:F,count:H}}),g=$(()=>r(_).rating),P=$(()=>r(_).count),c=it(),m=$(()=>Q("discussion"));c.__click=function(...F){var H;(H=r(m))==null||H.apply(this,F)};var E=e(c);st(E,{get rating(){return r(g)}});var w=t(E),G=t(w),Va=e(G);s(G),s(c),A(F=>{l(w,` ${F??""} `),l(Va,`(${r(P)??""})`)},[()=>r(g).toFixed(1)]),p(n,c)});var V=t(I,2),ta=e(V,!0);s(V),s(C);var q=t(C,2);{var Ta=n=>{var o=K(),_=R(o);{var g=c=>{var m=vt();m.__click=[lt,a],p(c,m)},P=c=>{var m=ut();m.__click=[nt,a],p(c,m)};j(_,c=>{r(Pa)?c(g):c(P,!1)})}p(n,o)};j(q,n=>{S()&&n(Ta)})}var pa=t(q,2),sa=t(e(pa),2),Ca=t(e(sa),1,!0);s(sa);var ea=t(sa,2),ra=e(ea),Da=e(ra);s(ra);var _a=t(ra,2);xa(_a,22,()=>a.authors,n=>n,(n,o,_)=>{var g=bt(),P=R(g),c=e(P,!0);s(P);var m=t(P);{var E=w=>{var G=Xa(",");p(w,G)};j(m,w=>{r(_)!==a.authors.length-1&&w(E)})}A(()=>l(c,o)),p(n,g)}),s(_a),s(ea);var na=t(ea,2),Ia=t(e(na),1,!0);s(na);var la=t(na,2),Fa=t(e(la),1,!0);s(la);var oa=t(la,2),Na=t(e(oa),1,!0);s(oa);var ia=t(oa,2),va=e(ia),Oa=e(va);s(va);var Ua=t(va,1,!0);s(ia);var da=t(ia,2);{var za=n=>{var o=ct(),_=t(e(o),1,!0);s(o),A(g=>l(_,g),[()=>a.characters.join(", ")]),p(n,o)};j(da,n=>{a.characters.length>0&&n(za)})}var fa=t(da,2),Ma=t(e(fa),1,!0);s(fa),s(pa),A((n,o,_)=>{l(z,a.title),l(ta,n),l(Ca,a.title),l(Da,`Author${(a.authors.length===1?"":"s")??""}:`),l(Ia,a.isbn),l(Fa,a.pageCount),l(Na,a.publishDate),l(Oa,`Publisher${(a.publishers.length===1?"":"s")??""}:`),l(Ua,o),l(Ma,_)},[()=>Ra(a.description),()=>a.publishers.join(", "),()=>a.genres.join(", ")]),p(u,d)},Sa=u=>{var d=K(),C=R(d);{var D=L=>{var z=K(),Z=R(z);ha(Z,()=>La,null,(aa,M)=>{var I=K(),V=R(I);xa(V,17,()=>r(M),Wa,(ta,q)=>{et(ta,{get post(){return r(q)}})}),p(aa,I)}),p(L,z)};j(C,L=>{r(b)==="discussion"&&L(D)},!0)}p(u,d)};j(wa,u=>{r(b)==="info"?u(Aa):u(Sa,!1)})}s(Y),Ka(Y,u=>W=u,()=>W),A(u=>{l(f,a.title),l($a,u),J(U,"color",r(b)==="info"?"var(--text)":"var(--overlay-1)"),J(U,"border-bottom-color",r(b)==="info"?"var(--lavender)":"transparent"),J(X,"color",r(b)==="discussion"?"var(--text)":"var(--overlay-1)"),J(X,"border-bottom-color",r(b)==="discussion"?"var(--lavender)":"transparent")},[()=>a.authors.join(", ")]),p(i,k)},$$slots:{default:!0}}),Ja()}Ya(["click"]);export{Bt as component,jt as universal};
