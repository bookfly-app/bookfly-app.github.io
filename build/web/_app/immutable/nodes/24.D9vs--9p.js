import"../chunks/Bg9kRutz.js";import{F as ye,c as u,r as n,p as Ve,ab as F,a as Ye,g as e,q as S,f as p,s as d,t as le,k as K}from"../chunks/RV0lYC__.js";import{i as b,s as ge}from"../chunks/Xy_1ng5V.js";import{P as ze,S as De,a as z,g as Ge,b as He}from"../chunks/BYc_Uy3f.js";import{e as ve,i as ce}from"../chunks/Dyzu_CEI.js";import{a as s,t as o,c as P}from"../chunks/DPalutH2.js";import{r as Je,s as ie,c as Q}from"../chunks/DuaAZeCU.js";import{d as Ke,e as Qe}from"../chunks/B8Jl9l9K.js";import{b as Xe}from"../chunks/BP-4qrMh.js";import{p as w}from"../chunks/DyOO7CRH.js";import{o as Ze}from"../chunks/9pAqFiF3.js";import{g as be}from"../chunks/AP8-7Sjy.js";import{u as we,w as $e,x as es,y as ss}from"../chunks/Dni00B-4.js";import"../chunks/69_IOA4Y.js";import{W as Pe}from"../chunks/D2d3lQnp.js";import{A as as}from"../chunks/C_KH4KvQ.js";import{U as rs}from"../chunks/hWmpWU85.js";import{B as ts}from"../chunks/CcjPZEGA.js";function X(l,_,y){var h=l.__className,r=os(_,y);ye&&l.className===r?l.__className=r:(h!==r||ye&&l.className!==r)&&(l.className=r,l.__className=r)}function os(l,_){return(l??"")+(" "+_)}var ls=o('<div class="svelte-162e39x"><!></div>');function xe(l){var _=ls(),y=u(_);Pe(y,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),n(_),s(l,_)}function vs(l,_,y){l.key==="Enter"?_():(e(y)&&clearTimeout(e(y)),S(y,w(setTimeout(_,3e3))))}var cs=(l,_)=>e(_).show(),is=o('<img alt="Your profile" class="profile-link svelte-ykecch">'),ns=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Search for a post</h1> <p class="svelte-ykecch">Enter your search term to find relevant posts.</p></div>'),hs=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">No posts found</h1> <p class="svelte-ykecch">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),ds=o("<!> <!>",1),_s=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Loading posts...</h1> <p class="svelte-ykecch">We promise Wallflower will be faster soon.</p> <!></div>'),fs=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Search for a book</h1> <p class="svelte-ykecch">Enter your search term to find relevant books.</p></div>'),ps=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">No books found</h1> <p class="svelte-ykecch">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),us=o('<div class="loading-cover svelte-ykecch"></div>'),ms=o('<a class="book svelte-ykecch"><div class="book-info svelte-ykecch"><h1 class="svelte-ykecch"> </h1> <h2 class="svelte-ykecch"> </h2></div> <!></a>'),ks=o('<div class="book svelte-ykecch"><div class="book-info svelte-ykecch"><div class="loading-title svelte-ykecch"></div> <div class="loading-authors svelte-ykecch"></div></div> <div class="loading-cover svelte-ykecch"></div></div>'),ys=o('<!> <div class="books svelte-ykecch"></div>',1),gs=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Loading books...</h1> <p class="svelte-ykecch">We promise Wallflower will be faster soon.</p> <!></div>'),bs=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Search for a user</h1> <p class="svelte-ykecch">Enter your search term to find relevant users.</p></div>'),ws=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">No users found</h1> <p class="svelte-ykecch">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),xs=o('<!> <div class="people"></div>',1),Ps=o('<div class="loading svelte-ykecch"><h1 class="svelte-ykecch">Loading accounts...</h1> <p class="svelte-ykecch">We promise Wallflower will be faster soon.</p></div>'),Ns=o('<nav class="svelte-ykecch"><div class="banner svelte-ykecch"><button aria-label="Open sidebar" class="svelte-ykecch"><!></button> <button class="svelte-ykecch"><!></button> <a class="search svelte-ykecch" href="/search"><!></a></div></nav> <section class="svelte-ykecch"><input type="text" class="svelte-ykecch"> <div class="views svelte-ykecch"><button>Posts</button> <button>Books</button> <button>Authors</button> <button>Users</button></div></section> <!>',1);function zs(l,_){Ve(_,!0);let y=F(null),h=F(w(new URLSearchParams(window.location.search).get("view")??"posts")),r=F("");async function D(){e(G)&&clearTimeout(e(G)),S(G,null),S(r,w(e(r).trim()));const E=new URLSearchParams({term:e(r),view:e(h)});be(`/search?${E}`),e(h)==="posts"?S(ne,w($e(e(r)))):e(h)==="books"?S(he,w(es(e(r)))):e(h)==="people"&&S(de,w(ss(e(r))))}Ze(()=>{e(r)&&D()});let G=F(null),ne=F(w(Promise.resolve([]))),he=F(w(Promise.resolve([]))),de=F(w(Promise.resolve([])));function H(E){return function(){const Z=new URLSearchParams({view:E});e(r)&&Z.set("term",e(r)),be(`/search?${Z}`),S(h,w(E)),D()}}ze(l,{type:"search",get sidebar(){return e(y)},set sidebar(E){S(y,w(E))},children:(E,Z)=>{var _e=Ns(),$=p(_e),fe=u($),J=u(fe);J.__click=[cs,y];var Ne=u(J);{var Se=a=>{var t=P(),V=p(t);z(V,()=>Ge(we().picture),null,(M,x)=>{var f=is();le(()=>ie(f,"src",e(x))),s(M,f)}),s(a,t)},Ee=a=>{He(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};b(Ne,a=>{we()?a(Se):a(Ee,!1)})}n(J);var ee=d(J,2),Le=u(ee);Pe(Le,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),n(ee);var pe=d(ee,2),We=u(pe);De(We,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),n(pe),n(fe),n($);var se=d($,2),j=u(se);Je(j),j.__keyup=[vs,D,G];var ue=d(j,2),ae=u(ue),Ue=K(()=>H("posts"));ae.__click=function(...a){var t;(t=e(Ue))==null||t.apply(this,a)};var re=d(ae,2),Be=K(()=>H("books"));re.__click=function(...a){var t;(t=e(Be))==null||t.apply(this,a)};var te=d(re,2),Me=K(()=>H("authors"));te.__click=function(...a){var t;(t=e(Me))==null||t.apply(this,a)};var me=d(te,2),Ae=K(()=>H("people"));me.__click=function(...a){var t;(t=e(Ae))==null||t.apply(this,a)},n(ue),n(se);var Ie=d(se,2);{var Re=a=>{var t=P(),V=p(t);z(V,()=>e(ne),M=>{var x=_s(),f=d(u(x),4);xe(f,{}),n(x),s(M,x)},(M,x)=>{var f=ds(),L=p(f);{var Y=v=>{var g=ns();s(v,g)},A=v=>{var g=P(),I=p(g);{var W=N=>{var m=hs();s(N,m)};b(I,N=>{e(x).length===0&&N(W)},!0)}s(v,g)};b(L,v=>{e(r)==""?v(Y):v(A,!1)})}var k=d(L,2);ve(k,17,()=>e(x),ce,(v,g)=>{as(v,{get post(){return e(g)}})}),s(M,f)}),s(a,t)},Te=a=>{var t=P(),V=p(t);{var M=f=>{var L=P(),Y=p(L);z(Y,()=>e(he),A=>{var k=gs(),v=d(u(k),4);xe(v,{}),n(k),s(A,k)},(A,k)=>{var v=ys(),g=p(v);{var I=m=>{var U=fs();s(m,U)},W=m=>{var U=P(),q=p(U);{var C=c=>{var i=ps();s(c,i)};b(q,c=>{e(k).length===0&&c(C)},!0)}s(m,U)};b(g,m=>{e(r)==""?m(I):m(W,!1)})}var N=d(g,2);ve(N,21,()=>e(k),ce,(m,U)=>{var q=P(),C=p(q);z(C,()=>e(U),c=>{var i=ks();s(c,i)},(c,i)=>{var R=ms(),O=u(R),T=u(O),oe=u(T,!0);n(T);var ke=d(T,2),Fe=u(ke,!0);n(ke),n(O);var je=d(O,2);{var qe=B=>{ts(B,{get book(){return e(i)},style:"width: 3.5rem; margin-left: auto;"})},Ce=B=>{var Oe=us();s(B,Oe)};b(je,B=>{e(i).cover?B(qe):B(Ce,!1)})}n(R),le(B=>{ie(R,"href",`/book/${e(i).isbn}`),ge(oe,e(i).title),ge(Fe,B)},[()=>e(i).authors.join(", ")]),s(c,R)}),s(m,q)}),n(N),s(A,v)}),s(f,L)},x=f=>{var L=P(),Y=p(L);{var A=k=>{var v=P(),g=p(v);z(g,()=>e(de),I=>{var W=Ps();s(I,W)},(I,W)=>{var N=xs(),m=p(N);{var U=c=>{var i=bs();s(c,i)},q=c=>{var i=P(),R=p(i);{var O=T=>{var oe=ws();s(T,oe)};b(R,T=>{e(W).length===0&&T(O)},!0)}s(c,i)};b(m,c=>{e(r)==""?c(U):c(q,!1)})}var C=d(m,2);ve(C,21,()=>e(W),ce,(c,i,R,O)=>{rs(c,{get user(){return e(i)}})}),n(C),s(I,N)}),s(k,v)};b(Y,k=>{e(h)==="people"&&k(A)},!0)}s(f,L)};b(V,f=>{e(h)==="books"?f(M):f(x,!1)},!0)}s(a,t)};b(Ie,a=>{e(h)==="posts"?a(Re):a(Te,!1)})}le(()=>{ie(j,"placeholder",{books:"Enter a title or ISBN",posts:"Enter some keywords",authors:"Enter an author's name",people:"Enter a username"}[e(h)]),X(ae,Q(e(h)==="posts"?"selected":""),"svelte-ykecch"),X(re,Q(e(h)==="books"?"selected":""),"svelte-ykecch"),X(te,Q(e(h)==="authors"?"selected":""),"svelte-ykecch"),X(me,Q(e(h)==="people"?"selected":""),"svelte-ykecch")}),Qe("blur",j,D),Xe(j,()=>e(r),a=>S(r,a)),s(E,_e)},$$slots:{default:!0}}),Ye()}Ke(["click","keyup"]);export{zs as component};
