import"../chunks/Bg9kRutz.js";import{p as Fe,w as r,a7 as g,a as Ne,f as de,s,t as y,y as a,a8 as G,c as o,r as l}from"../chunks/BaZyK-JQ.js";import{s as me,b as Pe,i as F}from"../chunks/DBYv9uc3.js";import{P as De,a as H,g as ue,s as N}from"../chunks/C1NDFgNq.js";import{e as ce,i as _e}from"../chunks/CN4MRzID.js";import{a as d,t as m}from"../chunks/Dd2BwSaU.js";import{r as J,b as Re}from"../chunks/D230ZY73.js";import{d as Le,r as Te}from"../chunks/BuFl6vNe.js";import{b as P}from"../chunks/2_PfXxFa.js";import{p as v}from"../chunks/COAggT6D.js";import{g as Ue}from"../chunks/BGn3fiGj.js";import{h as K,i as je,j as Me,k as qe}from"../chunks/D7OJpyJ4.js";import{E as he}from"../chunks/BjF_1kZB.js";import{B as Ae}from"../chunks/YWLcALH6.js";import{C as D}from"../chunks/CmUfoJVP.js";import{I as be}from"../chunks/DkdFsEL-.js";import{R as C}from"../chunks/IW-pY7IU.js";function Ge(R,x){r(x,!1)}async function fe(R,x,i,_,p,u,c,h,k){if(!(a(x).length>0)){if(a(i)!==(await K).username&&await je(a(i))){r(_,!0);return}await Me({displayName:a(p),bio:a(u),username:a(i),pronouns:a(c),picture:a(h),banner:a(k)}),await Ue("/profile"),location.reload()}}var He=m('<label for="set-banner" class="banner svelte-1nzohsn"><div class="overlay svelte-1nzohsn"></div> <!></label>'),Je=m('<label for="set-profile-picture" class="profile-picture svelte-1nzohsn"><div class="overlay svelte-1nzohsn"></div> <!></label>'),Ke=m('<span class="error svelte-1nzohsn"> </span>'),Oe=m('<span class="error svelte-1nzohsn"> </span>'),Qe=m('<span class="error svelte-1nzohsn">Username already taken</span>'),Ve=m('<span class="badge-line svelte-1nzohsn">Show developer badge <!></span>'),We=m('<span class="badge-line svelte-1nzohsn">Show moderator badge <!></span>'),Xe=m('<span class="badge-line svelte-1nzohsn">Show moderator badge <!></span>'),Ye=m('<!> <!> <div class="profile svelte-1nzohsn"><div><!> <!> <button class="save svelte-1nzohsn">Save</button></div> <label for="display-name" class="svelte-1nzohsn">Display Name</label> <div class="text-container svelte-1nzohsn"><input maxlength="20" enterkeyhint="done" type="text" id="display-name" class="svelte-1nzohsn"> <!></div> <!> <label for="username" class="svelte-1nzohsn">Username</label> <div class="username svelte-1nzohsn"><span class="at svelte-1nzohsn">@</span> <input maxlength="20" type="text" id="username" enterkeyhint="done" class="svelte-1nzohsn"> <!></div> <!> <!> <hr class="svelte-1nzohsn"> <label for="pronouns" class="svelte-1nzohsn">Pronouns</label> <div class="text-container svelte-1nzohsn"><input maxlength="20" enterkeyhint="done" type="text" id="pronouns" class="svelte-1nzohsn"> <!></div> <span class="radio-input svelte-1nzohsn"><label for="display-pronouns" class="svelte-1nzohsn">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-1nzohsn"><label for="display-post-pronouns" class="svelte-1nzohsn">Display pronouns on your posts</label> <!></span> <hr class="svelte-1nzohsn"> <label for="bio" class="svelte-1nzohsn">Bio</label> <div class="svelte-1nzohsn"><textarea maxlength="144" enterkeyhint="done" class="bio svelte-1nzohsn" id="bio"></textarea> <!></div> <hr class="svelte-1nzohsn"> <h2 class="svelte-1nzohsn">Badges</h2> <!> <!> <!></div>',1),Ze=m('<!> <!> <button class="save bottom svelte-1nzohsn">Save</button>',1);function fa(R,x){Fe(x,!0),K.then(b=>{r(i,v(b.displayName)),r(p,v(b.username)),r(u,v(b.bio)),r(c,v(b.pronouns)),r(h,v(b.picture)),r(_,v(b.banner))});let i=g(""),_=g(""),p=g(""),u=g(""),c=g(""),h=g(""),k=G(()=>[...a(i)?[]:["Display name can't be empty"]]),w=G(()=>[...qe(a(p)),...a(p)?[]:["Username can't be empty"]]),O,z=g(!1),Q=G(()=>a(k).length===0&&a(w).length===0&&!a(z));De(R,{type:"profile",children:(b,ea)=>{var V=Ze(),W=de(V);Ae(W,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var X=s(W,2);H(X,()=>K,null,(ge,$)=>{var Z=Ye(),ee=de(Z);H(ee,()=>ue(a(_)),null,(e,n)=>{var t=He(),f=s(o(t),2);he(f,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),l(t),y(()=>N(t,"background-image",`url('${a(n)??""}')`)),d(e,t)});var ae=s(ee,2);be(ae,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return a(_)},set imageId(e){r(_,v(e))}});var se=s(ae,2),L=o(se),te=o(L);H(te,()=>ue(a(h)),null,(e,n)=>{var t=Je(),f=s(o(t),2);he(f,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),l(t),y(()=>N(t,"background-image",`url('${a(n)??""}')`)),d(e,t)});var ne=s(te,2);be(ne,{id:"set-profile-picture",aspectRatio:1/1,circular:!0,get imageId(){return a(h)},set imageId(e){r(h,v(e))}});var re=s(ne,2);re.__click=[fe,w,p,z,i,u,c,h,_],l(L);var T=s(L,4),S=o(T);J(S);var ze=s(S,2);D(ze,{padding:"0.31rem",limit:20,get text(){return a(i)},set text(e){r(i,v(e))}}),l(T);var oe=s(T,2);ce(oe,17,()=>a(k),_e,(e,n)=>{var t=Ke(),f=o(t,!0);l(t),y(()=>me(f,a(n))),d(e,t)});var B=s(oe,4),I=s(o(B),2);J(I),I.__input=[Ge,z],Pe(I,e=>O=e,()=>O);var ye=s(I,2);D(ye,{padding:"0.31rem",limit:20,get text(){return a(p)},set text(e){r(p,v(e))}}),l(B);var le=s(B,2);ce(le,17,()=>a(w),_e,(e,n)=>{var t=Oe(),f=o(t,!0);l(t),y(()=>me(f,a(n))),d(e,t)});var ie=s(le,2);{var xe=e=>{var n=Qe();d(e,n)};F(ie,e=>{a(z)&&e(xe)})}var U=s(ie,6),j=o(U);J(j);var ke=s(j,2);D(ke,{padding:"0.31rem",limit:20,get text(){return a(c)},set text(e){r(c,v(e))}}),l(U);var M=s(U,2),we=s(o(M),2);C(we,{id:"display-pronouns",size:.7}),l(M);var q=s(M,2),Ie=s(o(q),2);C(Ie,{id:"display-post-pronouns",size:.7}),l(q);var A=s(q,6),E=o(A);Te(E);var Ce=s(E,2);D(Ce,{limit:144,get text(){return a(u)},set text(e){r(u,v(e))}}),l(A);var ve=s(A,6);{var $e=e=>{var n=Ve(),t=s(o(n));C(t,{size:.6}),l(n),d(e,n)};F(ve,e=>{a($).tags.includes("dev")&&e($e)})}var pe=s(ve,2);{var Se=e=>{var n=We(),t=s(o(n));C(t,{size:.6}),l(n),d(e,n)};F(pe,e=>{a($).tags.includes("mod")&&e(Se)})}var Be=s(pe,2);{var Ee=e=>{var n=Xe(),t=s(o(n));C(t,{size:.6}),l(n),d(e,n)};F(Be,e=>{a($).tags.includes("developer")&&e(Ee)})}l(se),y(()=>{re.disabled=!a(Q),N(S,"outline",a(k).length>0?"2px solid var(--red)":"none"),N(B,"outline",a(z)||a(w).length>0?"2px solid var(--red)":"none"),Re(E,`					${a($).bio??""}
				`)}),P(S,()=>a(i),e=>r(i,e)),P(I,()=>a(p),e=>r(p,e)),P(j,()=>a(c),e=>r(c,e)),P(E,()=>a(u),e=>r(u,e)),d(ge,Z)});var Y=s(X,2);Y.__click=[fe,w,p,z,i,u,c,h,_],y(()=>Y.disabled=!a(Q)),d(b,V)},$$slots:{default:!0}}),Ne()}Le(["click","input"]);export{fa as component};
