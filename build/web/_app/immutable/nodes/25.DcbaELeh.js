import"../chunks/Bg9kRutz.js";import{c as y,r as m,p as Ne,a5 as R,a as Be,j as e,g as w,f as d,s as c,t as fe,a6 as J}from"../chunks/DpL-zfgl.js";import{i as k,s as _e}from"../chunks/BdjlEak8.js";import{P as Me,a as K}from"../chunks/4xhgHt_c.js";import{e as re,i as te}from"../chunks/BzvN9xHF.js";import{a as s,t as r,c as b}from"../chunks/DitkTsWA.js";import{r as Ae,s as ue,c as O}from"../chunks/Bh5g2vjz.js";import{s as Q}from"../chunks/CHL61BMj.js";import{d as Re,e as Te}from"../chunks/DHveY-33.js";import{b as je}from"../chunks/r0Q9cRdY.js";import{p as h}from"../chunks/D9Rqb9Mt.js";import{o as He}from"../chunks/BKa3V-0I.js";import{g as me}from"../chunks/Q4kBbe0I.js";import{v as Ce,w as Ie,x as Ve}from"../chunks/CNXCd5Iu.js";import"../chunks/69_IOA4Y.js";import{W as qe}from"../chunks/Cl5hjvZI.js";import{A as ze,B as De}from"../chunks/C_zcqE6L.js";import{U as Fe}from"../chunks/CBpFDx7J.js";import{H as Ge}from"../chunks/DlO143qY.js";var Je=r('<div class="svelte-162e39x"><!></div>');function he(I){var P=Je(),x=y(P);qe(x,{stroke:"var(--surface-2)",style:"width: 2rem; height: 2rem;"}),m(P),s(I,P)}function Ke(I,P,x){I.key==="Enter"?P():(e(x)&&clearTimeout(e(x)),w(x,h(setTimeout(P,3e3))))}var Oe=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">Search for a post</h1> <p class="svelte-n3p2ks">Enter your search term to find relevant posts.</p></div>'),Qe=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">No posts found</h1> <p class="svelte-n3p2ks">No posts were found relating to your search term. Make sure you spelled everything right!</p></div>'),Xe=r("<!> <!>",1),Ye=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">Loading posts...</h1> <p class="svelte-n3p2ks">We promise Wallflower will be faster soon.</p> <!></div>'),Ze=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">Search for a book</h1> <p class="svelte-n3p2ks">Enter your search term to find relevant books.</p></div>'),$e=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">No books found</h1> <p class="svelte-n3p2ks">No books were found relating to your search term. Make sure you spelled everything right!</p></div>'),es=r('<div class="loading-cover svelte-n3p2ks"></div>'),ss=r('<a class="book svelte-n3p2ks"><div class="book-info svelte-n3p2ks"><h1 class="svelte-n3p2ks"> </h1> <h2 class="svelte-n3p2ks"> </h2></div> <!></a>'),as=r('<div class="book svelte-n3p2ks"><div class="book-info svelte-n3p2ks"><div class="loading-title svelte-n3p2ks"></div> <div class="loading-authors svelte-n3p2ks"></div></div> <div class="loading-cover svelte-n3p2ks"></div></div>'),rs=r('<!> <div class="books svelte-n3p2ks"></div>',1),ts=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">Loading books...</h1> <p class="svelte-n3p2ks">We promise Wallflower will be faster soon.</p> <!></div>'),os=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">Search for a user</h1> <p class="svelte-n3p2ks">Enter your search term to find relevant users.</p></div>'),vs=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">No users found</h1> <p class="svelte-n3p2ks">No users were found relating to your search term. Make sure you spelled everything right!</p></div>'),ls=r('<!> <div class="people"></div>',1),ns=r('<div class="loading svelte-n3p2ks"><h1 class="svelte-n3p2ks">Loading accounts...</h1> <p class="svelte-n3p2ks">We promise Wallflower will be faster soon.</p></div>'),is=r('<!> <section class="svelte-n3p2ks"><input type="text" enterkeyhint="search" class="svelte-n3p2ks"> <div class="views svelte-n3p2ks"><button>Posts</button> <button>Books</button> <button>Authors</button> <button>Users</button></div></section> <!>',1);function Us(I,P){Ne(P,!0);let x=R(null),i=R(h(new URLSearchParams(window.location.search).get("view")??"posts")),n=R("");async function D(){e(F)&&clearTimeout(e(F)),w(F,null),w(n,h(e(n).trim()));const S=new URLSearchParams({term:e(n),view:e(i)});me(`/search?${S}`),e(i)==="posts"?w(oe,h(Ce(e(n)))):e(i)==="books"?w(ve,h(Ie(e(n)))):e(i)==="people"&&w(le,h(Ve(e(n))))}He(()=>{e(n)&&D()});let F=R(null),oe=R(h(Promise.resolve([]))),ve=R(h(Promise.resolve([]))),le=R(h(Promise.resolve([])));function G(S){return function(){const X=new URLSearchParams({view:S});e(n)&&X.set("term",e(n)),me(`/search?${X}`),w(i,h(S)),D()}}Me(I,{type:"search",get sidebar(){return e(x)},set sidebar(S){w(x,h(S))},children:(S,X)=>{var ne=is(),ie=d(ne);Ge(ie,{title:"Search"});var Y=c(ie,2),T=y(Y);Ae(T),T.__keyup=[Ke,D,F];var pe=c(T,2),Z=y(pe),ke=J(()=>G("posts"));Z.__click=function(...t){var a;(a=e(ke))==null||a.apply(this,t)};var $=c(Z,2),ge=J(()=>G("books"));$.__click=function(...t){var a;(a=e(ge))==null||a.apply(this,t)};var ee=c($,2),be=J(()=>G("authors"));ee.__click=function(...t){var a;(a=e(be))==null||a.apply(this,t)};var de=c(ee,2),ye=J(()=>G("people"));de.__click=function(...t){var a;(a=e(ye))==null||a.apply(this,t)},m(pe),m(Y);var we=c(Y,2);{var Pe=t=>{var a=b(),se=d(a);K(se,()=>e(oe),V=>{var E=Ye(),_=c(y(E),4);he(_,{}),m(E),s(V,E)},(V,E)=>{var _=Xe(),L=d(_);{var q=o=>{var u=Oe();s(o,u)},B=o=>{var u=b(),M=d(u);{var W=g=>{var p=Qe();s(g,p)};k(M,g=>{e(E).length===0&&g(W)},!0)}s(o,u)};k(L,o=>{e(n)==""?o(q):o(B,!1)})}var f=c(L,2);re(f,17,()=>e(E),te,(o,u)=>{ze(o,{get post(){return e(u)}})}),s(V,_)}),s(t,a)},xe=t=>{var a=b(),se=d(a);{var V=_=>{var L=b(),q=d(L);K(q,()=>e(ve),B=>{var f=ts(),o=c(y(f),4);he(o,{}),m(f),s(B,f)},(B,f)=>{var o=rs(),u=d(o);{var M=p=>{var U=Ze();s(p,U)},W=p=>{var U=b(),j=d(U);{var H=v=>{var l=$e();s(v,l)};k(j,v=>{e(f).length===0&&v(H)},!0)}s(p,U)};k(u,p=>{e(n)==""?p(M):p(W,!1)})}var g=c(u,2);re(g,21,()=>e(f),te,(p,U)=>{var j=b(),H=d(j);K(H,()=>e(U),v=>{var l=as();s(v,l)},(v,l)=>{var C=ss(),z=y(C),A=y(z),ae=y(A,!0);m(A);var ce=c(A,2),Se=y(ce,!0);m(ce),m(z);var Ee=c(z,2);{var Le=N=>{De(N,{get book(){return e(l)},style:"width: 3.5rem; margin-left: auto;"})},We=N=>{var Ue=es();s(N,Ue)};k(Ee,N=>{e(l).cover?N(Le):N(We,!1)})}m(C),fe(N=>{ue(C,"href",`/book/${e(l).isbn}`),_e(ae,e(l).title),_e(Se,N)},[()=>e(l).authors.join(", ")]),s(v,C)}),s(p,j)}),m(g),s(B,o)}),s(_,L)},E=_=>{var L=b(),q=d(L);{var B=f=>{var o=b(),u=d(o);K(u,()=>e(le),M=>{var W=ns();s(M,W)},(M,W)=>{var g=ls(),p=d(g);{var U=v=>{var l=os();s(v,l)},j=v=>{var l=b(),C=d(l);{var z=A=>{var ae=vs();s(A,ae)};k(C,A=>{e(W).length===0&&A(z)},!0)}s(v,l)};k(p,v=>{e(n)==""?v(U):v(j,!1)})}var H=c(p,2);re(H,21,()=>e(W),te,(v,l)=>{Fe(v,{get user(){return e(l)}})}),m(H),s(M,g)}),s(f,o)};k(q,f=>{e(i)==="people"&&f(B)},!0)}s(_,L)};k(se,_=>{e(i)==="books"?_(V):_(E,!1)},!0)}s(t,a)};k(we,t=>{e(i)==="posts"?t(Pe):t(xe,!1)})}fe(()=>{ue(T,"placeholder",{books:"Enter a title or ISBN",posts:"Enter some keywords",authors:"Enter an author's name",people:"Enter a username"}[e(i)]),Q(Z,O(e(i)==="posts"?"selected":""),"svelte-n3p2ks"),Q($,O(e(i)==="books"?"selected":""),"svelte-n3p2ks"),Q(ee,O(e(i)==="authors"?"selected":""),"svelte-n3p2ks"),Q(de,O(e(i)==="people"?"selected":""),"svelte-n3p2ks")}),Te("blur",T,D),je(T,()=>e(n),t=>w(n,t)),s(S,ne)},$$slots:{default:!0}}),Be()}Re(["keyup","click"]);export{Us as component};
