import{n as Ea,o as Ga,q as Ha,u as T,j as La}from"../chunks/D8MsmRYf.js";import"../chunks/Bzak7iHL.js";import{p as Ja,g as Ka,a6 as h,f as $,d as t,e,j as r,ab as j,t as S,a9 as ma,a as _,ac as ha,r as s,ad as Qa,c as H}from"../chunks/DhKu0NfF.js";import{s as l}from"../chunks/DGkc4AeD.js";import{P as Wa,a as xa}from"../chunks/Dpz-iGdc.js";import{i as B,b as Xa}from"../chunks/DZzuPxtn.js";import{e as ka,i as Ya}from"../chunks/B8n4LtgD.js";import{d as Za}from"../chunks/DGKU-49f.js";import{b as ya}from"../chunks/COSmXfxt.js";import{g as at}from"../chunks/n-HP1uNx.js";import{B as tt}from"../chunks/n42bk-Nr.js";import{B as st}from"../chunks/DIYIZufq.js";import{S as et,A as rt}from"../chunks/D-95MmmW.js";const nt=async({params:C})=>({book:await Ea(C.isbn)}),wt=Object.freeze(Object.defineProperty({__proto__:null,load:nt},Symbol.toStringTag,{value:"Module"}));async function lt(C,x){var b;const a=T().readingList;La({readingList:[...a,x.isbn]}),(b=T())==null||b.readingList.push(x.isbn)}async function ot(C,x){const a=T().readingList.filter(b=>b!==x.isbn);La({readingList:a}),T().readingList=a}var it=h('<h2 class="svelte-lbbu88"> </h2>'),vt=h('<button class="rating svelte-lbbu88"><!> <span class="count svelte-lbbu88"> </span></button>'),ut=h('<button id="add-to-reading-list" class="remove-from-reading-list svelte-lbbu88">Remove from Reading List</button>'),bt=h('<button id="add-to-reading-list" class="svelte-lbbu88">Add to Reading List</button>'),ct=h('<a href="/author" class="svelte-lbbu88"> </a><!>',1),pt=h('<span class="svelte-lbbu88"><span class="svelte-lbbu88">Characters:</span> </span>'),_t=h('<div class="book-info svelte-lbbu88"><div class="title svelte-lbbu88"><h1 class="svelte-lbbu88"> </h1> <!></div> <!> <!> <p class="description svelte-lbbu88"> </p></div> <!> <div class="product-info svelte-lbbu88"><h2 class="svelte-lbbu88">Product Information</h2> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Title:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88"> </span> <span class="svelte-lbbu88"></span></span> <span class="svelte-lbbu88"><span class="svelte-lbbu88">ISBN-13:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Page Count:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Publish Date:</span> </span> <span class="svelte-lbbu88"><span class="svelte-lbbu88"> </span> </span> <!> <span class="svelte-lbbu88"><span class="svelte-lbbu88">Tags:</span> </span></div>',1),dt=h('<!> <nav class="svelte-lbbu88"><div class="book-name svelte-lbbu88"><h1 class="svelte-lbbu88"> </h1> <h2 class="svelte-lbbu88"> </h2></div> <div class="views svelte-lbbu88"><button class="svelte-lbbu88">Info</button> <button class="svelte-lbbu88">Discussion</button></div></nav> <section class="svelte-lbbu88"><!></section>',1);function At(C,x){Ja(x,!0);let a=x.data.book,b=ma("info");function J(i){return function(){ha(b,i,!0),K.scrollTop=0;const N=new URLSearchParams({view:r(b)});at(`/book/${a.isbn}?${N}`)}}let Pa=Ga(a.isbn),ia=ma(null),Ra=j(()=>{var i;return((i=T())==null?void 0:i.readingList.includes(a.isbn))??!1});function $a(i,N=3){i=i.replaceAll("--","â€”"),i=i.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`);let k=i.split(/([.!?])\s*/);const w=[];for(let v=0;v<k.length;v+=2){const f=v<k.length-1?k[v+1]:"";w.push(k[v]+f)}let y=w.map((v,f)=>(f+1)%N===0&&f!==w.length-1?v+`

`:v).join("");return y=y.replaceAll(/\.(\S)/g,(v,f)=>`. ${f}`),y}let K;Wa(C,{type:"search",get sidebar(){return r(ia)},set sidebar(i){ha(ia,i,!0)},children:(i,N)=>{var k=dt(),w=$(k);tt(w,{style:"position: fixed; top: 1rem; left: 1rem;"});var O=t(w,2),y=e(O),v=e(y),f=e(v,!0);s(v);var va=t(v,2),ja=e(va,!0);s(va),s(y);var ua=t(y,2),Q=e(ua),Ba=j(()=>J("info"));Q.__click=function(...u){var c;(c=r(Ba))==null||c.apply(this,u)};let ba;var ca=t(Q,2),wa=j(()=>J("discussion"));ca.__click=function(...u){var c;(c=r(wa))==null||c.apply(this,u)};let pa;s(ua),s(O);var W=t(O,2),Aa=e(W);{var Sa=u=>{var c=_t(),L=$(c),D=e(L),P=e(D),U=e(P,!0);s(P);var X=t(P,2);{var Y=n=>{var o=it(),d=e(o,!0);s(o),S(()=>l(d,a.authors[0])),_(n,o)};B(X,n=>{a.authors.length>0&&n(Y)})}s(D);var q=t(D,2);st(q,{get book(){return a},style:"width: 10rem"});var I=t(q,2);xa(I,()=>Ha(a.isbn),null,(n,o)=>{var d=j(()=>{var{rating:F,count:G}=r(o);return{rating:F,count:G}}),g=j(()=>r(d).rating),R=j(()=>r(d).count),p=vt(),m=j(()=>J("discussion"));p.__click=function(...F){var G;(G=r(m))==null||G.apply(this,F)};var V=e(p);et(V,{get rating(){return r(g)}});var A=t(V),E=t(A),Va=e(E);s(E),s(p),S(F=>{l(A,` ${F??""} `),l(Va,`(${r(R)??""})`)},[()=>r(g).toFixed(1)]),_(n,p)});var z=t(I,2),Z=e(z,!0);s(z),s(L);var M=t(L,2);{var Ca=n=>{var o=H(),d=$(o);{var g=p=>{var m=ut();m.__click=[ot,a],_(p,m)},R=p=>{var m=bt();m.__click=[lt,a],_(p,m)};B(d,p=>{r(Ra)?p(g):p(R,!1)})}_(n,o)};B(M,n=>{T()&&n(Ca)})}var _a=t(M,2),aa=t(e(_a),2),Da=t(e(aa),1,!0);s(aa);var ta=t(aa,2),sa=e(ta),Ia=e(sa);s(sa);var da=t(sa,2);ka(da,22,()=>a.authors,n=>n,(n,o,d)=>{var g=ct(),R=$(g),p=e(R,!0);s(R);var m=t(R);{var V=A=>{var E=Qa(",");_(A,E)};B(m,A=>{r(d)!==a.authors.length-1&&A(V)})}S(()=>l(p,o)),_(n,g)}),s(da),s(ta);var ea=t(ta,2),Fa=t(e(ea),1,!0);s(ea);var ra=t(ea,2),Na=t(e(ra),1,!0);s(ra);var na=t(ra,2),Oa=t(e(na),1,!0);s(na);var la=t(na,2),oa=e(la),Ua=e(oa);s(oa);var qa=t(oa,1,!0);s(la);var fa=t(la,2);{var za=n=>{var o=pt(),d=t(e(o),1,!0);s(o),S(g=>l(d,g),[()=>a.characters.join(", ")]),_(n,o)};B(fa,n=>{a.characters.length>0&&n(za)})}var ga=t(fa,2),Ma=t(e(ga),1,!0);s(ga),s(_a),S((n,o,d)=>{l(U,a.title),l(Z,n),l(Da,a.title),l(Ia,`Author${a.authors.length===1?"":"s"}:`),l(Fa,a.isbn),l(Na,a.pageCount),l(Oa,a.publishDate),l(Ua,`Publisher${a.publishers.length===1?"":"s"}:`),l(qa,o),l(Ma,d)},[()=>$a(a.description),()=>a.publishers.join(", "),()=>a.genres.join(", ")]),_(u,c)},Ta=u=>{var c=H(),L=$(c);{var D=P=>{var U=H(),X=$(U);xa(X,()=>Pa,null,(Y,q)=>{var I=H(),z=$(I);ka(z,17,()=>r(q),Ya,(Z,M)=>{rt(Z,{get post(){return r(M)}})}),_(Y,I)}),_(P,U)};B(L,P=>{r(b)==="discussion"&&P(D)},!0)}_(u,c)};B(Aa,u=>{r(b)==="info"?u(Sa):u(Ta,!1)})}s(W),Xa(W,u=>K=u,()=>K),S((u,c,L)=>{l(f,a.title),l(ja,u),ba=ya(Q,"",ba,c),pa=ya(ca,"",pa,L)},[()=>a.authors.join(", "),()=>({color:r(b)==="info"?"var(--text)":"var(--overlay-1)","border-bottom-color":r(b)==="info"?"var(--lavender)":"transparent"}),()=>({color:r(b)==="discussion"?"var(--text)":"var(--overlay-1)","border-bottom-color":r(b)==="discussion"?"var(--lavender)":"transparent"})]),_(i,k)},$$slots:{default:!0}}),Ka()}Za(["click"]);export{At as component,wt as universal};
