import"../chunks/Bzak7iHL.js";import{p as Pe,a9 as _,aa as y,a5 as Se,j as t,ac as u,g as xe,a6 as re,f as n,e as d,d as v,ab as j,t as te,a as i,r as c,c as m}from"../chunks/B-4qJ0jo.js";import{d as Re}from"../chunks/s5iYg1w1.js";import{P as Ie,S as Le,a as ae,g as Ue,b as Ae}from"../chunks/DysX6KL5.js";import{i as R}from"../chunks/wXu3LSAe.js";import{e as B,i as C}from"../chunks/BYSh6dwO.js";import{c as P,d as S,s as Fe}from"../chunks/C8LXp0oK.js";import{g as Ve}from"../chunks/BYxnAq2c.js";import{u as p,e as D,f as We}from"../chunks/CSLRLUv4.js";import{W as Oe}from"../chunks/Df9Lh074.js";import{A as E}from"../chunks/DGWPqjQL.js";var Ye=(G,I)=>t(I).show(),qe=re('<img alt="Your profile" class="profile-link svelte-1ldrjek"/>'),ze=re('<nav class="svelte-1ldrjek"><div class="banner svelte-1ldrjek"><button aria-label="Open sidebar" class="svelte-1ldrjek"><!></button> <button class="svelte-1ldrjek"><!></button> <a class="search svelte-1ldrjek" href="/search"><!></a></div></nav> <section class="svelte-1ldrjek"><div class="views svelte-1ldrjek"><button>Viewed</button> <button>Liked</button> <button>Replies</button> <button>Saved</button> <button>Shared</button></div></section> <!>',1);function Xe(G,I){Pe(I,!0);let L=_(null),s=_(y(new URLSearchParams(window.location.search).get("view")??"likes")),H=_(y([])),J=_(y([])),se=_(y([])),K=_(y(Promise.resolve([])));Se(()=>{p()&&M()});async function M(){t(s)==="likes"&&u(J,(await Promise.all(p().likes.map(e=>D(e)))).map(e=>e).filter(e=>e).toSorted((e,o)=>o.timestamp-e.timestamp),!0),t(s)==="viewed"&&u(H,(await Promise.all(p().views.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,o)=>o.timestamp-e.timestamp),!0),t(s)==="replies"&&u(K,We(p()),!0),t(s)==="shared"&&u(se,(await Promise.all(p().shares.map(e=>D(e)))).filter(e=>e).map(e=>e).toSorted((e,o)=>o.timestamp-e.timestamp),!0)}function f(e){return async function(){const o=new URLSearchParams({view:e});Ve(`/interactions?${o}`),u(s,e,!0),await M()}}Ie(G,{type:"profile",get sidebar(){return t(L)},set sidebar(e){u(L,e,!0)},children:(e,o)=>{var Q=ze(),U=n(Q),T=d(U),x=d(T);x.__click=[Ye,L];var le=d(x);{var ie=a=>{var r=m(),h=n(r);ae(h,()=>Ue(p().picture),null,(k,b)=>{var l=qe();te(()=>Fe(l,"src",t(b))),i(k,l)}),i(a,r)},oe=a=>{Ae(a,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};R(le,a=>{p()?a(ie):a(oe,!1)})}c(x);var A=v(x,2),ne=d(A);Oe(ne,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),c(A);var X=v(A,2),ve=d(X);Le(ve,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),c(X),c(T),c(U);var F=v(U,2),Z=d(F),V=d(Z),de=j(()=>f("viewed"));V.__click=function(...a){var r;(r=t(de))==null||r.apply(this,a)};var W=v(V,2),ce=j(()=>f("likes"));W.__click=function(...a){var r;(r=t(ce))==null||r.apply(this,a)};var O=v(W,2),me=j(()=>f("replies"));O.__click=function(...a){var r;(r=t(me))==null||r.apply(this,a)};var Y=v(O,2),pe=j(()=>f("saved"));Y.__click=function(...a){var r;(r=t(pe))==null||r.apply(this,a)};var N=v(Y,2),_e=j(()=>f("shared"));N.__click=function(...a){var r;(r=t(_e))==null||r.apply(this,a)},c(Z),c(F);var ue=v(F,2);{var fe=a=>{var r=m(),h=n(r);B(h,17,()=>t(H),C,(k,b)=>{E(k,{get post(){return t(b)}})}),i(a,r)},he=a=>{var r=m(),h=n(r);{var k=l=>{var g=m(),q=n(g);B(q,17,()=>t(J),C,(z,w)=>{E(z,{get post(){return t(w)}})}),i(l,g)},b=l=>{var g=m(),q=n(g);{var z=w=>{var $=m(),ke=n($);ae(ke,()=>t(K),null,(be,ge)=>{var ee=m(),we=n(ee);B(we,17,()=>t(ge),C,(ye,je)=>{E(ye,{get post(){return t(je)}})}),i(be,ee)}),i(w,$)};R(q,w=>{t(s)==="replies"&&w(z)},!0)}i(l,g)};R(h,l=>{t(s)==="likes"?l(k):l(b,!1)},!0)}i(a,r)};R(ue,a=>{t(s)==="viewed"?a(fe):a(he,!1)})}te(()=>{P(V,1,S(t(s)==="viewed"?"selected":""),"svelte-1ldrjek"),P(W,1,S(t(s)==="likes"?"selected":""),"svelte-1ldrjek"),P(O,1,S(t(s)==="replies"?"selected":""),"svelte-1ldrjek"),P(Y,1,S(t(s)==="saved"?"selected":""),"svelte-1ldrjek"),P(N,1,S(t(s)==="shared"?"selected":""),"svelte-1ldrjek")}),i(e,Q)},$$slots:{default:!0}}),xe()}Re(["click"]);export{Xe as component};
