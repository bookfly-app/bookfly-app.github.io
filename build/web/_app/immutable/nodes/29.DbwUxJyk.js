import"../chunks/Bzak7iHL.js";import{p as Ae,a9 as f,aa as g,a5 as Fe,j as e,ac as u,g as Ve,a6 as ue,f as i,e as m,d,ab as L,t as _e,a as l,r as p,c as o}from"../chunks/DhKu0NfF.js";import{d as We}from"../chunks/DGKU-49f.js";import{P as Oe,S as Ye,a as fe,g as qe,b as ze}from"../chunks/gV0rRayJ.js";import{i as k}from"../chunks/DZzuPxtn.js";import{e as U,i as A}from"../chunks/B8n4LtgD.js";import{c as F,d as V,s as Be}from"../chunks/COSmXfxt.js";import{g as Ce}from"../chunks/T3L1wa_c.js";import{u as c,e as Y,f as De}from"../chunks/D8MsmRYf.js";import{W as Ee}from"../chunks/BA256Ejd.js";import{A as W}from"../chunks/Be_B0kGP.js";var Ge=(N,q)=>e(q).show(),He=ue('<img alt="Your profile" class="profile-link svelte-1ldrjek"/>'),Je=ue('<nav class="svelte-1ldrjek"><div class="banner svelte-1ldrjek"><button aria-label="Open sidebar" class="svelte-1ldrjek"><!></button> <button class="svelte-1ldrjek"><!></button> <a class="search svelte-1ldrjek" href="/search"><!></a></div></nav> <section class="svelte-1ldrjek"><div class="views svelte-1ldrjek"><button>Viewed</button> <button>Liked</button> <button>Replies</button> <button>Saved</button> <button>Shared</button></div></section> <!>',1);function ra(N,q){Ae(q,!0);let z=f(null),s=f(g(new URLSearchParams(window.location.search).get("view")??"likes")),$=f(g([])),ee=f(g([])),ae=f(g([])),te=f(g([])),re=f(g(Promise.resolve([])));Fe(()=>{c()&&se()});async function se(){e(s)==="likes"&&u(ee,(await Promise.all(c().likes.map(a=>Y(a)))).map(a=>a).filter(a=>a).toReversed(),!0),e(s)==="viewed"&&u($,(await Promise.all(c().views.map(a=>Y(a)))).filter(a=>a).map(a=>a).toReversed(),!0),e(s)==="replies"&&u(re,De(c()),!0),e(s)==="shared"&&u(ae,(await Promise.all(c().shares.map(a=>Y(a)))).filter(a=>a).map(a=>a).toReversed(),!0),e(s)==="saved"&&u(te,(await Promise.all(c().saved.map(a=>Y(a)))).filter(a=>a).map(a=>a).toReversed(),!0)}function b(a){return async function(){const le=new URLSearchParams({view:a});Ce(`/interactions?${le}`),u(s,a,!0),await se()}}Oe(N,{type:"profile",get sidebar(){return e(z)},set sidebar(a){u(z,a,!0)},children:(a,le)=>{var ie=Je(),B=i(ie),oe=m(B),O=m(oe);O.__click=[Ge,z];var me=m(O);{var pe=t=>{var r=o(),w=i(r);fe(w,()=>qe(c().picture),null,(y,j)=>{var v=He();_e(()=>Be(v,"src",e(j))),l(y,v)}),l(t,r)},he=t=>{ze(t,{stroke:"var(--overlay-1)",style:"width: 2.5rem;"})};k(me,t=>{c()?t(pe):t(he,!1)})}p(O);var C=d(O,2),ge=m(C);Ee(ge,{style:"width: 2rem; height: 2rem;",stroke:"var(--overlay-1)"}),p(C);var ve=d(C,2),ke=m(ve);Ye(ke,{style:"width: 2rem; height: 2rem;",stroke:"var(--subtext-1)"}),p(ve),p(oe),p(B);var D=d(B,2),ne=m(D),E=m(ne),be=L(()=>b("viewed"));E.__click=function(...t){var r;(r=e(be))==null||r.apply(this,t)};var G=d(E,2),we=L(()=>b("likes"));G.__click=function(...t){var r;(r=e(we))==null||r.apply(this,t)};var H=d(G,2),ye=L(()=>b("replies"));H.__click=function(...t){var r;(r=e(ye))==null||r.apply(this,t)};var J=d(H,2),je=L(()=>b("saved"));J.__click=function(...t){var r;(r=e(je))==null||r.apply(this,t)};var de=d(J,2),Pe=L(()=>b("shared"));de.__click=function(...t){var r;(r=e(Pe))==null||r.apply(this,t)},p(ne),p(D);var Re=d(D,2);{var Se=t=>{var r=o(),w=i(r);U(w,17,()=>e($),A,(y,j)=>{W(y,{get post(){return e(j)}})}),l(t,r)},xe=t=>{var r=o(),w=i(r);{var y=v=>{var P=o(),K=i(P);U(K,17,()=>e(ee),A,(M,Q)=>{W(M,{get post(){return e(Q)}})}),l(v,P)},j=v=>{var P=o(),K=i(P);{var M=h=>{var R=o(),T=i(R);fe(T,()=>e(re),null,(X,Z)=>{var n=o(),_=i(n);U(_,17,()=>e(Z),A,(S,x)=>{W(S,{get post(){return e(x)}})}),l(X,n)}),l(h,R)},Q=h=>{var R=o(),T=i(R);{var X=n=>{var _=o(),S=i(_);U(S,17,()=>e(te),A,(x,I)=>{W(x,{get post(){return e(I)}})}),l(n,_)},Z=n=>{var _=o(),S=i(_);{var x=I=>{var ce=o(),Ie=i(ce);U(Ie,17,()=>e(ae),A,(Le,Ue)=>{W(Le,{get post(){return e(Ue)}})}),l(I,ce)};k(S,I=>{e(s)==="shared"&&I(x)},!0)}l(n,_)};k(T,n=>{e(s)==="saved"?n(X):n(Z,!1)},!0)}l(h,R)};k(K,h=>{e(s)==="replies"?h(M):h(Q,!1)},!0)}l(v,P)};k(w,v=>{e(s)==="likes"?v(y):v(j,!1)},!0)}l(t,r)};k(Re,t=>{e(s)==="viewed"?t(Se):t(xe,!1)})}_e(()=>{F(E,1,V(e(s)==="viewed"?"selected":""),"svelte-1ldrjek"),F(G,1,V(e(s)==="likes"?"selected":""),"svelte-1ldrjek"),F(H,1,V(e(s)==="replies"?"selected":""),"svelte-1ldrjek"),F(J,1,V(e(s)==="saved"?"selected":""),"svelte-1ldrjek"),F(de,1,V(e(s)==="shared"?"selected":""),"svelte-1ldrjek")}),l(a,ie)},$$slots:{default:!0}}),Ve()}We(["click"]);export{ra as component};
