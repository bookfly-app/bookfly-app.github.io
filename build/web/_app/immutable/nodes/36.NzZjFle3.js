import"../chunks/Bzak7iHL.js";import{p as We,ac as n,a9 as k,g as qe,a6 as c,f as be,d as r,ab as K,t as P,a as m,j as a,e as o,r as l,av as Ge}from"../chunks/B-4qJ0jo.js";import{s as we}from"../chunks/JskAO5LV.js";import{P as He,a as Q,g as he,W as Je}from"../chunks/DysX6KL5.js";import{i as N}from"../chunks/wXu3LSAe.js";import{e as fe,i as ye}from"../chunks/BYSh6dwO.js";import{b as O,r as V,e as Ke}from"../chunks/C8LXp0oK.js";import{d as Qe}from"../chunks/s5iYg1w1.js";import{b as R}from"../chunks/GqlYdfv6.js";import{g as Ve}from"../chunks/BYxnAq2c.js";import{h as X,i as Xe,j as I,k as Ye}from"../chunks/CSLRLUv4.js";import{A as Ze}from"../chunks/DuBZ8OA1.js";import{D as Ue}from"../chunks/bzL-x9Qo.js";import{E as xe,S as ea}from"../chunks/DA7M7ncv.js";import{B as aa}from"../chunks/DmJPU6oE.js";import{C as L}from"../chunks/D3qKs6AB.js";import{I as ke}from"../chunks/Cri92d62.js";import{R as C}from"../chunks/DpN9WtyM.js";function ta(M,D){n(D,!1)}async function Ie(M,D,v,h,p,b,w,f,S){if(!(a(D).length>0)){if(a(v)!==(await X).username&&await Xe(a(v))){n(h,!0);return}await I({displayName:a(p),bio:a(b),username:a(v),pronouns:a(w),picture:a(f),banner:a(S)}),await Ve("/profile"),location.reload()}}var ra=c('<label for="set-banner" class="banner svelte-rwgd5e"><div class="overlay svelte-rwgd5e"></div> <!></label>'),sa=c('<label for="set-profile-picture" class="profile-picture svelte-rwgd5e"><div class="overlay svelte-rwgd5e"></div> <!></label>'),oa=c('<span class="error svelte-rwgd5e"> </span>'),la=c('<span class="error svelte-rwgd5e"> </span>'),na=c('<span class="error svelte-rwgd5e">Username already taken</span>'),ia=c('<span class="badge-line svelte-rwgd5e"><div class="developer badge svelte-rwgd5e"><!></div> Show developer badge <!></span>'),da=c('<span class="badge-line svelte-rwgd5e"><div class="moderator badge svelte-rwgd5e"><!></div> Show moderator badge <!></span>'),va=c('<span class="badge-line svelte-rwgd5e"><div class="author badge svelte-rwgd5e"><!></div> Show author badge <!></span>'),pa=c('<span class="badge-line svelte-rwgd5e"><div class="newbie badge svelte-rwgd5e"><!></div> Show newbie badge <!></span>'),ua=c('<!> <!> <div class="profile svelte-rwgd5e"><div><!> <!> <button class="save svelte-rwgd5e">Save</button></div> <label for="display-name" class="svelte-rwgd5e">Display Name</label> <div class="text-container svelte-rwgd5e"><input maxlength="20" enterkeyhint="done" type="text" id="display-name" class="svelte-rwgd5e"/> <!></div> <!> <label for="username" class="svelte-rwgd5e">Username</label> <div class="username svelte-rwgd5e"><span class="at svelte-rwgd5e">@</span> <input maxlength="20" type="text" id="username" enterkeyhint="done" class="svelte-rwgd5e"/> <!></div> <!> <!> <hr class="svelte-rwgd5e"/> <label for="pronouns" class="svelte-rwgd5e">Pronouns</label> <div class="text-container svelte-rwgd5e"><input maxlength="20" enterkeyhint="done" type="text" id="pronouns" class="svelte-rwgd5e"/> <!></div> <span class="radio-input svelte-rwgd5e"><label for="display-pronouns" class="svelte-rwgd5e">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-rwgd5e"><label for="display-post-pronouns" class="svelte-rwgd5e">Display pronouns on your posts</label> <!></span> <hr class="svelte-rwgd5e"/> <label for="bio" class="svelte-rwgd5e">Bio</label> <div class="svelte-rwgd5e"><textarea maxlength="144" enterkeyhint="done" class="bio svelte-rwgd5e" id="bio"></textarea> <!></div> <hr class="svelte-rwgd5e"/> <span class="badge-title svelte-rwgd5e">Badges</span> <!> <!> <!> <!></div>',1),ga=c('<!> <!> <button class="save bottom svelte-rwgd5e">Save</button>',1);function Ea(M,D){We(D,!0),X.then(y=>{n(v,y.displayName,!0),n(p,y.username,!0),n(b,y.bio,!0),n(w,y.pronouns,!0),n(f,y.picture,!0),n(h,y.banner,!0)});let v=k(""),h=k(""),p=k(""),b=k(""),w=k(""),f=k(""),S=K(()=>[...a(v)?[]:["Display name can't be empty"]]),z=K(()=>[...Ye(a(p)),...a(p)?[]:["Username can't be empty"]]),B=k(!1),Y=K(()=>a(S).length===0&&a(z).length===0&&!a(B));He(M,{type:"profile",children:(y,_a)=>{var Z=ga(),U=be(Z);aa(U,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var ee=r(U,2);Q(ee,()=>X,null,(Be,u)=>{var te=ua(),re=be(te);Q(re,()=>he(a(h)),null,(e,s)=>{var t=ra();let i;var g=r(o(t),2);xe(g,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),l(t),P(_=>i=O(t,"",i,_),[()=>({"background-image":`url('${a(s)??""}')`})]),m(e,t)});var se=r(re,2);ke(se,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return a(h)},set imageId(e){n(h,e,!0)}});var oe=r(se,2),j=o(oe),le=o(j);Q(le,()=>he(a(f)),null,(e,s)=>{var t=sa();let i;var g=r(o(t),2);xe(g,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),l(t),P(_=>i=O(t,"",i,_),[()=>({"background-image":`url('${a(s)??""}')`})]),m(e,t)});var ne=r(le,2);ke(ne,{id:"set-profile-picture",aspectRatio:1/1,circular:!0,get imageId(){return a(f)},set imageId(e){n(f,e,!0)}});var ie=r(ne,2);ie.__click=[Ie,z,p,B,v,b,w,f,h],l(j);var T=r(j,4),$=o(T);V($);let de;var Pe=r($,2);L(Pe,{padding:"0.31rem",limit:20,get text(){return a(v)},set text(e){n(v,e,!0)}}),l(T);var ve=r(T,2);fe(ve,17,()=>a(S),ye,(e,s)=>{var t=oa(),i=o(t,!0);l(t),P(()=>we(i,a(s))),m(e,t)});var E=r(ve,4);let pe;var F=r(o(E),2);V(F),F.__input=[ta,B];var Ce=r(F,2);L(Ce,{padding:"0.31rem",limit:20,get text(){return a(p)},set text(e){n(p,e,!0)}}),l(E);var ue=r(E,2);fe(ue,17,()=>a(z),ye,(e,s)=>{var t=la(),i=o(t,!0);l(t),P(()=>we(i,a(s))),m(e,t)});var ge=r(ue,2);{var De=e=>{var s=na();m(e,s)};N(ge,e=>{a(B)&&e(De)})}var W=r(ge,6),q=o(W);V(q);var Se=r(q,2);L(Se,{padding:"0.31rem",limit:20,get text(){return a(w)},set text(e){n(w,e,!0)}}),l(W);var G=r(W,2),ze=r(o(G),2),Ne=()=>a(u).showPronounsOnProfile,$e=e=>I({showPronounsOnProfile:e});C(ze,{id:"display-pronouns",size:.6,get value(){return Ne()},set value(e){$e(e)}}),l(G);var H=r(G,2),Ee=r(o(H),2),Fe=()=>a(u).showPronounsOnPosts,Ae=e=>I({showPronounsOnPosts:e});C(Ee,{id:"display-post-pronouns",size:.6,get value(){return Fe()},set value(e){Ae(e)}}),l(H);var J=r(H,6),A=o(J);Ge(A);var Oe=r(A,2);L(Oe,{limit:144,get text(){return a(b)},set text(e){n(b,e,!0)}}),l(J);var _e=r(J,6);{var Re=e=>{var s=ia(),t=o(s),i=o(t);Ue(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),l(t);var g=r(t,2),_=()=>a(u).showDeveloperBadge,x=d=>I({showDeveloperBadge:d});C(g,{size:.6,get value(){return _()},set value(d){x(d)}}),l(s),m(e,s)};N(_e,e=>{a(u).tags.includes("dev")&&e(Re)})}var me=r(_e,2);{var Le=e=>{var s=da(),t=o(s),i=o(t);Je(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),l(t);var g=r(t,2),_=()=>a(u).showModeratorBadge,x=d=>I({showModeratorBadge:d});C(g,{size:.6,get value(){return _()},set value(d){x(d)}}),l(s),m(e,s)};N(me,e=>{a(u).tags.includes("mod")&&e(Le)})}var ce=r(me,2);{var Me=e=>{var s=va(),t=o(s),i=o(t);Ze(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),l(t);var g=r(t,2),_=()=>a(u).showAuthorBadge,x=d=>I({showAuthorBadge:d});C(g,{size:.6,get value(){return _()},set value(d){x(d)}}),l(s),m(e,s)};N(ce,e=>{a(u).tags.includes("author")&&e(Me)})}var je=r(ce,2);{var Te=e=>{var s=pa(),t=o(s),i=o(t);ea(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),l(t);var g=r(t,2),_=()=>a(u).showNewbieBadge,x=d=>I({showNewbieBadge:d});C(g,{size:.6,get value(){return _()},set value(d){x(d)}}),l(s),m(e,s)};N(je,e=>{Date.now()-a(u).birthmoment<1e3*60*60*24*7&&e(Te)})}l(oe),P((e,s)=>{ie.disabled=!a(Y),de=O($,"",de,e),pe=O(E,"",pe,s),Ke(A,`					${a(u).bio??""}
				`)},[()=>({outline:a(S).length>0?"2px solid var(--red)":"none"}),()=>({outline:a(B)||a(z).length>0?"2px solid var(--red)":"none"})]),R($,()=>a(v),e=>n(v,e)),R(F,()=>a(p),e=>n(p,e)),R(q,()=>a(w),e=>n(w,e)),R(A,()=>a(b),e=>n(b,e)),m(Be,te)});var ae=r(ee,2);ae.__click=[Ie,z,p,B,v,b,w,f,h],P(()=>ae.disabled=!a(Y)),m(y,Z)},$$slots:{default:!0}}),qe()}Qe(["click","input"]);export{Ea as component};
