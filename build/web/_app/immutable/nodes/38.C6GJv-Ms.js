import"../chunks/Bzak7iHL.js";import{p as Ke,ac as l,a9 as h,g as qe,a6 as m,f as we,d as r,t as k,a as _,j as a,ab as J,e as o,r as n,av as Ge}from"../chunks/DhKu0NfF.js";import{s as he}from"../chunks/DGkc4AeD.js";import{P as He,a as Q,g as fe,W as Je}from"../chunks/_KLLTIsc.js";import{i as D}from"../chunks/DZzuPxtn.js";import{e as ye,i as xe}from"../chunks/B8n4LtgD.js";import{b as F,r as V,e as Qe}from"../chunks/COSmXfxt.js";import{d as Ve}from"../chunks/DGKU-49f.js";import{b as A}from"../chunks/CmLPpUp4.js";import{g as Xe}from"../chunks/BIMnCzO_.js";import{h as X,i as Ye,j as f,k as Ze}from"../chunks/D8MsmRYf.js";import{A as Ue}from"../chunks/92H2WG_n.js";import{D as ea}from"../chunks/CN89uXzx.js";import{E as ke,S as aa}from"../chunks/B6APEqss.js";import{B as ta}from"../chunks/Bp0OMqlJ.js";import{C as O}from"../chunks/CL0HSnGG.js";import{I as Ie}from"../chunks/DhfOgU4L.js";import{R as I}from"../chunks/DkAW1lKB.js";function ra(Y,R){l(R,!1)}var sa=m('<label for="set-banner" class="banner svelte-rwgd5e"><div class="overlay svelte-rwgd5e"></div> <!></label>'),oa=m('<label for="set-profile-picture" class="profile-picture svelte-rwgd5e"><div class="overlay svelte-rwgd5e"></div> <!></label>'),na=m('<span class="error svelte-rwgd5e"> </span>'),la=m('<span class="error svelte-rwgd5e"> </span>'),ia=m('<span class="error svelte-rwgd5e">Username already taken</span>'),da=m('<span class="badge-line svelte-rwgd5e"><div class="developer badge svelte-rwgd5e"><!></div> Show developer badge <!></span>'),va=m('<span class="badge-line svelte-rwgd5e"><div class="moderator badge svelte-rwgd5e"><!></div> Show moderator badge <!></span>'),pa=m('<span class="badge-line svelte-rwgd5e"><div class="author badge svelte-rwgd5e"><!></div> Show author badge <!></span>'),ua=m('<span class="badge-line svelte-rwgd5e"><div class="newbie badge svelte-rwgd5e"><!></div> Show newbie badge <!></span>'),ga=m('<!> <!> <div class="profile svelte-rwgd5e"><div><!> <!> <button class="save svelte-rwgd5e">Save</button></div> <label for="display-name" class="svelte-rwgd5e">Display Name</label> <div class="text-container svelte-rwgd5e"><input maxlength="20" enterkeyhint="done" type="text" id="display-name" class="svelte-rwgd5e"/> <!></div> <!> <label for="username" class="svelte-rwgd5e">Username</label> <div class="username svelte-rwgd5e"><span class="at svelte-rwgd5e">@</span> <input maxlength="20" type="text" id="username" enterkeyhint="done" class="svelte-rwgd5e"/> <!></div> <!> <!> <hr class="svelte-rwgd5e"/> <label for="pronouns" class="svelte-rwgd5e">Pronouns</label> <div class="text-container svelte-rwgd5e"><input maxlength="20" enterkeyhint="done" type="text" id="pronouns" class="svelte-rwgd5e"/> <!></div> <span class="radio-input svelte-rwgd5e"><label for="display-pronouns" class="svelte-rwgd5e">Display pronouns on your profile</label> <!></span> <span class="radio-input svelte-rwgd5e"><label for="display-post-pronouns" class="svelte-rwgd5e">Display pronouns on your posts</label> <!></span> <hr class="svelte-rwgd5e"/> <label for="bio" class="svelte-rwgd5e">Bio</label> <div class="svelte-rwgd5e"><textarea maxlength="144" enterkeyhint="done" class="bio svelte-rwgd5e" id="bio"></textarea> <!></div> <hr class="svelte-rwgd5e"/> <span class="badge-title svelte-rwgd5e">Badges</span> <!> <!> <!> <!></div>',1),_a=m('<!> <!> <button class="save bottom svelte-rwgd5e">Save</button>',1);function Fa(Y,R){Ke(R,!0),X.then(v=>{l(b,v.displayName,!0),l(c,v.username,!0),l(y,v.bio,!0),l(x,v.pronouns,!0),l(P,v.picture,!0),l(B,v.banner,!0)});let b=h(""),B=h(""),c=h(""),y=h(""),x=h(""),P=h(""),L=J(()=>[...a(b)?[]:["Display name can't be empty"]]),S=J(()=>[...Ze(a(c)),...a(c)?[]:["Username can't be empty"]]),C=h(!1),Z=J(()=>a(L).length===0&&a(S).length===0&&!a(C));async function M(){if(!(a(S).length>0)){if(a(c)!==(await X).username&&await Ye(a(c))){l(C,!0);return}await f({displayName:a(b),bio:a(y),username:a(c),pronouns:a(x),picture:a(P),banner:a(B)}),await Xe("/profile"),location.reload()}}function Be(v){v.key==="s"&&v.ctrlKey&&(v.preventDefault(),M())}He(Y,{type:"profile",onkeydown:Be,children:(v,ma)=>{var U=_a(),ee=we(U);ta(ee,{style:"position: absolute; top: 0.5rem; left: 0.5rem;"});var ae=r(ee,2);Q(ae,()=>X,null,(Pe,p)=>{var re=ga(),se=we(re);Q(se,()=>fe(a(B)),null,(e,s)=>{var t=sa();let i;var u=r(o(t),2);ke(u,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 3rem; height: 3rem; z-index: 4;"}),n(t),k(g=>i=F(t,"",i,g),[()=>({"background-image":`url('${a(s)??""}')`})]),_(e,t)});var oe=r(se,2);Ie(oe,{circular:!0,id:"set-banner",aspectRatio:3/1,get imageId(){return a(B)},set imageId(e){l(B,e,!0)}});var ne=r(oe,2),j=o(ne),le=o(j);Q(le,()=>fe(a(P)),null,(e,s)=>{var t=oa();let i;var u=r(o(t),2);ke(u,{stroke:"#CCCCFF",style:"position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 2rem; height: 2rem; z-index: 4;"}),n(t),k(g=>i=F(t,"",i,g),[()=>({"background-image":`url('${a(s)??""}')`})]),_(e,t)});var ie=r(le,2);Ie(ie,{id:"set-profile-picture",aspectRatio:1/1,circular:!0,get imageId(){return a(P)},set imageId(e){l(P,e,!0)}});var de=r(ie,2);de.__click=M,n(j);var T=r(j,4),z=o(T);V(z);let ve;var Ce=r(z,2);O(Ce,{padding:"0.31rem",limit:20,get text(){return a(b)},set text(e){l(b,e,!0)}}),n(T);var pe=r(T,2);ye(pe,17,()=>a(L),xe,(e,s)=>{var t=na(),i=o(t,!0);n(t),k(()=>he(i,a(s))),_(e,t)});var N=r(pe,4);let ue;var $=r(o(N),2);V($),$.__input=[ra,C];var De=r($,2);O(De,{padding:"0.31rem",limit:20,get text(){return a(c)},set text(e){l(c,e,!0)}}),n(N);var ge=r(N,2);ye(ge,17,()=>a(S),xe,(e,s)=>{var t=la(),i=o(t,!0);n(t),k(()=>he(i,a(s))),_(e,t)});var _e=r(ge,2);{var Se=e=>{var s=ia();_(e,s)};D(_e,e=>{a(C)&&e(Se)})}var W=r(_e,6),K=o(W);V(K);var ze=r(K,2);O(ze,{padding:"0.31rem",limit:20,get text(){return a(x)},set text(e){l(x,e,!0)}}),n(W);var q=r(W,2),Ne=r(o(q),2),$e=()=>a(p).showPronounsOnProfile,Ee=e=>f({showPronounsOnProfile:e});I(Ne,{id:"display-pronouns",size:.6,get value(){return $e()},set value(e){Ee(e)}}),n(q);var G=r(q,2),Fe=r(o(G),2),Ae=()=>a(p).showPronounsOnPosts,Oe=e=>f({showPronounsOnPosts:e});I(Fe,{id:"display-post-pronouns",size:.6,get value(){return Ae()},set value(e){Oe(e)}}),n(G);var H=r(G,6),E=o(H);Ge(E);var Re=r(E,2);O(Re,{limit:144,get text(){return a(y)},set text(e){l(y,e,!0)}}),n(H);var me=r(H,6);{var Le=e=>{var s=da(),t=o(s),i=o(t);ea(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(t);var u=r(t,2),g=()=>a(p).showDeveloperBadge,w=d=>f({showDeveloperBadge:d});I(u,{size:.6,get value(){return g()},set value(d){w(d)}}),n(s),_(e,s)};D(me,e=>{a(p).tags.includes("dev")&&e(Le)})}var ce=r(me,2);{var Me=e=>{var s=va(),t=o(s),i=o(t);Je(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(t);var u=r(t,2),g=()=>a(p).showModeratorBadge,w=d=>f({showModeratorBadge:d});I(u,{size:.6,get value(){return g()},set value(d){w(d)}}),n(s),_(e,s)};D(ce,e=>{a(p).tags.includes("mod")&&e(Me)})}var be=r(ce,2);{var je=e=>{var s=pa(),t=o(s),i=o(t);Ue(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(t);var u=r(t,2),g=()=>a(p).showAuthorBadge,w=d=>f({showAuthorBadge:d});I(u,{size:.6,get value(){return g()},set value(d){w(d)}}),n(s),_(e,s)};D(be,e=>{a(p).tags.includes("author")&&e(je)})}var Te=r(be,2);{var We=e=>{var s=ua(),t=o(s),i=o(t);aa(i,{stroke:"var(--crust)",style:"width: 1rem; height: 1rem;"}),n(t);var u=r(t,2),g=()=>a(p).showNewbieBadge,w=d=>f({showNewbieBadge:d});I(u,{size:.6,get value(){return g()},set value(d){w(d)}}),n(s),_(e,s)};D(Te,e=>{Date.now()-a(p).birthmoment<1e3*60*60*24*7&&e(We)})}n(ne),k((e,s)=>{de.disabled=!a(Z),ve=F(z,"",ve,e),ue=F(N,"",ue,s),Qe(E,`					${a(p).bio??""}
				`)},[()=>({outline:a(L).length>0?"2px solid var(--red)":"none"}),()=>({outline:a(C)||a(S).length>0?"2px solid var(--red)":"none"})]),A(z,()=>a(b),e=>l(b,e)),A($,()=>a(c),e=>l(c,e)),A(K,()=>a(x),e=>l(x,e)),A(E,()=>a(y),e=>l(y,e)),_(Pe,re)});var te=r(ae,2);te.__click=M,k(()=>te.disabled=!a(Z)),_(v,U)},$$slots:{default:!0}}),qe()}Ve(["click","input"]);export{Fa as component};
