import{a as _,n as ve,t as F,c as te}from"./BxSTZsxu.js";import{V as Y,Z as i,_ as t,$ as r,Y as L,W as q,a4 as G,j as s,av as W,ag as E,ad as I,aw as it}from"./CPHSnTsz.js";import{s as y}from"./hyAO6D8E.js";import{i as B}from"./CYO2J7MK.js";import{e as xe,i as we}from"./BbCGS9aR.js";import{h as lt,S as nt,A as Fe}from"./GMrxSaHP.js";import{s as C,a as de}from"./7AsNW3e5.js";import{d as Ee}from"./BmoptDBf.js";import{t as v,s as c}from"./CSAgp_0I.js";import{p as se}from"./BKizAegZ.js";import{g as ye}from"./CXC2FEGv.js";import{g as We,k as vt,m as dt,b as re,n as ct,u as Ze,o as Oe}from"./BKupSz3R.js";import{r as ce}from"./Yq0P00KR.js";import{L as ut}from"./JjU3Ua5S.js";import{B as gt}from"./DMdIt5He.js";import{M as _t}from"./D6zMLIlL.js";var ft=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function pt(f,e){Y(e,!0);let o=ce(e,["$$slots","$$events","$$legacy"]),l=e.stroke;o={...o},o.stroke=void 0;var n=ft();let u;var g=i(t(n),2),p=t(g);C(p,"stroke",l),r(g),r(n),L(()=>u=de(n,u,{...o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),q()}var mt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 7V12L14.5 10.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function bt(f,e){Y(e,!0);let o=ce(e,["$$slots","$$events","$$legacy"]),l=e.stroke;o={...o},o.stroke=void 0;var n=mt();let u;var g=i(t(n),2),p=t(g);C(p,"stroke",l),r(g),r(n),L(()=>u=de(n,u,{...o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),q()}var kt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function ht(f,e){Y(e,!0);let o=ce(e,["$$slots","$$events","$$legacy"]),l=e.stroke;o={...o},o.stroke=void 0;var n=kt();let u;var g=i(t(n),2),p=t(g);C(p,"stroke",l),r(g),r(n),L(()=>u=de(n,u,{...o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),q()}var xt=(f,e)=>ye(`/profile/${e.user.username}`),wt=F('<span class="svelte-1x69ua7"> </span>'),yt=(f,e)=>{var o;return ye(`/book/${(o=s(e))==null?void 0:o.isbn}`)},Ct=F('<section class="svelte-1x69ua7"><div class="profile svelte-1x69ua7"><button class="svelte-1x69ua7"></button></div> <div class="wrapper svelte-1x69ua7"><span class="user svelte-1x69ua7"><h2 class="svelte-1x69ua7"> </h2> <h3 class="svelte-1x69ua7"> </h3></span> <div class="outer"><div class="listing svelte-1x69ua7"><div class="book-info svelte-1x69ua7"><h1 class="svelte-1x69ua7"> </h1> <h2 class="svelte-1x69ua7"> </h2> <!> <span class="svelte-1x69ua7"> </span></div> <img class="cover svelte-1x69ua7"></div> <p class="description svelte-1x69ua7"> </p></div></div></section>');function Mt(f,e){Y(e,!0);let o=W(null);(async function(){G(o,se(await We(e.isbn)))})();var l=Ct(),n=t(l),u=t(n);u.__click=[xt,e],r(n);var g=i(n,2),p=t(g),M=t(p),Ce=t(M,!0);r(M);var ae=i(M,2),Me=t(ae,!0);r(ae),r(p);var oe=i(p,2),z=t(oe),J=t(z),N=t(J),K=t(N,!0);r(N);var Q=i(N,2),T=t(Q,!0);r(Q);var P=i(Q,2);{var ie=k=>{var R=wt(),A=t(R);r(R),L(le=>{var $;c(R,"color",le),y(A,`${(($=s(o))==null?void 0:$.pageCount)??""} pages`)},[()=>v().text]),_(k,R)};B(P,k=>{var R;(R=s(o))!=null&&R.pageCount&&k(ie)})}var U=i(P,2),X=t(U,!0);r(U),r(J);var ue=i(J,2);ue.__click=[yt,o],r(z);var H=i(z,2),Se=t(H,!0);r(H),r(oe),r(g),r(l),L((k,R,A,le,$)=>{var ge,_e,fe;c(u,"background-image",`url("${e.user.picture}")`),c(M,"color",k),y(Ce,e.user.displayName),c(ae,"color",R),y(Me,`@${e.user.username}`),c(N,"color",A),y(K,(ge=s(o))==null?void 0:ge.title),c(Q,"color",R),y(T,le),c(U,"color",A),y(X,$),C(ue,"src",(_e=s(o))==null?void 0:_e.cover),c(H,"color",A),y(Se,(fe=s(o))==null?void 0:fe.description)},[()=>v().textBright,()=>v().textDim,()=>v().text,()=>{var k;return(k=s(o))==null?void 0:k.authors.join(", ")},()=>{var k;return[...((k=s(o))==null?void 0:k.genres)??[]].splice(0,2).join(", ")}]),_(f,l),q()}Ee(["click"]);var St=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke-width="1.5" stroke-linecap="round"></path></g></svg>');function Vt(f,e){Y(e,!0);let o=ce(e,["$$slots","$$events","$$legacy"]),l=e.stroke;o={...o},o.stroke=void 0;var n=St();let u;var g=i(t(n),2),p=t(g);C(p,"stroke",l);var M=i(p);C(M,"stroke",l),r(g),r(n),L(()=>u=de(n,u,{...o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),q()}var Rt=ve('<svg><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="12" r="10" stroke-width="1.5"></circle><path d="M8.5 12.5L10.5 14.5L15.5 9.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>');function Dt(f,e){Y(e,!0);let o=ce(e,["$$slots","$$events","$$legacy"]),l=e.stroke;o={...o},o.stroke=void 0;var n=Rt();let u;var g=i(t(n),2),p=t(g);C(p,"stroke",l);var M=i(p);C(M,"stroke",l),r(g),r(n),L(()=>u=de(n,u,{...o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,!0)),_(f,n),q()}var Bt=()=>ye("/"),Gt=F('<span class="dev svelte-doybg2">Dev</span>'),Lt=F('<span class="author svelte-doybg2">Author</span>'),jt=F('<span class="mod svelte-doybg2">Moderator</span>'),Ft=()=>ye("/profile/edit"),It=F('<button class="edit-profile svelte-doybg2">Edit Profile</button>'),Ht=F('<div class="profile-actions svelte-doybg2"><button class="profile-action-follow svelte-doybg2"><!></button> <button class="profile-action svelte-doybg2"><!></button></div>'),At=F('<span class="svelte-doybg2"><!> <span class="truncate svelte-doybg2"> </span></span>'),Nt=(f,e)=>G(e,"all"),Pt=(f,e)=>G(e,"discussion"),Ut=(f,e)=>G(e,"ratings"),Zt=(f,e)=>G(e,"list"),Ot=F('<div class="ratings svelte-doybg2"><span class="rating-sort svelte-doybg2"><!> Best</span> <!></div>'),Et=F('<!> <main class="svelte-doybg2"><div class="banner svelte-doybg2"></div> <button class="back-arrow svelte-doybg2"><!></button> <div class="profile svelte-doybg2"><img class="profile-picture svelte-doybg2"> <div class="profile-line-1 svelte-doybg2"><span class="name svelte-doybg2"><h1 class="svelte-doybg2"> </h1> <h2 class="svelte-doybg2"> </h2> <!> <!> <!></span> <!></div> <p class="bio svelte-doybg2"><!></p> <div class="profile-line-2 svelte-doybg2"><span class="svelte-doybg2"><!> <span class="truncate svelte-doybg2"> </span></span> <!> <span class="svelte-doybg2"><!> <span> </span></span></div> <a class="follows svelte-doybg2"><span> </span> <span> </span></a> <div class="views svelte-doybg2"><button class="svelte-doybg2">All</button> <button class="svelte-doybg2">Discussion</button> <button class="svelte-doybg2">Reviews</button> <button class="svelte-doybg2">Reading List</button></div></div> <!></main>',1);function ir(f,e){Y(e,!0);let o=W(se([])),l=W("all"),n=W(""),u=W(0),g=W(""),p=I(()=>{var a;return((a=re())==null?void 0:a.id)===e.user.id});(async()=>{var d;G(n,se(((d=await vt(e.user))==null?void 0:d.title)??"")),G(g,se(e.user.currentBook?(await We(e.user.currentBook)).title:null));let a=await dt(e.user);G(o,se(a.toSorted((m,S)=>S.timestamp-m.timestamp))),G(u,se(s(o).filter(m=>m.type==="rating").length))})();let M=W(null),Ce=I(()=>{var a;return((a=re())==null?void 0:a.following.some(d=>d===e.user.id))??!1});function ae(){G(M,!0),Ze({following:[...new Set([...re().following,e.user.id])]}),Oe(e.user,{followers:[...new Set([...e.user.followers,re().id])]})}function Me(){G(M,!1),Ze({following:re().following.filter(a=>a!==e.user.id)}),Oe(e.user,{followers:e.user.followers.filter(a=>a!==re().id)})}var oe=Et(),z=E(oe);gt(z,{});var J=i(z,2),N=t(J),K=i(N,2);K.__click=[Bt];var Q=t(K);ut(Q,{stroke:"#FFFFFF",style:"width: 1.5rem; height: 1.5rem;"}),r(K);var T=i(K,2),P=t(T),ie=i(P,2),U=t(ie),X=t(U),ue=t(X,!0);r(X);var H=i(X,2),Se=t(H);r(H);var k=i(H,2);{var R=a=>{var d=Gt();_(a,d)};B(k,a=>{e.user.tags.includes("dev")&&a(R)})}var A=i(k,2);{var le=a=>{var d=Lt();_(a,d)};B(A,a=>{e.user.tags.includes("author")&&a(le)})}var $=i(A,2);{var ge=a=>{var d=jt();_(a,d)};B($,a=>{e.user.tags.includes("mod")&&a(ge)})}r(U);var _e=i(U,2);{var fe=a=>{var d=It();d.__click=[Ft],_(a,d)},Ye=a=>{var d=Ht(),m=t(d),S=t(m);{var h=b=>{const w=I(()=>v().textDull);Dt(b,{get stroke(){return s(w)},style:"width: 2rem;",onclick:Me})},D=b=>{const w=I(()=>v().textDull);Vt(b,{get stroke(){return s(w)},style:"width: 2rem;",onclick:ae})};B(S,b=>{s(M)||s(Ce)&&s(M)!==!1?b(h):b(D,!1)})}r(m);var x=i(m,2),j=t(x);const Z=I(()=>v().textDull);_t(j,{get stroke(){return s(Z)},style:"width: 1rem;"}),r(x),r(d),L(b=>{c(m,"border-color",b),c(x,"border-color",b)},[()=>v().textDull]),_(a,d)};B(_e,a=>{s(p)?a(fe):a(Ye,!1)})}r(ie);var pe=i(ie,2),qe=t(pe);lt(qe,()=>ct(e.user.bio)),r(pe);var Ve=i(pe,2),me=t(Ve),Ie=t(me);const ze=I(()=>v().textDull);nt(Ie,{get stroke(){return s(ze)},style:"width: 1.25rem; height: 1.25rem;"});var Re=i(Ie,2),Je=t(Re,!0);r(Re),r(me);var He=i(me,2);{var Ke=a=>{var d=At(),m=t(d);const S=I(()=>v().textDull);bt(m,{get stroke(){return s(S)},style:"width: 1.25rem; height: 1.25rem;"});var h=i(m,2),D=t(h,!0);r(h),r(d),L(x=>{C(d,"title",`${e.user.displayName} is currently reading ${s(g)}`),c(h,"color",x),y(D,s(g))},[()=>v().textDull]),_(a,d)};B(He,a=>{s(g)&&a(Ke)})}var De=i(He,2),Ae=t(De);const Qe=I(()=>v().textDull);pt(Ae,{get stroke(){return s(Qe)},style:"width: 1.25rem; height: 1.25rem;"});var Be=i(Ae,2),Te=t(Be,!0);r(Be),r(De),r(Ve);var ee=i(Ve,2),Ge=t(ee),Xe=t(Ge);r(Ge);var Ne=i(Ge,2),$e=t(Ne);r(Ne),r(ee);var Pe=i(ee,2),be=t(Pe);be.__click=[Nt,l];var ke=i(be,2);ke.__click=[Pt,l];var he=i(ke,2);he.__click=[Ut,l];var Le=i(he,2);Le.__click=[Zt,l],r(Pe),r(T);var et=i(T,2);{var tt=a=>{var d=te(),m=E(d);xe(m,17,()=>s(o).filter(S=>S.type==="general"),we,(S,h)=>{Fe(S,{get post(){return s(h)}})}),_(a,d)},rt=a=>{var d=te(),m=E(d);{var S=D=>{var x=Ot(),j=t(x),Z=t(j);const b=I(()=>v().text);ht(Z,{get stroke(){return s(b)},style:"width: 1.75rem; height: 1.75rem;"}),it(),r(j);var w=i(j,2);xe(w,17,()=>s(o).filter(V=>V.type==="rating"),we,(V,O)=>{Fe(V,{get post(){return s(O)}})}),r(x),L(V=>c(j,"color",V),[()=>v().text]),_(D,x)},h=D=>{var x=te(),j=E(x);{var Z=w=>{var V=te(),O=E(V);xe(O,17,()=>e.user.readingList,we,(je,ne)=>{Mt(je,{get isbn(){return s(ne)},get user(){return e.user}})}),_(w,V)},b=w=>{var V=te(),O=E(V);{var je=ne=>{var Ue=te(),st=E(Ue);xe(st,17,()=>s(o),we,(at,ot)=>{Fe(at,{get post(){return s(ot)}})}),_(ne,Ue)};B(O,ne=>{s(l)==="all"&&ne(je)},!0)}_(w,V)};B(j,w=>{s(l)==="list"?w(Z):w(b,!1)},!0)}_(D,x)};B(m,D=>{s(l)==="ratings"?D(S):D(h,!1)},!0)}_(a,d)};B(et,a=>{s(l)==="discussion"?a(tt):a(rt,!1)})}r(J),L((a,d,m,S,h,D,x,j,Z,b,w,V,O)=>{c(N,"background-image",`url("${e.user.banner}")`),c(T,"background",a),C(P,"src",e.user.picture),C(P,"alt",`${e.user.displayName} profile picture`),c(P,"border-color",a),c(X,"color",d),y(ue,e.user.displayName),c(H,"color",m),y(Se,`@${e.user.username??""}`),c(pe,"color",S),C(me,"title",`${e.user.displayName}'s highest rated book is ${s(n)}`),c(Re,"color",h),y(Je,s(n)),C(De,"title",`${e.user.displayName} has read ${s(u)} book${s(u)===1?"":"s"}`),c(Be,"color",h),y(Te,s(u)),C(ee,"href",`/profile/${e.user.username}/follows`),c(ee,"border-color",h),c(ee,"color",h),y(Xe,`${e.user.followers.length??""} Followers`),y($e,`${e.user.following.length??""} Following`),c(be,"color",D),c(be,"border-bottom",x),c(ke,"color",j),c(ke,"border-bottom",Z),c(he,"color",b),c(he,"border-bottom",w),c(Le,"color",V),c(Le,"border-bottom",O)},[()=>v().backgroundDark,()=>v().textBright,()=>v().textDim,()=>v().text,()=>v().textDull,()=>s(l)==="all"?v().text:v().textDim,()=>s(l)==="all"?`3px solid ${v().accent}`:"3px solid transparent",()=>s(l)==="discussion"?v().text:v().textDim,()=>s(l)==="discussion"?`3px solid ${v().accent}`:"3px solid transparent",()=>s(l)==="ratings"?v().text:v().textDim,()=>s(l)==="ratings"?`3px solid ${v().accent}`:"3px solid transparent",()=>s(l)==="list"?v().text:v().textDim,()=>s(l)==="list"?`3px solid ${v().accent}`:"3px solid transparent"]),_(f,oe),q()}Ee(["click"]);export{ir as P};
